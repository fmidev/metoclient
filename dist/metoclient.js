// MetOClient 6.0.5 - FMI - November 5, 2019
this.fmi=this.fmi||{},this.fmi.metoclient=function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var n,r,i,check=function(t){return t&&t.Math==Math&&t},o=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof e&&e)||Function("return this")(),fails=function(t){try{return!!t()}catch(t){return!0}},a=!fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c={f:l&&!s.call({1:2},1)?function propertyIsEnumerable(t){var e=l(this,t);return!!e&&e.enumerable}:s},createPropertyDescriptor=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},h={}.toString,classofRaw=function(t){return h.call(t).slice(8,-1)},f="".split,d=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==classofRaw(t)?f.call(t,""):Object(t)}:Object,requireObjectCoercible=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},toIndexedObject=function(t){return d(requireObjectCoercible(t))},isObject=function(t){return"object"==typeof t?null!==t:"function"==typeof t},toPrimitive=function(t,e){if(!isObject(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!isObject(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!isObject(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!isObject(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},y={}.hasOwnProperty,has=function(t,e){return y.call(t,e)},m=o.document,g=isObject(m)&&isObject(m.createElement),documentCreateElement=function(t){return g?m.createElement(t):{}},v=!a&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),_=Object.getOwnPropertyDescriptor,b={f:a?_:function getOwnPropertyDescriptor(t,e){if(t=toIndexedObject(t),e=toPrimitive(e,!0),v)try{return _(t,e)}catch(t){}if(has(t,e))return createPropertyDescriptor(!c.f.call(t,e),t[e])}},anObject=function(t){if(!isObject(t))throw TypeError(String(t)+" is not an object");return t},w=Object.defineProperty,T={f:a?w:function defineProperty(t,e,n){if(anObject(t),e=toPrimitive(e,!0),anObject(n),v)try{return w(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},S=a?function(t,e,n){return T.f(t,e,createPropertyDescriptor(1,n))}:function(t,e,n){return t[e]=n,t},setGlobal=function(t,e){try{S(o,t,e)}catch(n){o[t]=e}return e},E=o["__core-js_shared__"]||setGlobal("__core-js_shared__",{}),M=createCommonjsModule((function(t){(t.exports=function(t,e){return E[t]||(E[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.3.6",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),O=M("native-function-to-string",Function.toString),k=o.WeakMap,C="function"==typeof k&&/native code/.test(O.call(k)),P=0,I=Math.random(),uid=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++P+I).toString(36)},R=M("keys"),sharedKey=function(t){return R[t]||(R[t]=uid(t))},L={},A=o.WeakMap;if(C){var j=new A,D=j.get,N=j.has,V=j.set;n=function(t,e){return V.call(j,t,e),e},r=function(t){return D.call(j,t)||{}},i=function(t){return N.call(j,t)}}else{var G=sharedKey("state");L[G]=!0,n=function(t,e){return S(t,G,e),e},r=function(t){return has(t,G)?t[G]:{}},i=function(t){return has(t,G)}}var q,W,K={set:n,get:r,has:i,enforce:function(t){return i(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var n;if(!isObject(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},B=createCommonjsModule((function(t){var e=K.get,n=K.enforce,r=String(O).split("toString");M("inspectSource",(function(t){return O.call(t)})),(t.exports=function(t,e,i,a){var s=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||has(i,"name")||S(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==o?(s?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=i:S(t,e,i)):u?t[e]=i:setGlobal(e,i)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&e(this).source||O.call(this)}))})),Y=o,aFunction=function(t){return"function"==typeof t?t:void 0},getBuiltIn=function(t,e){return arguments.length<2?aFunction(Y[t])||aFunction(o[t]):Y[t]&&Y[t][e]||o[t]&&o[t][e]},Z=Math.ceil,H=Math.floor,toInteger=function(t){return isNaN(t=+t)?0:(t>0?H:Z)(t)},X=Math.min,toLength=function(t){return t>0?X(toInteger(t),9007199254740991):0},$=Math.max,Q=Math.min,toAbsoluteIndex=function(t,e){var n=toInteger(t);return n<0?$(n+e,0):Q(n,e)},createMethod=function(t){return function(e,n,r){var i,o=toIndexedObject(e),a=toLength(o.length),s=toAbsoluteIndex(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},J={includes:createMethod(!0),indexOf:createMethod(!1)},tt=J.indexOf,objectKeysInternal=function(t,e){var n,r=toIndexedObject(t),i=0,o=[];for(n in r)!has(L,n)&&has(r,n)&&o.push(n);for(;e.length>i;)has(r,n=e[i++])&&(~tt(o,n)||o.push(n));return o},et=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],nt=et.concat("length","prototype"),rt={f:Object.getOwnPropertyNames||function getOwnPropertyNames(t){return objectKeysInternal(t,nt)}},it={f:Object.getOwnPropertySymbols},ot=getBuiltIn("Reflect","ownKeys")||function ownKeys(t){var e=rt.f(anObject(t)),n=it.f;return n?e.concat(n(t)):e},copyConstructorProperties=function(t,e){for(var n=ot(e),r=T.f,i=b.f,o=0;o<n.length;o++){var a=n[o];has(t,a)||r(t,a,i(e,a))}},at=/#|\.prototype\./,isForced=function(t,e){var n=ut[st(t)];return n==ct||n!=lt&&("function"==typeof e?fails(e):!!e)},st=isForced.normalize=function(t){return String(t).replace(at,".").toLowerCase()},ut=isForced.data={},lt=isForced.NATIVE="N",ct=isForced.POLYFILL="P",ht=isForced,ft=b.f,_export=function(t,e){var n,r,i,a,s,u=t.target,l=t.global,c=t.stat;if(n=l?o:c?o[u]||setGlobal(u,{}):(o[u]||{}).prototype)for(r in e){if(a=e[r],i=t.noTargetGet?(s=ft(n,r))&&s.value:n[r],!ht(l?r:u+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;copyConstructorProperties(a,i)}(t.sham||i&&i.sham)&&S(a,"sham",!0),B(n,r,a,t)}},dt=Array.isArray||function isArray(t){return"Array"==classofRaw(t)},toObject=function(t){return Object(requireObjectCoercible(t))},createProperty=function(t,e,n){var r=toPrimitive(e);r in t?T.f(t,r,createPropertyDescriptor(0,n)):t[r]=n},pt=!!Object.getOwnPropertySymbols&&!fails((function(){return!String(Symbol())})),yt=o.Symbol,mt=M("wks"),wellKnownSymbol=function(t){return mt[t]||(mt[t]=pt&&yt[t]||(pt?yt:uid)("Symbol."+t))},gt=wellKnownSymbol("species"),arraySpeciesCreate=function(t,e){var n;return dt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!dt(n.prototype)?isObject(n)&&null===(n=n[gt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},vt=getBuiltIn("navigator","userAgent")||"",_t=o.process,bt=_t&&_t.versions,wt=bt&&bt.v8;wt?W=(q=wt.split("."))[0]+q[1]:vt&&(!(q=vt.match(/Edge\/(\d+)/))||q[1]>=74)&&(q=vt.match(/Chrome\/(\d+)/))&&(W=q[1]);var Tt=W&&+W,St=wellKnownSymbol("species"),arrayMethodHasSpeciesSupport=function(t){return Tt>=51||!fails((function(){var e=[];return(e.constructor={})[St]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Et=wellKnownSymbol("isConcatSpreadable"),Mt=Tt>=51||!fails((function(){var t=[];return t[Et]=!1,t.concat()[0]!==t})),Ot=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(t){if(!isObject(t))return!1;var e=t[Et];return void 0!==e?!!e:dt(t)};_export({target:"Array",proto:!0,forced:!Mt||!Ot},{concat:function concat(t){var e,n,r,i,o,a=toObject(this),s=arraySpeciesCreate(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],isConcatSpreadable(o)){if(u+(i=toLength(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,u++)n in o&&createProperty(s,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");createProperty(s,u++,o)}return s.length=u,s}});var xt=Object.keys||function keys(t){return objectKeysInternal(t,et)},kt=a?Object.defineProperties:function defineProperties(t,e){anObject(t);for(var n,r=xt(e),i=r.length,o=0;i>o;)T.f(t,n=r[o++],e[n]);return t},Ct=getBuiltIn("document","documentElement"),Pt=sharedKey("IE_PROTO"),Empty=function(){},createDict=function(){var t,e=documentCreateElement("iframe"),n=et.length;for(e.style.display="none",Ct.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),createDict=t.F;n--;)delete createDict.prototype[et[n]];return createDict()},It=Object.create||function create(t,e){var n;return null!==t?(Empty.prototype=anObject(t),n=new Empty,Empty.prototype=null,n[Pt]=t):n=createDict(),void 0===e?n:kt(n,e)};L[Pt]=!0;var Rt=wellKnownSymbol("unscopables"),Lt=Array.prototype;null==Lt[Rt]&&S(Lt,Rt,It(null));var addToUnscopables=function(t){Lt[Rt][t]=!0};_export({target:"Array",proto:!0},{fill:function fill(t){for(var e=toObject(this),n=toLength(e.length),r=arguments.length,i=toAbsoluteIndex(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:toAbsoluteIndex(o,n);a>i;)e[i++]=t;return e}}),addToUnscopables("fill");var aFunction$1=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},bindContext=function(t,e,n){if(aFunction$1(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},At=[].push,createMethod$1=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(s,u,l,c){for(var h,f,p=toObject(s),y=d(p),m=bindContext(u,l,3),g=toLength(y.length),v=0,_=c||arraySpeciesCreate,b=e?_(s,g):n?_(s,0):void 0;g>v;v++)if((a||v in y)&&(f=m(h=y[v],v,p),t))if(e)b[v]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:At.call(b,h)}else if(i)return!1;return o?-1:r||i?i:b}},jt={forEach:createMethod$1(0),map:createMethod$1(1),filter:createMethod$1(2),some:createMethod$1(3),every:createMethod$1(4),find:createMethod$1(5),findIndex:createMethod$1(6)},Dt=jt.filter;_export({target:"Array",proto:!0,forced:!arrayMethodHasSpeciesSupport("filter")},{filter:function filter(t){return Dt(this,t,arguments.length>1?arguments[1]:void 0)}});var Nt=jt.find,Ft=!0;"find"in[]&&Array(1).find((function(){Ft=!1})),_export({target:"Array",proto:!0,forced:Ft},{find:function find(t){return Nt(this,t,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("find");var Ut=jt.findIndex,Vt=!0;"findIndex"in[]&&Array(1).findIndex((function(){Vt=!1})),_export({target:"Array",proto:!0,forced:Vt},{findIndex:function findIndex(t){return Ut(this,t,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("findIndex");var zt=J.includes;_export({target:"Array",proto:!0},{includes:function includes(t){return zt(this,t,arguments.length>1?arguments[1]:void 0)}}),addToUnscopables("includes");var Gt,qt,Wt,Kt={},Bt=!fails((function(){function F(){}return F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype})),Yt=sharedKey("IE_PROTO"),Zt=Object.prototype,Ht=Bt?Object.getPrototypeOf:function(t){return t=toObject(t),has(t,Yt)?t[Yt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Zt:null},Xt=wellKnownSymbol("iterator"),$t=!1;[].keys&&("next"in(Wt=[].keys())?(qt=Ht(Ht(Wt)))!==Object.prototype&&(Gt=qt):$t=!0),null==Gt&&(Gt={}),has(Gt,Xt)||S(Gt,Xt,(function(){return this}));var Qt={IteratorPrototype:Gt,BUGGY_SAFARI_ITERATORS:$t},Jt=T.f,te=wellKnownSymbol("toStringTag"),setToStringTag=function(t,e,n){t&&!has(t=n?t:t.prototype,te)&&Jt(t,te,{configurable:!0,value:e})},ee=Qt.IteratorPrototype,returnThis$1=function(){return this},ne=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function setPrototypeOf(n,r){return anObject(n),function(t){if(!isObject(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),re=Qt.IteratorPrototype,ie=Qt.BUGGY_SAFARI_ITERATORS,oe=wellKnownSymbol("iterator"),returnThis$2=function(){return this},defineIterator=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=It(ee,{next:createPropertyDescriptor(1,n)}),setToStringTag(t,r,!1),Kt[r]=returnThis$1}(n,e,r);var s,u,l,getIterationMethod=function(t){if(t===i&&p)return p;if(!ie&&t in f)return f[t];switch(t){case"keys":return function keys(){return new n(this,t)};case"values":return function values(){return new n(this,t)};case"entries":return function entries(){return new n(this,t)}}return function(){return new n(this)}},c=e+" Iterator",h=!1,f=t.prototype,d=f[oe]||f["@@iterator"]||i&&f[i],p=!ie&&d||getIterationMethod(i),y="Array"==e&&f.entries||d;if(y&&(s=Ht(y.call(new t)),re!==Object.prototype&&s.next&&(Ht(s)!==re&&(ne?ne(s,re):"function"!=typeof s[oe]&&S(s,oe,returnThis$2)),setToStringTag(s,c,!0))),"values"==i&&d&&"values"!==d.name&&(h=!0,p=function values(){return d.call(this)}),f[oe]!==p&&S(f,oe,p),Kt[e]=p,i)if(u={values:getIterationMethod("values"),keys:o?p:getIterationMethod("keys"),entries:getIterationMethod("entries")},a)for(l in u)!ie&&!h&&l in f||B(f,l,u[l]);else _export({target:e,proto:!0,forced:ie||h},u);return u},ae=K.set,se=K.getterFor("Array Iterator"),ue=defineIterator(Array,"Array",(function(t,e){ae(this,{type:"Array Iterator",target:toIndexedObject(t),index:0,kind:e})}),(function(){var t=se(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Kt.Arguments=Kt.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var le=jt.map;_export({target:"Array",proto:!0,forced:!arrayMethodHasSpeciesSupport("map")},{map:function map(t){return le(this,t,arguments.length>1?arguments[1]:void 0)}});var sloppyArrayMethod=function(t,e){var n=[][t];return!n||!fails((function(){n.call(null,e||function(){throw 1},1)}))},ce=[].sort,he=[1,2,3],fe=fails((function(){he.sort(void 0)})),de=fails((function(){he.sort(null)})),pe=sloppyArrayMethod("sort");_export({target:"Array",proto:!0,forced:fe||!de||pe},{sort:function sort(t){return void 0===t?ce.call(toObject(this)):ce.call(toObject(this),aFunction$1(t))}});var ye=T.f,me=Function.prototype,ge=me.toString,ve=/^\s*function ([^ (]*)/;!a||"name"in me||ye(me,"name",{configurable:!0,get:function(){try{return ge.call(this).match(ve)[1]}catch(t){return""}}});var _e=Math.sign||function sign(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};_export({target:"Math",stat:!0},{sign:_e});var inheritIfRequired=function(t,e,n){var r,i;return ne&&"function"==typeof(r=e.constructor)&&r!==n&&isObject(i=r.prototype)&&i!==n.prototype&&ne(t,i),t},be="\t\n\v\f\r                　\u2028\u2029\ufeff",we="["+be+"]",Te=RegExp("^"+we+we+"*"),Se=RegExp(we+we+"*$"),createMethod$2=function(t){return function(e){var n=String(requireObjectCoercible(e));return 1&t&&(n=n.replace(Te,"")),2&t&&(n=n.replace(Se,"")),n}},Ee={start:createMethod$2(1),end:createMethod$2(2),trim:createMethod$2(3)},Me=rt.f,Oe=b.f,xe=T.f,ke=Ee.trim,Ce=o.Number,Pe=Ce.prototype,Ie="Number"==classofRaw(It(Pe)),toNumber=function(t){var e,n,r,i,o,a,s,u,l=toPrimitive(t,!1);if("string"==typeof l&&l.length>2)if(43===(e=(l=ke(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(a=(o=l.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>i)return NaN;return parseInt(o,r)}return+l};if(ht("Number",!Ce(" 0o1")||!Ce("0b1")||Ce("+0x1"))){for(var Re,Le=function Number(t){var e=arguments.length<1?0:t,n=this;return n instanceof Le&&(Ie?fails((function(){Pe.valueOf.call(n)})):"Number"!=classofRaw(n))?inheritIfRequired(new Ce(toNumber(e)),n,Le):toNumber(e)},Ae=a?Me(Ce):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),je=0;Ae.length>je;je++)has(Ce,Re=Ae[je])&&!has(Le,Re)&&xe(Le,Re,Oe(Ce,Re));Le.prototype=Pe,Pe.constructor=Le,B(o,"Number",Le)}_export({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var De=fails((function(){xt(1)}));_export({target:"Object",stat:!0,forced:De},{keys:function keys(t){return xt(toObject(t))}});var Ne=wellKnownSymbol("toStringTag"),Fe="Arguments"==classofRaw(function(){return arguments}()),classof=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ne))?n:Fe?classofRaw(e):"Object"==(r=classofRaw(e))&&"function"==typeof e.callee?"Arguments":r},Ue={};Ue[wellKnownSymbol("toStringTag")]="z";var Ve="[object z]"!==String(Ue)?function toString(){return"[object "+classof(this)+"]"}:Ue.toString,ze=Object.prototype;Ve!==ze.toString&&B(ze,"toString",Ve,{unsafe:!0});var Ge=o.Promise,redefineAll=function(t,e,n){for(var r in e)B(t,r,e[r],n);return t},qe=wellKnownSymbol("species"),setSpecies=function(t){var e=getBuiltIn(t),n=T.f;a&&e&&!e[qe]&&n(e,qe,{configurable:!0,get:function(){return this}})},anInstance=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},We=wellKnownSymbol("iterator"),Ke=Array.prototype,isArrayIteratorMethod=function(t){return void 0!==t&&(Kt.Array===t||Ke[We]===t)},Be=wellKnownSymbol("iterator"),getIteratorMethod=function(t){if(null!=t)return t[Be]||t["@@iterator"]||Kt[classof(t)]},callWithSafeIterationClosing=function(t,e,n,r){try{return r?e(anObject(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&anObject(i.call(t)),e}},Ye=createCommonjsModule((function(t){var Result=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,r,i){var o,a,s,u,l,c,h,f=bindContext(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(a=getIteratorMethod(t)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(a)){for(s=0,u=toLength(t.length);u>s;s++)if((l=r?f(anObject(h=t[s])[0],h[1]):f(t[s]))&&l instanceof Result)return l;return new Result(!1)}o=a.call(t)}for(c=o.next;!(h=c.call(o)).done;)if("object"==typeof(l=callWithSafeIterationClosing(o,f,h.value,r))&&l&&l instanceof Result)return l;return new Result(!1)}).stop=function(t){return new Result(!0,t)}})),Ze=wellKnownSymbol("iterator"),He=!1;try{var Xe=0,$e={next:function(){return{done:!!Xe++}},return:function(){He=!0}};$e[Ze]=function(){return this},Array.from($e,(function(){throw 2}))}catch(t){}var Qe,Je,tn,checkCorrectnessOfIteration=function(t,e){if(!e&&!He)return!1;var n=!1;try{var r={};r[Ze]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},en=wellKnownSymbol("species"),speciesConstructor=function(t,e){var n,r=anObject(t).constructor;return void 0===r||null==(n=anObject(r)[en])?e:aFunction$1(n)},nn=o.location,rn=o.setImmediate,on=o.clearImmediate,an=o.process,sn=o.MessageChannel,un=o.Dispatch,ln=0,cn={},run=function(t){if(cn.hasOwnProperty(t)){var e=cn[t];delete cn[t],e()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){o.postMessage(t+"",nn.protocol+"//"+nn.host)};rn&&on||(rn=function setImmediate(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return cn[++ln]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Qe(ln),ln},on=function clearImmediate(t){delete cn[t]},"process"==classofRaw(an)?Qe=function(t){an.nextTick(runner(t))}:un&&un.now?Qe=function(t){un.now(runner(t))}:sn&&!/(iphone|ipod|ipad).*applewebkit/i.test(vt)?(tn=(Je=new sn).port2,Je.port1.onmessage=listener,Qe=bindContext(tn.postMessage,tn,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||fails(post)?Qe="onreadystatechange"in documentCreateElement("script")?function(t){Ct.appendChild(documentCreateElement("script")).onreadystatechange=function(){Ct.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)}:(Qe=post,o.addEventListener("message",listener,!1)));var hn,fn,dn,pn,yn,mn,gn,vn,_n={set:rn,clear:on},bn=b.f,wn=_n.set,Tn=o.MutationObserver||o.WebKitMutationObserver,Sn=o.process,En=o.Promise,Mn="process"==classofRaw(Sn),On=bn(o,"queueMicrotask"),xn=On&&On.value;xn||(hn=function(){var t,e;for(Mn&&(t=Sn.domain)&&t.exit();fn;){e=fn.fn,fn=fn.next;try{e()}catch(t){throw fn?pn():dn=void 0,t}}dn=void 0,t&&t.enter()},Mn?pn=function(){Sn.nextTick(hn)}:Tn&&!/(iphone|ipod|ipad).*applewebkit/i.test(vt)?(yn=!0,mn=document.createTextNode(""),new Tn(hn).observe(mn,{characterData:!0}),pn=function(){mn.data=yn=!yn}):En&&En.resolve?(gn=En.resolve(void 0),vn=gn.then,pn=function(){vn.call(gn,hn)}):pn=function(){wn.call(o,hn)});var kn,Cn,Pn,In,Rn=xn||function(t){var e={fn:t,next:void 0};dn&&(dn.next=e),fn||(fn=e,pn()),dn=e},PromiseCapability=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=aFunction$1(e),this.reject=aFunction$1(n)},Ln={f:function(t){return new PromiseCapability(t)}},promiseResolve=function(t,e){if(anObject(t),isObject(e)&&e.constructor===t)return e;var n=Ln.f(t);return(0,n.resolve)(e),n.promise},perform=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},An=_n.set,jn=wellKnownSymbol("species"),Dn="Promise",Nn=K.get,Fn=K.set,Un=K.getterFor(Dn),Vn=Ge,zn=o.TypeError,Gn=o.document,qn=o.process,Wn=getBuiltIn("fetch"),Kn=Ln.f,Bn=Kn,Yn="process"==classofRaw(qn),Zn=!!(Gn&&Gn.createEvent&&o.dispatchEvent),Hn=ht(Dn,(function(){if(66===Tt)return!0;if(!Yn&&"function"!=typeof PromiseRejectionEvent)return!0;if(Tt>=51&&/native code/.test(Vn))return!1;var t=Vn.resolve(1),FakePromise=function(t){t((function(){}),(function(){}))};return(t.constructor={})[jn]=FakePromise,!(t.then((function(){}))instanceof FakePromise)})),Xn=Hn||!checkCorrectnessOfIteration((function(t){Vn.all(t).catch((function(){}))})),isThenable=function(t){var e;return!(!isObject(t)||"function"!=typeof(e=t.then))&&e},notify$1=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;Rn((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var s,u,l,c=r[a++],h=o?c.ok:c.fail,f=c.resolve,d=c.reject,p=c.domain;try{h?(o||(2===e.rejection&&onHandleUnhandled(t,e),e.rejection=1),!0===h?s=i:(p&&p.enter(),s=h(i),p&&(p.exit(),l=!0)),s===c.promise?d(zn("Promise-chain cycle")):(u=isThenable(s))?u.call(s,f,d):f(s)):d(i)}catch(t){p&&!l&&p.exit(),d(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&onUnhandled(t,e)}))}},dispatchEvent=function(t,e,n){var r,i;Zn?((r=Gn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),o.dispatchEvent(r)):r={promise:e,reason:n},(i=o["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=o.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},onUnhandled=function(t,e){An.call(o,(function(){var n,r=e.value;if(isUnhandled(e)&&(n=perform((function(){Yn?qn.emit("unhandledRejection",r,t):dispatchEvent("unhandledrejection",t,r)})),e.rejection=Yn||isUnhandled(e)?2:1,n.error))throw n.value}))},isUnhandled=function(t){return 1!==t.rejection&&!t.parent},onHandleUnhandled=function(t,e){An.call(o,(function(){Yn?qn.emit("rejectionHandled",t):dispatchEvent("rejectionhandled",t,e.value)}))},bind=function(t,e,n,r){return function(i){t(e,n,i,r)}},internalReject=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,notify$1(t,e,!0))},internalResolve=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw zn("Promise can't be resolved itself");var i=isThenable(n);i?Rn((function(){var r={done:!1};try{i.call(n,bind(internalResolve,t,r,e),bind(internalReject,t,r,e))}catch(n){internalReject(t,r,n,e)}})):(e.value=n,e.state=1,notify$1(t,e,!1))}catch(n){internalReject(t,{done:!1},n,e)}}};Hn&&(Vn=function Promise(t){anInstance(this,Vn,Dn),aFunction$1(t),kn.call(this);var e=Nn(this);try{t(bind(internalResolve,this,e),bind(internalReject,this,e))}catch(t){internalReject(this,e,t)}},(kn=function Promise(t){Fn(this,{type:Dn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=redefineAll(Vn.prototype,{then:function then(t,e){var n=Un(this),r=Kn(speciesConstructor(this,Vn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Yn?qn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&notify$1(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Cn=function(){var t=new kn,e=Nn(t);this.promise=t,this.resolve=bind(internalResolve,t,e),this.reject=bind(internalReject,t,e)},Ln.f=Kn=function(t){return t===Vn||t===Pn?new Cn(t):Bn(t)},"function"==typeof Ge&&(In=Ge.prototype.then,B(Ge.prototype,"then",(function then(t,e){var n=this;return new Vn((function(t,e){In.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Wn&&_export({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){return promiseResolve(Vn,Wn.apply(o,arguments))}}))),_export({global:!0,wrap:!0,forced:Hn},{Promise:Vn}),setToStringTag(Vn,Dn,!1),setSpecies(Dn),Pn=getBuiltIn(Dn),_export({target:Dn,stat:!0,forced:Hn},{reject:function reject(t){var e=Kn(this);return e.reject.call(void 0,t),e.promise}}),_export({target:Dn,stat:!0,forced:Hn},{resolve:function resolve(t){return promiseResolve(this,t)}}),_export({target:Dn,stat:!0,forced:Xn},{all:function all(t){var e=this,n=Kn(e),r=n.resolve,i=n.reject,o=perform((function(){var n=aFunction$1(e.resolve),o=[],a=0,s=1;Ye(t,(function(t){var u=a++,l=!1;o.push(void 0),s++,n.call(e,t).then((function(t){l||(l=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function race(t){var e=this,n=Kn(e),r=n.reject,i=perform((function(){var i=aFunction$1(e.resolve);Ye(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var $n=!fails((function(){return Object.isExtensible(Object.preventExtensions({}))})),Qn=createCommonjsModule((function(t){var e=T.f,n=uid("meta"),r=0,i=Object.isExtensible||function(){return!0},setMetadata=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!isObject(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!has(t,n)){if(!i(t))return"F";if(!e)return"E";setMetadata(t)}return t[n].objectID},getWeakData:function(t,e){if(!has(t,n)){if(!i(t))return!0;if(!e)return!1;setMetadata(t)}return t[n].weakData},onFreeze:function(t){return $n&&o.REQUIRED&&i(t)&&!has(t,n)&&setMetadata(t),t}};L[n]=!0})),Jn=(Qn.REQUIRED,Qn.fastKey,Qn.getWeakData,Qn.onFreeze,T.f),tr=Qn.fastKey,er=K.set,nr=K.getterFor,rr=(function(t,e,n,r,i){var a=o[t],s=a&&a.prototype,u=a,l=r?"set":"add",c={},fixMethod=function(t){var e=s[t];B(s,t,"add"==t?function add(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!isObject(t))&&e.call(this,0===t?0:t)}:"get"==t?function get(t){return i&&!isObject(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function has(t){return!(i&&!isObject(t))&&e.call(this,0===t?0:t)}:function set(t,n){return e.call(this,0===t?0:t,n),this})};if(ht(t,"function"!=typeof a||!(i||s.forEach&&!fails((function(){(new a).entries().next()})))))u=n.getConstructor(e,t,r,l),Qn.REQUIRED=!0;else if(ht(t,!0)){var h=new u,f=h[l](i?{}:-0,1)!=h,d=fails((function(){h.has(1)})),p=checkCorrectnessOfIteration((function(t){new a(t)})),y=!i&&fails((function(){for(var t=new a,e=5;e--;)t[l](e,e);return!t.has(-0)}));p||((u=e((function(e,n){anInstance(e,u,t);var i=inheritIfRequired(new a,e,u);return null!=n&&Ye(n,i[l],i,r),i}))).prototype=s,s.constructor=u),(d||y)&&(fixMethod("delete"),fixMethod("has"),r&&fixMethod("get")),(y||f)&&fixMethod(l),i&&s.clear&&delete s.clear}c[t]=u,_export({global:!0,forced:u!=a},c),setToStringTag(u,t),i||n.setStrong(u,t,r)}("Set",(function(t){return function Set(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){anInstance(t,i,e),er(t,{type:e,index:It(null),first:void 0,last:void 0,size:0}),a||(t.size=0),null!=o&&Ye(o,t[r],t,n)})),o=nr(e),define=function(t,e,n){var r,i,s=o(t),u=getEntry(t,e);return u?u.value=n:(s.last=u={index:i=tr(e,!0),key:e,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=u),r&&(r.next=u),a?s.size++:t.size++,"F"!==i&&(s.index[i]=u)),t},getEntry=function(t,e){var n,r=o(t),i=tr(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return redefineAll(i.prototype,{clear:function clear(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,a?t.size=0:this.size=0},delete:function(t){var e=o(this),n=getEntry(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),a?e.size--:this.size--}return!!n},forEach:function forEach(t){for(var e,n=o(this),r=bindContext(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function has(t){return!!getEntry(this,t)}}),redefineAll(i.prototype,n?{get:function get(t){var e=getEntry(this,t);return e&&e.value},set:function set(t,e){return define(this,0===t?0:t,e)}}:{add:function add(t){return define(this,t=0===t?0:t,t)}}),a&&Jn(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=nr(e),o=nr(r);defineIterator(t,e,(function(t,e){er(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),setSpecies(e)}}),wellKnownSymbol("match")),isRegexp=function(t){var e;return isObject(t)&&(void 0!==(e=t[rr])?!!e:"RegExp"==classofRaw(t))},notARegexp=function(t){if(isRegexp(t))throw TypeError("The method doesn't accept regular expressions");return t},ir=wellKnownSymbol("match"),correctIsRegexpLogic=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ir]=!1,"/./"[t](e)}catch(t){}}return!1},or="".endsWith,ar=Math.min;_export({target:"String",proto:!0,forced:!correctIsRegexpLogic("endsWith")},{endsWith:function endsWith(t){var e=String(requireObjectCoercible(this));notARegexp(t);var n=arguments.length>1?arguments[1]:void 0,r=toLength(e.length),i=void 0===n?r:ar(toLength(n),r),o=String(t);return or?or.call(e,o,i):e.slice(i-o.length,i)===o}}),_export({target:"String",proto:!0,forced:!correctIsRegexpLogic("includes")},{includes:function includes(t){return!!~String(requireObjectCoercible(this)).indexOf(notARegexp(t),arguments.length>1?arguments[1]:void 0)}});var createMethod$3=function(t){return function(e,n){var r,i,o=String(requireObjectCoercible(e)),a=toInteger(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},sr={codeAt:createMethod$3(!1),charAt:createMethod$3(!0)},ur=sr.charAt,lr=K.set,cr=K.getterFor("String Iterator");defineIterator(String,"String",(function(t){lr(this,{type:"String Iterator",string:String(t),index:0})}),(function next(){var t,e=cr(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ur(n,r),e.index+=t.length,{value:t,done:!1})}));var regexpFlags=function(){var t=anObject(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},hr=RegExp.prototype.exec,fr=String.prototype.replace,dr=hr,pr=function(){var t=/a/,e=/b*/g;return hr.call(t,"a"),hr.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),yr=void 0!==/()??/.exec("")[1];(pr||yr)&&(dr=function exec(t){var e,n,r,i,o=this;return yr&&(n=new RegExp("^"+o.source+"$(?!\\s)",regexpFlags.call(o))),pr&&(e=o.lastIndex),r=hr.call(o,t),pr&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),yr&&r&&r.length>1&&fr.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var mr=dr,gr=wellKnownSymbol("species"),vr=!fails((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),_r=!fails((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),fixRegexpWellKnownSymbolLogic=function(t,e,n,r){var i=wellKnownSymbol(t),o=!fails((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!fails((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[gr]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&!vr||"split"===t&&!_r){var s=/./[i],u=n(i,""[t],(function(t,e,n,r,i){return e.exec===mr?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),l=u[0],c=u[1];B(String.prototype,t,l),B(RegExp.prototype,i,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}),r&&S(RegExp.prototype[i],"sham",!0)}},br=sr.charAt,advanceStringIndex=function(t,e,n){return e+(n?br(t,e).length:1)},regexpExecAbstract=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==classofRaw(t))throw TypeError("RegExp#exec called on incompatible receiver");return mr.call(t,e)},wr=[].push,Tr=Math.min,Sr=!fails((function(){return!RegExp(4294967295,"y")}));fixRegexpWellKnownSymbolLogic("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(requireObjectCoercible(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!isRegexp(t))return e.call(r,t,i);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,l+"g");(o=mr.call(h,r))&&!((a=h.lastIndex)>c&&(u.push(r.slice(c,o.index)),o.length>1&&o.index<r.length&&wr.apply(u,o.slice(1)),s=o[0].length,c=a,u.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===r.length?!s&&h.test("")||u.push(""):u.push(r.slice(c)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function split(e,n){var i=requireObjectCoercible(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=anObject(t),s=String(this),u=speciesConstructor(a,RegExp),l=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Sr?"y":"g"),h=new u(Sr?a:"^(?:"+a.source+")",c),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===s.length)return null===regexpExecAbstract(h,s)?[s]:[];for(var d=0,p=0,y=[];p<s.length;){h.lastIndex=Sr?p:0;var m,g=regexpExecAbstract(h,Sr?s:s.slice(p));if(null===g||(m=Tr(toLength(h.lastIndex+(Sr?0:p)),s.length))===d)p=advanceStringIndex(s,p,l);else{if(y.push(s.slice(d,p)),y.length===f)return y;for(var v=1;v<=g.length-1;v++)if(y.push(g[v]),y.length===f)return y;p=d=m}}return y.push(s.slice(d)),y}]}),!Sr);var Er="".startsWith,Mr=Math.min;_export({target:"String",proto:!0,forced:!correctIsRegexpLogic("startsWith")},{startsWith:function startsWith(t){var e=String(requireObjectCoercible(this));notARegexp(t);var n=toLength(Mr(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Er?Er.call(e,r,n):e.slice(n,n+r.length)===r}});var Or={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xr=jt.forEach,kr=sloppyArrayMethod("forEach")?function forEach(t){return xr(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;for(var Cr in Or){var Pr=o[Cr],Ir=Pr&&Pr.prototype;if(Ir&&Ir.forEach!==kr)try{S(Ir,"forEach",kr)}catch(t){Ir.forEach=kr}}var Rr=wellKnownSymbol("iterator"),Lr=wellKnownSymbol("toStringTag"),Ar=ue.values;for(var jr in Or){var Dr=o[jr],Nr=Dr&&Dr.prototype;if(Nr){if(Nr[Rr]!==Ar)try{S(Nr,Rr,Ar)}catch(t){Nr[Rr]=Ar}if(Nr[Lr]||S(Nr,Lr,jr),Or[jr])for(var Fr in ue)if(Nr[Fr]!==ue[Fr])try{S(Nr,Fr,ue[Fr])}catch(t){Nr[Fr]=ue[Fr]}}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(n,!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}function _construct(t,e,n){return(_construct=function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function _construct(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _slicedToArray(t,e){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}createCommonjsModule((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function wrap(t,e,n,r){var i=e&&e.prototype instanceof Generator?e:Generator,o=Object.create(i.prototype),a=new Context(r||[]);return o._invoke=function makeInvokeMethod(t,e,n){var r=u;return function invoke(i,o){if(r===c)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return doneResult()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=maybeInvokeDelegate(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=c;var d=tryCatch(t,e,n);if("normal"===d.type){if(r=n.done?h:l,d.arg===f)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(r=h,n.method="throw",n.arg=d.arg)}}}(t,n,a),o}function tryCatch(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u="suspendedStart",l="suspendedYield",c="executing",h="completed",f={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var d={};d[o]=function(){return this};var p=Object.getPrototypeOf,y=p&&p(p(values([])));y&&y!==n&&r.call(y,o)&&(d=y);var m=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(d);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function AsyncIterator(t){var e;this._invoke=function enqueue(n,i){function callInvokeWithMethodAndArg(){return new Promise((function(e,o){!function invoke(e,n,i,o){var a=tryCatch(t[e],t,n);if("throw"!==a.type){var s=a.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(t){invoke("next",t,i,o)}),(function(t){invoke("throw",t,i,o)})):Promise.resolve(u).then((function(t){s.value=t,i(s)}),(function(t){return invoke("throw",t,i,o)}))}o(a.arg)}(n,i,e,o)}))}return e=e?e.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,maybeInvokeDelegate(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=tryCatch(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function next(){for(;++i<t.length;)if(r.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=e,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:e,done:!0}}return GeneratorFunction.prototype=m.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[s]=GeneratorFunction.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[a]=function(){return this},t.AsyncIterator=AsyncIterator,t.async=function(e,n,r,i){var o=new AsyncIterator(wrap(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},defineIteratorMethods(m),m[s]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function next(){for(;e.length;){var n=e.pop();if(n in t)return next.value=n,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function handle(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:values(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));var Ur="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function clear$1(t){for(var e in t)delete t[e]}var Vr="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function clamp(t,e,n){return Math.min(Math.max(t,e),n)}var zr="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function squaredSegmentDistance(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return squaredDistance(t,e,n,r)}function squaredDistance(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function toRadians(t){return t*Math.PI/180}function modulo(t,e){var n=t%e;return n*e<0?n+e:n}function lerp(t,e,n){return t+n*(e-t)}var Gr="Point",qr="LinearRing",Wr="Polygon",Kr="Circle",Br=6371008.8;
/**
	 * @license
	 * Latitude/longitude spherical geodesy formulae taken from
	 * http://www.movable-type.co.uk/scripts/latlong.html
	 * Licensed under CC-BY-3.0.
	 */function getDistance(t,e,n){var r=n||Br,i=toRadians(t[1]),o=toRadians(e[1]),a=(o-i)/2,s=toRadians(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function abstract(){return function(){throw new Error("Unimplemented abstract method.")}()}var Yr=0;function getUid(t){return t.ol_uid||(t.ol_uid=String(++Yr))}var Zr,Hr="6.1.1",Xr=(Zr=function(t,e){return(Zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function __(){this.constructor=t}Zr(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}),$r=function(t){function AssertionError(e){var n=this,r="Assertion failed. See https://openlayers.org/en/"+("v"+Hr.split("-")[0])+"/doc/errors/#"+e+" for details.";return(n=t.call(this,r)||this).code=e,n.name="AssertionError",n.message=r,n}return Xr(AssertionError,t),AssertionError}(Error);function assert(t,e){if(!t)throw new $r(e)}var Qr={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Jr={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(t){for(var e=createEmpty(),n=0,r=t.length;n<r;++n)extendCoordinate(e,t[n]);return e}function buffer(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function closestSquaredDistanceXY(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function containsCoordinate(t,e){return containsXY(t,e[0],e[1])}function containsExtent(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function containsXY(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function coordinateRelationship(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=Jr.UNKNOWN;return a<n?u|=Jr.LEFT:a>i&&(u|=Jr.RIGHT),s<r?u|=Jr.BELOW:s>o&&(u|=Jr.ABOVE),u===Jr.UNKNOWN&&(u=Jr.INTERSECTING),u}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function createOrUpdateEmpty(t){return createOrUpdate(1/0,1/0,-1/0,-1/0,t)}function createOrUpdateFromCoordinates(t,e){return function extendCoordinates(t,e){for(var n=0,r=e.length;n<r;++n)extendCoordinate(t,e[n]);return t}(createOrUpdateEmpty(e),t)}function equals(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function extendCoordinate(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function extendFlatCoordinates(t,e,n,r,i){for(;n<r;n+=i)extendXY(t,e[n],e[n+1]);return t}function extendXY(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function getArea(t){var e=0;return isEmpty(t)||(e=getWidth(t)*getHeight(t)),e}function getBottomLeft(t){return[t[0],t[1]]}function getBottomRight(t){return[t[2],t[1]]}function getCenter(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function getCorner(t,e){var n;return e===Qr.BOTTOM_LEFT?n=getBottomLeft(t):e===Qr.BOTTOM_RIGHT?n=getBottomRight(t):e===Qr.TOP_LEFT?n=getTopLeft(t):e===Qr.TOP_RIGHT?n=getTopRight(t):assert(!1,13),n}function getForViewAndSize(t,e,n,r,i){var o=e*r[0]/2,a=e*r[1]/2,s=Math.cos(n),u=Math.sin(n),l=o*s,c=o*u,h=a*s,f=a*u,d=t[0],p=t[1],y=d-l+f,m=d-l-f,g=d+l-f,v=d+l+f,_=p-c-h,b=p-c+h,w=p+c+h,T=p+c-h;return createOrUpdate(Math.min(y,m,g,v),Math.min(_,b,w,T),Math.max(y,m,g,v),Math.max(_,b,w,T),i)}function getHeight(t){return t[3]-t[1]}function getIntersection(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return intersects(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):createOrUpdateEmpty(r),r}function getTopLeft(t){return[t[0],t[3]]}function getTopRight(t){return[t[2],t[3]]}function getWidth(t){return t[2]-t[0]}function intersects(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function isEmpty(t){return t[2]<t[0]||t[3]<t[1]}function applyTransform(t,e,n){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(r,r,2),function _boundingExtentXYs(t,e,n){return createOrUpdate(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}([r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]],n)}var ti={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ei={};ei[ti.DEGREES]=2*Math.PI*6370997/360,ei[ti.FEET]=.3048,ei[ti.METERS]=1,ei[ti.USFEET]=1200/3937;var ni=function(){function Projection(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return Projection.prototype.canWrapX=function(){return this.canWrapX_},Projection.prototype.getCode=function(){return this.code_},Projection.prototype.getExtent=function(){return this.extent_},Projection.prototype.getUnits=function(){return this.units_},Projection.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ei[this.units_]},Projection.prototype.getWorldExtent=function(){return this.worldExtent_},Projection.prototype.getAxisOrientation=function(){return this.axisOrientation_},Projection.prototype.isGlobal=function(){return this.global_},Projection.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Projection.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Projection.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Projection.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Projection.prototype.setWorldExtent=function(t){this.worldExtent_=t},Projection.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Projection.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},Projection}(),ri=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ii=6378137,oi=Math.PI*ii,ai=[-oi,-oi,oi,oi],si=[-180,-85,180,85],ui=function(t){function EPSG3857Projection(e){return t.call(this,{code:e,units:ti.METERS,extent:ai,global:!0,worldExtent:si,getPointResolution:function(t,e){return t/zr(e[1]/ii)}})||this}return ri(EPSG3857Projection,t),EPSG3857Projection}(ni),li=[new ui("EPSG:3857"),new ui("EPSG:102100"),new ui("EPSG:102113"),new ui("EPSG:900913"),new ui("urn:ogc:def:crs:EPSG:6.18:3:3857"),new ui("urn:ogc:def:crs:EPSG::3857"),new ui("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=oi,s=0;s<r;s+=i){o[s]=a*t[s]/180;var u=ii*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o}function toEPSG4326(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i)o[a]=180*t[a]/oi,o[a+1]=360*Math.atan(Math.exp(t[a+1]/ii))/Math.PI-90;return o}var ci=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),hi=[-180,-90,180,90],fi=6378137*Math.PI/180,di=function(t){function EPSG4326Projection(e,n){return t.call(this,{code:e,units:ti.DEGREES,extent:hi,axisOrientation:n,global:!0,metersPerUnit:fi,worldExtent:hi})||this}return ci(EPSG4326Projection,t),EPSG4326Projection}(ni),pi=[new di("CRS:84"),new di("EPSG:4326","neu"),new di("urn:ogc:def:crs:EPSG::4326","neu"),new di("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new di("urn:ogc:def:crs:OGC:1.3:CRS84"),new di("urn:ogc:def:crs:OGC:2:84"),new di("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new di("urn:x-ogc:def:crs:EPSG:4326","neu")],yi={};function add(t,e,n){var r=t.getCode(),i=e.getCode();r in yi||(yi[r]={}),yi[r][i]=n}function get$2(t,e){var n;return t in yi&&e in yi[t]&&(n=yi[t][e]),n}var mi={};function cloneTransform(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function identityTransform(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function addProjection(t){!function add$1(t,e){mi[t]=e}(t.getCode(),t),add(t,t,cloneTransform)}function get$4(t){return"string"==typeof t?function get$3(t){return mi[t]||null}(t):t||null}function getPointResolution(t,e,n,r){var i,o=(t=get$4(t)).getPointResolutionFunc();if(o)i=o(e,n),r&&r!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/ei[r]);else if(t.getUnits()==ti.DEGREES&&!r||r==ti.DEGREES)i=e;else{var a,s=getTransformFromProjections(t,get$4("EPSG:4326")),u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(getDistance((u=s(u,u,2)).slice(0,2),u.slice(2,4))+getDistance(u.slice(4,6),u.slice(6,8)))/2,void 0!==(a=r?ei[r]:t.getMetersPerUnit())&&(i/=a)}return i}function addEquivalentProjections(t){!function addProjections(t){t.forEach(addProjection)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&add(e,t,cloneTransform)}))}))}function createProjection(t,e){return t?"string"==typeof t?get$4(t):t:get$4(e)}function createTransformFromCoordinateTransform(t){return function(e,n,r){for(var i=e.length,o=void 0!==r?r:2,a=void 0!==n?n:new Array(i),s=0;s<i;s+=o){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var l=o-1;l>=2;--l)a[s+l]=e[s+l]}return a}}function equivalent(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?n:getTransformFromProjections(t,e)===cloneTransform&&n}function getTransformFromProjections(t,e){var n=get$2(t.getCode(),e.getCode());return n||(n=identityTransform),n}function getTransform(t,e){return getTransformFromProjections(get$4(t),get$4(e))}function transform(t,e,n){return getTransform(e,n)(t,void 0,t.length)}function transformExtent(t,e,n){return applyTransform(t,getTransform(e,n))}var gi=null;function getUserProjection(){return gi}function toUserCoordinate(t,e){return gi?transform(t,e,gi):t}function fromUserCoordinate(t,e){return gi?transform(t,gi,e):t}function fromUserExtent(t,e){return gi?transformExtent(t,gi,e):t}function register(t){var e,n,r,i,o,a,s,u,l=Object.keys(t.defs),c=l.length;for(e=0;e<c;++e){var h=l[e];if(!get$4(h)){var f=t.defs(h);addProjection(new ni({code:h,axisOrientation:f.axis,metersPerUnit:f.to_meter,units:f.units}))}}for(e=0;e<c;++e){var d=l[e],p=get$4(d);for(n=0;n<c;++n){var y=l[n],m=get$4(y);if(!get$2(d,y))if(t.defs[d]===t.defs[y])addEquivalentProjections([p,m]);else{var g=t(d,y);r=p,i=m,o=g.forward,a=g.inverse,s=void 0,u=void 0,s=get$4(r),u=get$4(i),add(s,u,createTransformFromCoordinateTransform(o)),add(u,s,createTransformFromCoordinateTransform(a))}}}}!function addCommon(){addEquivalentProjections(li),addEquivalentProjections(pi),function addEquivalentTransforms(t,e,n,r){t.forEach((function(t){e.forEach((function(e){add(t,e,n),add(e,t,r)}))}))}(pi,li,fromEPSG4326,toEPSG4326)}();var vi=createCommonjsModule((function(t,e){t.exports=function(){function t(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(mt,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(mt,"")===i)return t[n]}function s(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=gt}function i(t){return new s(t).output()}function a(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return h(e,t),t}),r);e&&(t[e]=i)}function h(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void h(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&h(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&h(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void a(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return h(t,e[n]);return a(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}function n(t){return t*Et}function r(t){function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var r=t.GEOGCS;"GEOGCS"===t.type&&(r=t),r&&(r.DATUM?t.datumCode=r.DATUM.name.toLowerCase():t.datumCode=r.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(t.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=r.DATUM.SPHEROID.a,t.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(t.datum_params=r.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",n],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",n],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",n],["lat0","latitude_of_origin",n],["lat0","standard_parallel_1",n],["lat1","standard_parallel_1",n],["lat2","standard_parallel_2",n],["azimuth","Azimuth"],["alpha","azimuth",n],["srsCode","name"]].forEach((function(n){return function e(t,n){var r=n[0],i=n[1];!(r in t)&&i in t&&(t[r]=t[i],3===n.length&&(t[r]=n[2](t[r])))}(t,n)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=n(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function o(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?o[t]=yt(arguments[1]):o[t]=Ct(arguments[1]):o[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?o.apply(e,t):o(t)}));if("string"==typeof t){if(t in o)return o[t]}else"EPSG"in t?o["EPSG:"+t.EPSG]=t:"ESRI"in t?o["ESRI:"+t.ESRI]=t:"IAU2000"in t?o["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function u(e){var n=t(e,"authority");if(n){var r=t(n,"epsg");return r&&xt.indexOf(r)>-1}}function f(e){var n=t(e,"extension");if(n)return t(n,"proj4")}function p(t){if(!function l(t){return"string"==typeof t}(t))return t;if(function M(t){return t in o}(t))return o[t];if(function c(t){return Mt.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Ct(t);if(u(e))return o["EPSG:3857"];var n=f(e);return n?yt(n):e}return function m(t){return"+"===t[0]}(t)?yt(t):void 0}function d(t){return t}function y(t,e){var n=Lt.length;return t.names?(Lt[n]=t,t.names.forEach((function(t){Rt[t.toLowerCase()]=n})),this):(console.log(e),!0)}function Projection(n,r){if(!(this instanceof Projection))return new Projection(n);r=r||function(t){if(t)throw t};var i=p(n);if("object"==typeof i){var o=Projection.projections.get(i.projName);if(o){if(i.datumCode&&"none"!==i.datumCode){var a=t(Vt,i.datumCode);a&&(i.datum_params=a.towgs84?a.towgs84.split(","):null,i.ellps=a.ellipse,i.datumName=a.datumName?a.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var s=function x(e,n,r,i,o){if(!e){var a=t(jt,i);a||(a=Dt),e=a.a,n=a.b,r=a.rf}return r&&!n&&(n=(1-1/r)*e),(0===r||Math.abs(e-n)<st)&&(o=!0,n=e),{a:e,b:n,rf:r,sphere:o}}(i.a,i.b,i.rf,i.ellps,i.sphere),u=function _(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(it+a*(ot+a*at)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(s.a,s.b,s.rf,i.R_A),l=i.datum||function v(t,n,r,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?et:tt,n&&(s.datum_params=n.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=e),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=$,s.datum_params[3]*=nt,s.datum_params[4]*=nt,s.datum_params[5]*=nt,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=r,s.b=i,s.es=o,s.ep2=a,s}(i.datumCode,i.datum_params,s.a,s.b,u.es,u.ep2);Nt(this,i),Nt(this,o),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=u.es,this.e=u.e,this.ep2=u.ep2,this.datum=l,this.init(),r(null,this)}else r(n)}else r(n)}function E(t){return t===e||t===$}function P(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function S(t,n,r){var i;return Array.isArray(r)&&(r=Ft(r)),Qt(r),t.datum&&n.datum&&function N(t,n){return(t.datum.datum_type===e||t.datum.datum_type===$)&&"WGS84"!==n.datumCode||(n.datum.datum_type===e||n.datum.datum_type===$)&&"WGS84"!==t.datumCode}(t,n)&&(r=S(t,i=new Projection("WGS84"),r),t=i),"enu"!==t.axis&&(r=Ut(t,!1,r)),"longlat"===t.projName?r={x:r.x*ut,y:r.y*ut}:(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter}),r=t.inverse(r)),t.from_greenwich&&(r.x+=t.from_greenwich),r=Bt(t.datum,n.datum,r),n.from_greenwich&&(r={x:r.x-n.from_greenwich,y:r.y}),"longlat"===n.projName?r={x:r.x*lt,y:r.y*lt}:(r=n.forward(r),n.to_meter&&(r={x:r.x/n.to_meter,y:r.y/n.to_meter})),"enu"!==n.axis?Ut(n,!0,r):r}function k(t,e,n){var r,i,o;return Array.isArray(n)?(r=S(t,e,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):(i=S(t,e,n),2===(o=Object.keys(n)).length?i:(o.forEach((function(t){"x"!==t&&"y"!==t&&(i[t]=n[t])})),i))}function q(t){return t instanceof Projection?t:t.oProj?t.oProj:Projection(t)}function I(t,e,n){t=q(t);var r,i=!1;return void 0===e?(e=t,t=zt,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=zt,i=!0),e=q(e),n?k(t,e,n):(r={forward:function(n){return k(t,e,n)},inverse:function(n){return k(e,t,n)}},i&&(r.oProj=e),r)}function O(t,e){return e=e||5,function D(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function B(t,e,n){var r=U(n);return function F(t,e,n){var r=n-1,i=Wt.charCodeAt(r),o=Kt.charCodeAt(r),a=i+t-1,s=o+e,u=!1;return a>$t&&(a=a-$t+Yt-1,u=!0),(a===Zt||i<Zt&&a>Zt||(a>Zt||i<Zt)&&u)&&a++,(a===Ht||i<Ht&&a>Ht||(a>Ht||i<Ht)&&u)&&++a===Zt&&a++,a>$t&&(a=a-$t+Yt-1),s>Xt?(s=s-Xt+Yt-1,u=!0):u=!1,(s===Zt||o<Zt&&s>Zt||(s>Zt||o<Zt)&&u)&&s++,(s===Ht||o<Ht&&s>Ht||(s>Ht||o<Ht)&&u)&&++s===Zt&&s++,s>Xt&&(s=s-Xt+Yt-1),String.fromCharCode(a)+String.fromCharCode(s)}(Math.floor(t/1e5),Math.floor(e/1e5)%20,r)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}(function j(t){var e,n,r,i,o,a,s=t.lat,u=t.lon,l=6378137,c=G(s),h=G(u);a=Math.floor((u+180)/6)+1,180===u&&(a=60),s>=56&&s<64&&u>=3&&u<12&&(a=32),s>=72&&s<84&&(u>=0&&u<9?a=31:u>=9&&u<21?a=33:u>=21&&u<33?a=35:u>=33&&u<42&&(a=37)),o=G(6*(a-1)-180+3),e=l/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),n=Math.tan(c)*Math.tan(c),r=.006739496752268451*Math.cos(c)*Math.cos(c);var f=.9996*e*((i=Math.cos(c)*(h-o))+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,d=.9996*(l*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c))+e*Math.tan(c)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));return s<0&&(d+=1e7),{northing:Math.round(d),easting:Math.round(f),zoneNumber:a,zoneLetter:z(s)}}({lat:t[1],lon:t[0]}),e)}function R(t){var e=L(Q(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function G(t){return t*(Math.PI/180)}function T(t){return t/Math.PI*180}function L(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,d=6378137,p=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=n-5e5,m=e;r<"N"&&(m-=1e7),c=6*(i-1)-180+3,f=(h=m/.9996/6367449.145945056)+(3*p/2-27*p*p*p/32)*Math.sin(2*h)+(21*p*p/16-55*p*p*p*p/32)*Math.sin(4*h)+151*p*p*p/96*Math.sin(6*h),o=d/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*d/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=y/(.9996*o);var g=f-o*Math.tan(f)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);g=T(g);var v,_=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(f);if(_=c+T(_),t.accuracy){var b=L({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:g,left:_}}else v={lat:g,lon:_};return v}function z(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function U(t){var e=t%Gt;return 0===e&&(e=Gt),e}function Q(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=U(a),l=function W(t,e){for(var n=Wt.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(++n===Zt&&n++,n===Ht&&n++,n>$t){if(i)throw"Bad character: "+t;n=Yt,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function H(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=Kt.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(++n===Zt&&n++,n===Ht&&n++,n>Xt){if(i)throw"Bad character: "+t;n=Yt,i=!0}r+=1e5}return r}(r.charAt(1),u);c<K(s);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,p,y=h/2,m=0,g=0;return y>0&&(f=1e5/Math.pow(10,y),d=t.substring(o,o+y),m=parseFloat(d)*f,p=t.substring(o+y),g=parseFloat(p)*f),{easting:m+l,northing:g+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function K(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Point(t,e,n){if(!(this instanceof Point))return new Point(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function V(t,e,n,r){var i;return t<st?(r.value=Fe.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=ct?r.value=Fe.AREA_0:i>ct&&i<=rt+ct?(r.value=Fe.AREA_1,i-=rt):i>rt+ct||i<=-(rt+ct)?(r.value=Fe.AREA_2,i=i>=0?i-ft:i+ft):(r.value=Fe.AREA_3,i+=rt)),i}function Z(t,e){var n=t+e;return n<-ft?n+=ht:n>+ft&&(n-=ht),n}var e=1,$=2,tt=4,et=5,nt=484813681109536e-20,rt=Math.PI/2,it=.16666666666666666,ot=.04722222222222222,at=.022156084656084655,st=1e-10,ut=.017453292519943295,lt=57.29577951308232,ct=Math.PI/4,ht=2*Math.PI,ft=3.14159265359,dt={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},pt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},mt=/[\s_\-\/\(\)]/g,yt=function(e){var n,r,i,o={},a=e.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*ut},lat_1:function(t){o.lat1=t*ut},lat_2:function(t){o.lat2=t*ut},lat_ts:function(t){o.lat_ts=t*ut},lon_0:function(t){o.long0=t*ut},lon_1:function(t){o.long1=t*ut},lon_2:function(t){o.long2=t*ut},alpha:function(t){o.alpha=parseFloat(t)*ut},lonc:function(t){o.longc=t*ut},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(e){o.units=e;var n=t(pt,e);n&&(o.to_meter=n.to_meter)},from_greenwich:function(t){o.from_greenwich=t*ut},pm:function(e){var n=t(dt,e);o.from_greenwich=(n||parseFloat(e))*ut},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)}};for(n in a)r=a[n],n in s?"function"==typeof(i=s[n])?i(r):o[i]=r:o[n]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},gt=1,vt=/\s/,_t=/[A-Za-z]/,bt=/[A-Za-z84]/,wt=/[,\]]/,Tt=/[\d\.E\-\+]/;s.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;vt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case gt:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},s.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(wt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},s.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=gt)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=gt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},s.prototype.number=function(t){if(!Tt.test(t)){if(wt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},s.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},s.prototype.keyword=function(t){if(bt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=gt)}if(!wt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},s.prototype.neutral=function(t){if(_t.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Tt.test(t))return this.word=t,void(this.state=3);if(!wt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},s.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Et=.017453292519943295,Ct=function(t){var e=i(t),n=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",n]);var a={};return h(e,a),r(a),a};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(o);var Mt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],xt=["3857","900913","3785","102113"],Nt=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},St=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},kt=function(t){return t<0?-1:1},qt=function(t){return Math.abs(t)<=ft?t:t-kt(t)*ht},It=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(rt-e))/r},Ot=function(t,e){for(var n,r,i=.5*t,o=rt-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=rt-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999},Pt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=St(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*lt>90&&i*lt<-90&&r*lt>180&&r*lt<-180)return null;if(Math.abs(Math.abs(i)-rt)<=st)return null;if(this.sphere)e=this.x0+this.a*this.k0*qt(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(ct+.5*i));else{var o=Math.sin(i),a=It(this.e,i,o);e=this.x0+this.a*this.k0*qt(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=rt-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=Ot(this.e,o)))return null}return e=qt(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:d,inverse:d,names:["longlat","identity"]}],Rt={},Lt=[],At={start:function(){Pt.forEach(y)},add:y,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Rt[e]&&Lt[Rt[e]]?Lt[Rt[e]]:void 0}},jt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Dt=jt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};jt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Vt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};Projection.projections=At,Projection.projections.start();var Bt=function(t,n,r){return function g(t,n){return t.datum_type===n.datum_type&&!(t.a!==n.a||Math.abs(t.es-n.es)>5e-11)&&(t.datum_type===e?t.datum_params[0]===n.datum_params[0]&&t.datum_params[1]===n.datum_params[1]&&t.datum_params[2]===n.datum_params[2]:t.datum_type!==$||t.datum_params[0]===n.datum_params[0]&&t.datum_params[1]===n.datum_params[1]&&t.datum_params[2]===n.datum_params[2]&&t.datum_params[3]===n.datum_params[3]&&t.datum_params[4]===n.datum_params[4]&&t.datum_params[5]===n.datum_params[5]&&t.datum_params[6]===n.datum_params[6])}(t,n)?r:t.datum_type===et||n.datum_type===et?r:t.es!==n.es||t.a!==n.a||E(t.datum_type)||E(n.datum_type)?(r=function b(t,e,n){var r,i,o,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-rt&&u>-1.001*rt)u=-rt;else if(u>rt&&u<1.001*rt)u=rt;else{if(u<-rt)return{x:-1/0,y:-1/0,z:t.z};if(u>rt)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(r+l)*a*Math.sin(s),z:(r*(1-e)+l)*i}}(r,t.es,t.a),E(t.datum_type)&&(r=function A(t,n,r){if(n===e)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(n===$){var i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6];return{x:c*(t.x-l*t.y+u*t.z)+i,y:c*(l*t.x+t.y-s*t.z)+o,z:c*(-u*t.x+s*t.y+t.z)+a}}}(r,t.datum_type,t.datum_params)),E(n.datum_type)&&(r=function C(t,n,r){if(n===e)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(n===$){var i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=(t.x-i)/c,f=(t.y-o)/c,d=(t.z-a)/c;return{x:h+l*f-u*d,y:-l*h+f+s*d,z:u*h-s*f+d}}}(r,n.datum_type,n.datum_params)),function w(t,e,n,r){var i,o,a,s,u,l,c,h,f,d,p,y,m,g,v,_=t.x,b=t.y,w=t.z?t.z:0;if(i=Math.sqrt(_*_+b*b),o=Math.sqrt(_*_+b*b+w*w),i/n<1e-12){if(g=0,o/n<1e-12)return v=-r,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(b,_);a=w/o,h=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*u,m=0;do{m++,l=e*(c=n/Math.sqrt(1-e*f*f))/(c+(v=i*h+w*f-c*(1-e*f*f))),y=(p=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*h-(d=s*(1-l)*u)*f,h=d,f=p}while(y*y>1e-24&&m<30);return{x:g,y:Math.atan(p/Math.abs(d)),z:v}}(r,n.es,n.a,n.b)):r},Ut=function(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i="x"):1===o?(r=s,i="y"):(r=u,i="z"),t.axis[o]){case"e":l[i]=r;break;case"w":l[i]=-r;break;case"n":l[i]=r;break;case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l},Ft=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},Qt=function(t){P(t.x),P(t.y)},zt=Projection("WGS84"),Gt=6,Wt="AJSAJS",Kt="AFAFAF",Yt=65,Zt=73,Ht=79,Xt=86,$t=90,Jt={forward:O,inverse:function(t){var e=L(Q(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:R};Point.fromMGRS=function(t){return new Point(R(t))},Point.prototype.toMGRS=function(t){return O([this.x,this.y],t)};var te=.01068115234375,is=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*te))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*te)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},as=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},hs=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(as(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<st)return i}return i},ee={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=is(this.es),this.ml0=as(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=qt(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),d=Math.abs(u)>st?Math.tan(o):0,p=Math.pow(d,2),y=Math.pow(p,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var m=as(o,s,u,this.en);n=this.a*(this.k0*l*(1+c/6*(1-p+h+c/20*(5-18*p+y+14*h-58*p*h+c/42*(61+179*y-y*p-479*p)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*l/2*(1+c/12*(5-p+9*h+4*f+c/30*(61+y-58*p+270*h-330*p*h+c/56*(1385+543*y-y*p-3111*p))))))+this.y0}else{var g=u*Math.sin(a);if(Math.abs(Math.abs(g)-1)<st)return 93;if(n=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,r=u*Math.cos(a)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(r))>=1){if(g-1>st)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=hs(e,this.es,this.en),Math.abs(n)<rt){var s=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>st?Math.tan(n):0,c=this.ep2*Math.pow(u,2),h=Math.pow(c,2),f=Math.pow(l,2),d=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var p=o*Math.sqrt(e)/this.k0,y=Math.pow(p,2);r=n-(e*=l)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*c*f+c-4*h-y/30*(61+90*f-252*c*f+45*d+46*c-y/56*(1385+3633*f+4095*d+1574*d*f)))),i=qt(this.long0+p*(1-y/6*(1+2*f+c-y/20*(5+28*f+24*d+8*c*f+6*c-y/42*(61+662*f+1320*d+720*d*f))))/u)}else r=rt*kt(a),i=0;else{var m=Math.exp(o/this.k0),g=.5*(m-1/m),v=this.lat0+a/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(g,2))),r=Math.asin(e),a<0&&(r=-r),i=0===g&&0===_?0:qt(Math.atan2(g,_)+this.long0)}return t.x=i,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},ns=function(t){var e=Math.exp(t);return(e-1/e)/2},rs=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},ls=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(rs(1,e)+1))),t<0?-e:e},Ms=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},fs=function(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=ns(n),u=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],d=0,p=0,y=0;--h>=0;)r=p,i=d,f=l*(p=f)-r-c*(d=y)+t[h],y=c*p-i+l*d;return[(l=o*u)*f-(c=a*s)*y,l*y+c*f]},ne={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=Ms(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=qt(t.x-this.long0),n=t.y;n=Ms(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,rs(r,i*a)),e=ls(Math.tan(e));var s,u,l=fs(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=fs(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(ns(r));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(a*l,rs(u,l*s)),r=Math.atan2(u,l*s),e=qt(r+this.long0),n=Ms(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},re={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(qt(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*ut,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ne.init.apply(this),this.forward=ne.forward,this.inverse=ne.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},ys=function(t,e){return Math.pow((1-t)/(1+t),e)},ie={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ct)/(Math.pow(Math.tan(.5*this.lat0+ct),this.C)*ys(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ct),this.C)*ys(this.e*Math.sin(n),this.ratexp))-rt,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+ct)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*ys(this.e*Math.sin(t.y),-.5*this.e))-rt,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]},oe={init:function(){ie.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=qt(t.x-this.long0),ie.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,ie.inverse.apply(this,[t]),t.x=qt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},ae={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=st&&(this.k0=.5*(1+kt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=st&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=st&&(this.k0=.5*this.cons*St(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/It(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=St(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-rt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),h=qt(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=st&&Math.abs(u+this.lat0)<=st?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,l,this.e))-rt,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=st?(o=It(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<st?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=st?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=qt(Math.abs(this.coslat0)<st?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=st){if(a<=st)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*Ot(this.e,r),e=this.con*qt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=st?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=qt(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*Ot(this.e,Math.tan(.5*(rt+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(rt+t))*Math.pow((1-e)/(1+e),.5*n)}},se={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},ue={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=It(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=It(this.e,this.lat1,Math.sin(this.lat1)),u=It(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var l=Math.pow(s,this.bl),c=Math.pow(u,this.bl);i=.5*((r=this.el/l)-1/r);var h=(this.el*this.el-c*l)/(this.el*this.el+c*l),f=(c-l)/(c+l),d=qt(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=qt(this.long0);var p=qt(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=qt(i-this.long0);if(Math.abs(Math.abs(o)-rt)<=st)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(ct+r*this.gamma0*.5)),e=-1*r*rt*this.al/this.bl;else{var s=It(this.e,o,Math.sin(o)),u=this.el/Math.pow(s,this.bl),l=.5*(u-1/u),c=.5*(u+1/u),h=Math.sin(this.bl*a),f=(l*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(f)-1)<=st?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=st?this.al*this.bl*a:this.al*Math.atan2(l*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,u=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<st?(t.x=this.long0,t.y=rt):Math.abs(s+1)<st?(t.x=this.long0,t.y=-1*rt):(t.y=Ot(this.e,u),t.x=qt(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},le={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<st)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=St(this.e,e,n),i=It(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=St(this.e,o,a),u=It(this.e,this.lat2,o),l=It(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>st?this.ns=Math.log(r/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=st&&(n=kt(n)*(rt-2*st));var r,i,o=Math.abs(Math.abs(n)-rt);if(o>st)r=It(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*qt(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=Ot(this.e,r)))return null}else i=-rt;return o=qt(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},ce={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y,c=qt(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},Es=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},Ps=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Ns=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Ss=function(t){return.05859375*t*t*(1+.75*t)},ks=function(t){return t*t*t*(35/3072)},qs=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},Is=function(t){return Math.abs(t)<rt?t:t-kt(t)*Math.PI},Os=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN},he={init:function(){this.sphere||(this.e0=Ps(this.es),this.e1=Ns(this.es),this.e2=Ss(this.es),this.e3=ks(this.es),this.ml0=this.a*Es(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=qt(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=qs(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),n=this.a*Es(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=Os(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-rt)<=st)return t.x=this.long0,t.y=rt,i<0&&(t.y*=-1),t;var u=qs(this.a,this.e,Math.sin(s)),l=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),h=r*this.a/u,f=h*h;e=s-u*Math.tan(s)/l*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(s)}return t.x=qt(n+this.long0),t.y=Is(e),t},names:["Cassini","Cassini_Soldner","cass"]},Gs=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e},fe=.3333333333333333,de=.17222222222222222,pe=.10257936507936508,ye=.06388888888888888,me=.0664021164021164,ge=.016415012942191543,ve={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-rt)<st?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<st?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Gs(this.e,1),this.mmf=.5/(1-this.es),this.apa=function X(t){var e,n=[];return n[0]=t*fe,e=t*t,n[0]+=e*de,n[1]=e*ye,e*=t,n[0]+=e*pe,n[1]+=e*me,n[2]=e*ge,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Gs(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h=t.x,f=t.y;if(h=qt(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=st)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.phi0)<st)return null;n=ct-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,u=0,l=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=Gs(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*r;break;case this.EQUIT:l=1+u*r;break;case this.N_POLE:l=rt+f,a=this.qp-a;break;case this.S_POLE:l=f-rt,a=this.qp+a}if(Math.abs(l)<st)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*r):(l=Math.sqrt(2/(1+u*r)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,u=t.x/this.a,l=t.y/this.a;if(this.sphere){var c,h=0,f=0;if((n=.5*(c=Math.sqrt(u*u+l*l)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=st?0:Math.asin(l*f/c),u*=f,l=h*c;break;case this.OBLIQ:n=Math.abs(c)<=st?this.phi0:Math.asin(h*this.sinph0+l*f*this.cosph0/c),u*=f*this.cosph0,l=(h-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:l=-l,n=rt-n;break;case this.S_POLE:n-=rt}e=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,l):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,l*=this.dd,(a=Math.sqrt(u*u+l*l))<st)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),u*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+l*i*this.cosb1/a,o=this.qp*s,l=a*this.cosb1*r-l*this.sinb1*i):(s=l*i/a,o=this.qp*s,l=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(o=u*u+l*l))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(u,l),n=function J(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return t.x=qt(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Fs=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},_e={init:function(){Math.abs(this.lat1+this.lat2)<st||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=St(this.e3,this.sin_po,this.cos_po),this.qs1=Gs(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=St(this.e3,this.sin_po,this.cos_po),this.qs2=Gs(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Gs(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>st?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Gs(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*qt(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=qt(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=Fs(.5*e);if(t<st)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}},be={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=qt(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=st?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=Fs(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=qt(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},we={init:function(){this.sphere||(this.k0=St(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=qt(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Gs(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=qt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*rt:rt;for(var r,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=qt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},Te={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=qt(e-this.long0),i=Is(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=qt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Is(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Se={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ps(this.es),this.e1=Ns(this.es),this.e2=Ss(this.es),this.e3=ks(this.es),this.ml0=this.a*Es(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=qt(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=st?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(Is(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=st)e=this.a*a,n=-1*this.ml0;else{var s=qs(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*Es(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,u,l;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=st)e=qt(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=st){n=u;break}e=qt(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=st)n=0,e=qt(this.long0+r/this.a);else{var h,f,d,p,y;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(y=this.e*Math.sin(u),h=Math.sqrt(1-y*y)*Math.tan(u),f=this.a*Es(this.e0,this.e1,this.e2,this.e3,u),d=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(p=f/this.a)+1)-p-.5*h*(p*p+s))/(this.es*Math.sin(2*u)*(p*p+s-2*a*p)/(4*h)+(a-p)*(h*d-2/Math.sin(2*u))-d),Math.abs(l)<=st){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=qt(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},Ee={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/nt*1e-5,a=i,s=1,u=0;for(e=1;e<=10;e++)s*=o,u+=this.A[e]*s;var l,c=u,h=a,f=1,d=0,p=0,y=0;for(e=1;e<=6;e++)l=d*c+f*h,f=f*c-d*h,d=l,p=p+this.B_re[e]*f-this.B_im[e]*d,y=y+this.B_im[e]*f+this.B_re[e]*d;return t.x=y*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,l=0,c=0,h=0;for(e=1;e<=6;e++)n=l*a+u*s,u=u*a-l*s,l=n,c=c+this.C_re[e]*u-this.C_im[e]*l,h=h+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var d,p=c,y=h,m=a,g=s;for(e=2;e<=6;e++)d=y*c+p*h,p=p*c-y*h,y=d,m+=(e-1)*(this.B_re[e]*p-this.B_im[e]*y),g+=(e-1)*(this.B_im[e]*p+this.B_re[e]*y);p=1,y=0;var v=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)d=y*c+p*h,p=p*c-y*h,y=d,v+=e*(this.B_re[e]*p-this.B_im[e]*y),_+=e*(this.B_im[e]*p+this.B_re[e]*y);var b=v*v+_*_;c=(m*v+g*_)/b,h=(g*v-m*_)/b}var w=c,T=h,S=1,E=0;for(e=1;e<=9;e++)S*=w,E+=this.D[e]*S;var M=this.lat0+E*nt*1e5,O=this.long0+T;return t.x=O,t.y=M,t},names:["New_Zealand_Map_Grid","nzmg"]},Me={init:function(){},forward:function(t){var e=t.x,n=t.y,r=qt(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=qt(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},Oe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=is(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=qt(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<st)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*as(i,u,l,this.en),e=this.a*r*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=Fs((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Fs(Math.sin(e)/this.n)),r=qt(r+this.long0),e=Is(e)):(e=hs(t.y/this.a,this.es,this.en),(i=Math.abs(e))<rt?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=qt(n)):i-st<rt&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]},xe={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=qt(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<st)break}i/=2,Math.PI/2-Math.abs(n)<st&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=qt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]},ke={init:function(){Math.abs(this.lat1+this.lat2)<st||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ps(this.es),this.e1=Ns(this.es),this.e2=Ss(this.es),this.e3=ks(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=St(this.e,this.sinphi,this.cosphi),this.ml1=Es(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<st?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=St(this.e,this.sinphi,this.cosphi),this.ml2=Es(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Es(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Es(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*qt(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=qt(this.long0+o/this.ns),r=Is(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=Os(a,this.e0,this.e1,this.e2,this.e3),i=qt(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]},Ce={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=qt(r-this.long0);Math.abs(i)<=st&&(e=this.x0+this.R*o,n=this.y0);var a=Fs(2*Math.abs(i/Math.PI));(Math.abs(o)<=st||Math.abs(Math.abs(i)-rt)<=st)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),h=c/(l+c-1),f=h*h,d=h*(2/l-1),p=d*d,y=Math.PI*this.R*(s*(h-p)+Math.sqrt(u*(h-p)*(h-p)-(p+u)*(f-p)))/(p+u);o<0&&(y=-y),e=this.x0+y;var m=u+h;return y=Math.PI*this.R*(d*m-s*Math.sqrt((p+u)*(u+1)-m*m))/(p+u),n=i>=0?this.y0+y:this.y0-y,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(r)<st?this.long0:qt(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Pe={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,d,p,y,m,g,v,_,b,w,T,S=t.x,E=t.y,M=Math.sin(t.y),O=Math.cos(t.y),x=qt(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=st?(t.x=this.x0+this.a*(rt-E)*Math.sin(x),t.y=this.y0-this.a*(rt-E)*Math.cos(x),t):Math.abs(this.sin_p12+1)<=st?(t.x=this.x0+this.a*(rt+E)*Math.sin(x),t.y=this.y0+this.a*(rt+E)*Math.cos(x),t):(v=this.sin_p12*M+this.cos_p12*O*Math.cos(x),g=(m=Math.acos(v))/Math.sin(m),t.x=this.x0+this.a*g*O*Math.sin(x),t.y=this.y0+this.a*g*(this.cos_p12*M-this.sin_p12*O*Math.cos(x)),t):(e=Ps(this.es),n=Ns(this.es),r=Ss(this.es),i=ks(this.es),Math.abs(this.sin_p12-1)<=st?(o=this.a*Es(e,n,r,i,rt),a=this.a*Es(e,n,r,i,E),t.x=this.x0+(o-a)*Math.sin(x),t.y=this.y0-(o-a)*Math.cos(x),t):Math.abs(this.sin_p12+1)<=st?(o=this.a*Es(e,n,r,i,rt),a=this.a*Es(e,n,r,i,E),t.x=this.x0+(o+a)*Math.sin(x),t.y=this.y0+(o+a)*Math.cos(x),t):(s=M/O,u=qs(this.a,this.e,this.sin_p12),l=qs(this.a,this.e,M),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*O)),_=0===(h=Math.atan2(Math.sin(x),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(x)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=st?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(x)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),m=u*_*(1-(b=_*_)*(y=(d=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*d)*(1-y)/6+(w=b*_)/8*(p=f*d)*(1-2*y)+(T=w*_)/120*(y*(4-7*y)-3*f*f*(1-7*y))-T*_/48*p),t.x=this.x0+m*Math.sin(h),t.y=this.y0+m*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,d,p,y,m,g,v,_,b,w,T;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*rt*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=st?a=this.lat0:(a=Fs(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-rt,o=qt(Math.abs(s)<=st?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return u=Ps(this.es),l=Ns(this.es),c=Ss(this.es),h=ks(this.es),Math.abs(this.sin_p12-1)<=st?(f=this.a*Es(u,l,c,h,rt),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Os((f-e)/this.a,u,l,c,h),o=qt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=st?(f=this.a*Es(u,l,c,h,rt),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Os((e-f)/this.a,u,l,c,h),o=qt(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),d=qs(this.a,this.e,this.sin_p12),m=Math.cos(y),v=-(g=this.e*this.cos_p12*m)*g/(1-this.es),_=3*this.es*(1-v)*this.sin_p12*this.cos_p12*m/(1-this.es),T=1-v*(w=(b=e/d)-v*(1+v)*Math.pow(b,3)/6-_*(1+3*v)*Math.pow(b,4)/24)*w/2-b*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*m),o=qt(this.long0+Math.asin(Math.sin(y)*Math.sin(w)/Math.cos(p))),a=Math.atan((1-this.es*T*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]},Ie={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=qt(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=st)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Fs(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=st?(s=this.lat0,t.x=a,t.y=s,t):(s=Fs(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-rt,Math.abs(o)<=st?(a=qt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=qt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]},Re=1,Le=2,Ae=3,je=4,De=5,Ne=6,Fe={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Ue={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=rt-ct/2?this.face=De:this.lat0<=-(rt-ct/2)?this.face=Ne:Math.abs(this.long0)<=ct?this.face=Re:Math.abs(this.long0)<=rt+ct?this.face=this.long0>0?Le:je:this.face=Ae,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===De)i=rt-e,n>=ct&&n<=rt+ct?(u.value=Fe.AREA_0,r=n-rt):n>rt+ct||n<=-(rt+ct)?(u.value=Fe.AREA_1,r=n>0?n-ft:n+ft):n>-(rt+ct)&&n<=-ct?(u.value=Fe.AREA_2,r=n+rt):(u.value=Fe.AREA_3,r=n);else if(this.face===Ne)i=rt+e,n>=ct&&n<=rt+ct?(u.value=Fe.AREA_0,r=-n+rt):n<ct&&n>=-ct?(u.value=Fe.AREA_1,r=-n):n<-ct&&n>=-(rt+ct)?(u.value=Fe.AREA_2,r=-n-rt):(u.value=Fe.AREA_3,r=n>0?-n+ft:-n-ft);else{var l,c,h,f,d,p;this.face===Le?n=Z(n,+rt):this.face===Ae?n=Z(n,+ft):this.face===je&&(n=Z(n,-rt)),f=Math.sin(e),d=Math.cos(e),p=Math.sin(n),l=d*Math.cos(n),c=d*p,h=f,this.face===Re?r=V(i=Math.acos(l),h,c,u):this.face===Le?r=V(i=Math.acos(c),h,-l,u):this.face===Ae?r=V(i=Math.acos(-l),h,-c,u):this.face===je?r=V(i=Math.acos(-c),h,l,u):(i=r=0,u.value=Fe.AREA_0)}return a=Math.atan(12/ft*(r+Math.acos(Math.sin(r)*Math.cos(ct))-rt)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),u.value===Fe.AREA_1?a+=rt:u.value===Fe.AREA_2?a+=ft:u.value===Fe.AREA_3&&(a+=1.5*ft),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,d={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=Fe.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=Fe.AREA_1,e-=rt):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=Fe.AREA_2,e=e<0?e+ft:e-ft):(p.value=Fe.AREA_3,e+=rt),l=ft/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===De)u=Math.acos(s),d.phi=rt-u,p.value===Fe.AREA_0?d.lam=a+rt:p.value===Fe.AREA_1?d.lam=a<0?a+ft:a-ft:p.value===Fe.AREA_2?d.lam=a-rt:d.lam=a;else if(this.face===Ne)u=Math.acos(s),d.phi=u-rt,p.value===Fe.AREA_0?d.lam=-a+rt:p.value===Fe.AREA_1?d.lam=-a:p.value===Fe.AREA_2?d.lam=-a-rt:d.lam=a<0?-a-ft:-a+ft;else{var y,m,g;l=(y=s)*y,m=(l+=(g=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*g)>=1?0:Math.sqrt(1-l),p.value===Fe.AREA_1?(l=m,m=-g,g=l):p.value===Fe.AREA_2?(m=-m,g=-g):p.value===Fe.AREA_3&&(l=m,m=g,g=-l),this.face===Le?(l=y,y=-m,m=l):this.face===Ae?(y=-y,m=-m):this.face===je&&(l=y,y=m,m=-l),d.phi=Math.acos(-g)-rt,d.lam=Math.atan2(m,y),this.face===Le?d.lam=Z(d.lam,-rt):this.face===Ae?d.lam=Z(d.lam,-ft):this.face===je&&(d.lam=Z(d.lam,+rt))}return 0!==this.es&&(c=d.phi<0?1:0,h=Math.tan(d.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ve=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ze=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ge=lt/5,qe=1/Ge,di=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},We={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=qt(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*Ge);r<0?r=0:r>=18&&(r=17);var i={x:di(Ve[r],n=lt*(n-qe*r))*e,y:di(ze[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Ve[18][0],e.y=t.y<0?-rt:rt;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(ze[n][0]>e.y)--n;else{if(!(ze[n+1][0]<=e.y))break;++n}var r=ze[n],i=5*(e.y-r[0])/(ze[n+1][0]-r[0]);i=function Y(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(di(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,st,100),e.x/=di(Ve[n],i),e.y=(5*n+i)*ut,t.y<0&&(e.y=-e.y)}return e.x=qt(e.x+this.long0),e},names:["Robinson","robin"]};return I.defaultDatum="WGS84",I.Proj=Projection,I.WGS84=new I.Proj("WGS84"),I.Point=Point,I.toPoint=Ft,I.defs=o,I.transform=S,I.mgrs=Jt,I.version="2.5.0",function(t){t.Proj.projections.add(ee),t.Proj.projections.add(ne),t.Proj.projections.add(re),t.Proj.projections.add(oe),t.Proj.projections.add(ae),t.Proj.projections.add(se),t.Proj.projections.add(ue),t.Proj.projections.add(le),t.Proj.projections.add(ce),t.Proj.projections.add(he),t.Proj.projections.add(ve),t.Proj.projections.add(_e),t.Proj.projections.add(be),t.Proj.projections.add(we),t.Proj.projections.add(Te),t.Proj.projections.add(Se),t.Proj.projections.add(Ee),t.Proj.projections.add(Me),t.Proj.projections.add(Oe),t.Proj.projections.add(xe),t.Proj.projections.add(ke),t.Proj.projections.add(Ce),t.Proj.projections.add(Pe),t.Proj.projections.add(Ie),t.Proj.projections.add(Ue),t.Proj.projections.add(We)}(I),I}()})),_i=!checkCorrectnessOfIteration((function(t){Array.from(t)}));_export({target:"Array",stat:!0,forced:_i},{from:function from(t){var e,n,r,i,o,a=toObject(t),s="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,c=void 0!==l,h=0,f=getIteratorMethod(a);if(c&&(l=bindContext(l,u>2?arguments[2]:void 0,2)),null==f||s==Array&&isArrayIteratorMethod(f))for(n=new s(e=toLength(a.length));e>h;h++)createProperty(n,h,c?l(a[h],h):a[h]);else for(o=(i=f.call(a)).next,n=new s;!(r=o.call(i)).done;h++)createProperty(n,h,c?callWithSafeIterationClosing(i,l,[r.value,h],!0):r.value);return n.length=h,n}});var bi=RegExp.prototype,wi=bi.toString,Ti=fails((function(){return"/a/b"!=wi.call({source:"a",flags:"b"})})),Si="toString"!=wi.name;(Ti||Si)&&B(RegExp.prototype,"toString",(function toString(){var t=anObject(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in bi)?regexpFlags.call(t):n)}),{unsafe:!0}),fixRegexpWellKnownSymbolLogic("match",1,(function(t,e,n){return[function match(e){var n=requireObjectCoercible(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=anObject(t),o=String(this);if(!i.global)return regexpExecAbstract(i,o);var a=i.unicode;i.lastIndex=0;for(var s,u=[],l=0;null!==(s=regexpExecAbstract(i,o));){var c=String(s[0]);u[l]=c,""===c&&(i.lastIndex=advanceStringIndex(o,toLength(i.lastIndex),a)),l++}return 0===l?null:u}]}));var Ei=Ee.trim;_export({target:"String",proto:!0,forced:function(t){return fails((function(){return!!be[t]()||"​᠎"!="​᠎"[t]()||be[t].name!==t}))}("trim")},{trim:function trim(){return Ei(this)}});var Mi=createCommonjsModule((function(t){!function(t){var n,r=/^[a-z]+:/,i=/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i,o=/\/\/(.*?)(?::(.*?))?@/,a=/^win/i,s=/:$/,l=/^\?/,c=/^#/,f=/(.*\/)/,d=/^\/{2,}/,p=/'/g,y=/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,m=/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,g=/%([0-7][0-9a-f])/gi,v=/\+/g,_=/^\w:$/,b=/[^/#?]/,w="undefined"==typeof window&&void 0!==e&&!0,T=w?t.require:null,S={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},E={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};function x(){return w?(n||(n="file://"+(process.platform.match(a)?"/":"")+T("fs").realpathSync(".")),n):document.location.href}function u(t){return encodeURIComponent(t).replace(p,"%27")}function z(t){return(t=(t=(t=t.replace(v," ")).replace(y,(function(t,e,n,r){var i=parseInt(e,16)-224,o=parseInt(n,16)-128;if(0===i&&o<32)return t;var a=(i<<12)+(o<<6)+(parseInt(r,16)-128);return 65535<a?t:String.fromCharCode(a)}))).replace(m,(function(t,e,n){var r=parseInt(e,16)-192;if(r<2)return t;var i=parseInt(n,16)-128;return String.fromCharCode((r<<6)+i)}))).replace(g,(function(t,e){return String.fromCharCode(parseInt(e,16))}))}function F(t){for(var e=t.split("&"),n=0,r=e.length;n<r;n++){var i=e[n].split("="),o=decodeURIComponent(i[0].replace(v," "));if(o){var a=void 0!==i[1]?z(i[1]):null;void 0===this[o]?this[o]=a:(this[o]instanceof Array||(this[o]=[this[o]]),this[o].push(a))}}}function U(t,e){!function h(t,e,n){var a,u,h;e||(e=x()),w?a=T("url").parse(e):(a=document.createElement("a")).href=e;var p,y,m=(y={path:!0,query:!0,hash:!0},(p=e)&&r.test(p)&&(y.protocol=!0,y.host=!0,i.test(p)&&(y.port=!0),o.test(p)&&(y.user=!0,y.pass=!0)),y);for(u in h=e.match(o)||[],S)m[u]?t[u]=a[S[u]]||"":t[u]="";if(t.protocol=t.protocol.replace(s,""),t.query=t.query.replace(l,""),t.hash=z(t.hash.replace(c,"")),t.user=z(h[1]||""),t.pass=z(h[2]||""),t.port=E[t.protocol]==t.port||0==t.port?"":t.port,!m.protocol&&b.test(e.charAt(0))&&(t.path=e.split("?")[0].split("#")[0]),!m.protocol&&n){var g=new U(x().match(f)[0]),v=g.path.split("/"),_=t.path.split("/"),M=["protocol","user","pass","host","port"],O=M.length;for(v.pop(),u=0;u<O;u++)t[M[u]]=g[M[u]];for(;".."===_[0];)v.pop(),_.shift();t.path=("/"!==e.charAt(0)?v.join("/"):"")+"/"+_.join("/")}t.path=t.path.replace(d,"/"),t.paths(t.paths()),t.query=new F(t.query)}(this,t,!e)}F.prototype.toString=function(){var t,e,n="",r=u;for(t in this){var i=this[t];if(!(i instanceof Function||null===i))if(i instanceof Array){var o=i.length;if(o)for(e=0;e<o;e++){var a=i[e];n+=n?"&":"",n+=r(t)+(null==a?"":"="+r(a))}else n+=(n?"&":"")+r(t)+"="}else n+=n?"&":"",n+=r(t)+(void 0===i?"":"="+r(i))}return n},U.prototype.clearQuery=function(){for(var t in this.query)this.query[t]instanceof Function||delete this.query[t];return this},U.prototype.queryLength=function(){var t=0;for(var e in this.query)this.query[e]instanceof Function||t++;return t},U.prototype.isEmptyQuery=function(){return 0===this.queryLength()},U.prototype.paths=function(t){var e,n="",r=0;if(t&&t.length&&t+""!==t){for(this.isAbsolute()&&(n="/"),e=t.length;r<e;r++)t[r]=!r&&_.test(t[r])?t[r]:u(t[r]);this.path=n+t.join("/")}for(r=0,e=(t=("/"===this.path.charAt(0)?this.path.slice(1):this.path).split("/")).length;r<e;r++)t[r]=z(t[r]);return t},U.prototype.encode=u,U.prototype.decode=z,U.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},U.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&u(this.user)+(this.pass&&":"+u(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+u(this.hash))},t[t.exports?"exports":"Url"]=U}(t.exports?t:window)})),Oi=rt.f,xi={}.toString,ki="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ci={f:function getOwnPropertyNames(t){return ki&&"[object Window]"==xi.call(t)?function(t){try{return Oi(t)}catch(t){return ki.slice()}}(t):Oi(toIndexedObject(t))}},Pi={f:wellKnownSymbol},Ii=T.f,defineWellKnownSymbol=function(t){var e=Y.Symbol||(Y.Symbol={});has(e,t)||Ii(e,t,{value:Pi.f(t)})},Ri=jt.forEach,Li=sharedKey("hidden"),Ai=wellKnownSymbol("toPrimitive"),ji=K.set,Di=K.getterFor("Symbol"),Ni=Object.prototype,Fi=o.Symbol,Ui=o.JSON,Vi=Ui&&Ui.stringify,zi=b.f,Gi=T.f,qi=Ci.f,Wi=c.f,Ki=M("symbols"),Bi=M("op-symbols"),Yi=M("string-to-symbol-registry"),Zi=M("symbol-to-string-registry"),Hi=M("wks"),Xi=o.QObject,$i=!Xi||!Xi.prototype||!Xi.prototype.findChild,Qi=a&&fails((function(){return 7!=It(Gi({},"a",{get:function(){return Gi(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=zi(Ni,e);r&&delete Ni[e],Gi(t,e,n),r&&t!==Ni&&Gi(Ni,e,r)}:Gi,wrap=function(t,e){var n=Ki[t]=It(Fi.prototype);return ji(n,{type:"Symbol",tag:t,description:e}),a||(n.description=e),n},Ji=pt&&"symbol"==typeof Fi.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Fi},to=function defineProperty(t,e,n){t===Ni&&to(Bi,e,n),anObject(t);var r=toPrimitive(e,!0);return anObject(n),has(Ki,r)?(n.enumerable?(has(t,Li)&&t[Li][r]&&(t[Li][r]=!1),n=It(n,{enumerable:createPropertyDescriptor(0,!1)})):(has(t,Li)||Gi(t,Li,createPropertyDescriptor(1,{})),t[Li][r]=!0),Qi(t,r,n)):Gi(t,r,n)},eo=function defineProperties(t,e){anObject(t);var n=toIndexedObject(e),r=xt(n).concat(oo(n));return Ri(r,(function(e){a&&!no.call(n,e)||to(t,e,n[e])})),t},no=function propertyIsEnumerable(t){var e=toPrimitive(t,!0),n=Wi.call(this,e);return!(this===Ni&&has(Ki,e)&&!has(Bi,e))&&(!(n||!has(this,e)||!has(Ki,e)||has(this,Li)&&this[Li][e])||n)},ro=function getOwnPropertyDescriptor(t,e){var n=toIndexedObject(t),r=toPrimitive(e,!0);if(n!==Ni||!has(Ki,r)||has(Bi,r)){var i=zi(n,r);return!i||!has(Ki,r)||has(n,Li)&&n[Li][r]||(i.enumerable=!0),i}},io=function getOwnPropertyNames(t){var e=qi(toIndexedObject(t)),n=[];return Ri(e,(function(t){has(Ki,t)||has(L,t)||n.push(t)})),n},oo=function getOwnPropertySymbols(t){var e=t===Ni,n=qi(e?Bi:toIndexedObject(t)),r=[];return Ri(n,(function(t){!has(Ki,t)||e&&!has(Ni,t)||r.push(Ki[t])})),r};pt||(B((Fi=function Symbol(){if(this instanceof Fi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=uid(t),setter=function(t){this===Ni&&setter.call(Bi,t),has(this,Li)&&has(this[Li],e)&&(this[Li][e]=!1),Qi(this,e,createPropertyDescriptor(1,t))};return a&&$i&&Qi(Ni,e,{configurable:!0,set:setter}),wrap(e,t)}).prototype,"toString",(function toString(){return Di(this).tag})),c.f=no,T.f=to,b.f=ro,rt.f=Ci.f=io,it.f=oo,a&&(Gi(Fi.prototype,"description",{configurable:!0,get:function description(){return Di(this).description}}),B(Ni,"propertyIsEnumerable",no,{unsafe:!0})),Pi.f=function(t){return wrap(wellKnownSymbol(t),t)}),_export({global:!0,wrap:!0,forced:!pt,sham:!pt},{Symbol:Fi}),Ri(xt(Hi),(function(t){defineWellKnownSymbol(t)})),_export({target:"Symbol",stat:!0,forced:!pt},{for:function(t){var e=String(t);if(has(Yi,e))return Yi[e];var n=Fi(e);return Yi[e]=n,Zi[n]=e,n},keyFor:function keyFor(t){if(!Ji(t))throw TypeError(t+" is not a symbol");if(has(Zi,t))return Zi[t]},useSetter:function(){$i=!0},useSimple:function(){$i=!1}}),_export({target:"Object",stat:!0,forced:!pt,sham:!a},{create:function create(t,e){return void 0===e?It(t):eo(It(t),e)},defineProperty:to,defineProperties:eo,getOwnPropertyDescriptor:ro}),_export({target:"Object",stat:!0,forced:!pt},{getOwnPropertyNames:io,getOwnPropertySymbols:oo}),_export({target:"Object",stat:!0,forced:fails((function(){it.f(1)}))},{getOwnPropertySymbols:function getOwnPropertySymbols(t){return it.f(toObject(t))}}),Ui&&_export({target:"JSON",stat:!0,forced:!pt||fails((function(){var t=Fi();return"[null]"!=Vi([t])||"{}"!=Vi({a:t})||"{}"!=Vi(Object(t))}))},{stringify:function stringify(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(isObject(e)||void 0!==t)&&!Ji(t))return dt(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ji(e))return e}),r[1]=e,Vi.apply(Ui,r)}}),Fi.prototype[Ai]||S(Fi.prototype,Ai,Fi.prototype.valueOf),setToStringTag(Fi,"Symbol"),L[Li]=!0;var ao=T.f,so=o.Symbol;if(a&&"function"==typeof so&&(!("description"in so.prototype)||void 0!==so().description)){var uo={},lo=function Symbol(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof lo?new so(t):void 0===t?so():so(t);return""===t&&(uo[e]=!0),e};copyConstructorProperties(lo,so);var co=lo.prototype=so.prototype;co.constructor=lo;var ho=co.toString,fo="Symbol(test)"==String(so("test")),po=/^Symbol\((.*)\)[^)]+$/;ao(co,"description",{configurable:!0,get:function description(){var t=isObject(this)?this.valueOf():this,e=ho.call(t);if(has(uo,t))return"";var n=fo?e.slice(7,-1):e.replace(po,"$1");return""===n?void 0:n}}),_export({global:!0,forced:!0},{Symbol:lo})}defineWellKnownSymbol("iterator"),_export({target:"Number",stat:!0},{isNaN:function isNaN(t){return t!=t}});var yo=Object.assign,mo=!yo||fails((function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=yo({},t)[n]||"abcdefghijklmnopqrst"!=xt(yo({},e)).join("")}))?function assign(t,e){for(var n=toObject(t),r=arguments.length,i=1,o=it.f,s=c.f;r>i;)for(var u,l=d(arguments[i++]),h=o?xt(l).concat(o(l)):xt(l),f=h.length,p=0;f>p;)u=h[p++],a&&!s.call(l,u)||(n[u]=l[u]);return n}:yo;_export({target:"Object",stat:!0,forced:Object.assign!==mo},{assign:mo});var go=wellKnownSymbol("species"),vo=[].slice,_o=Math.max;_export({target:"Array",proto:!0,forced:!arrayMethodHasSpeciesSupport("slice")},{slice:function slice(t,e){var n,r,i,o=toIndexedObject(this),a=toLength(o.length),s=toAbsoluteIndex(t,a),u=toAbsoluteIndex(void 0===e?a:e,a);if(dt(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!dt(n.prototype)?isObject(n)&&null===(n=n[go])&&(n=void 0):n=void 0,n===Array||void 0===n))return vo.call(o,s,u);for(r=new(void 0===n?Array:n)(_o(u-s,0)),i=0;s<u;s++,i++)s in o&&createProperty(r,i,o[s]);return r.length=i,r}});var bo=Math.ceil,wo=Math.floor;_export({target:"Math",stat:!0},{trunc:function trunc(t){return(t>0?wo:bo)(t)}});var To=function(t){function LuxonError(){return _classCallCheck(this,LuxonError),_possibleConstructorReturn(this,_getPrototypeOf(LuxonError).apply(this,arguments))}return _inherits(LuxonError,t),LuxonError}(_wrapNativeSuper(Error)),So=function(t){function InvalidDateTimeError(t){return _classCallCheck(this,InvalidDateTimeError),_possibleConstructorReturn(this,_getPrototypeOf(InvalidDateTimeError).call(this,"Invalid DateTime: ".concat(t.toMessage())))}return _inherits(InvalidDateTimeError,t),InvalidDateTimeError}(To),Eo=function(t){function InvalidIntervalError(t){return _classCallCheck(this,InvalidIntervalError),_possibleConstructorReturn(this,_getPrototypeOf(InvalidIntervalError).call(this,"Invalid Interval: ".concat(t.toMessage())))}return _inherits(InvalidIntervalError,t),InvalidIntervalError}(To),Mo=function(t){function InvalidDurationError(t){return _classCallCheck(this,InvalidDurationError),_possibleConstructorReturn(this,_getPrototypeOf(InvalidDurationError).call(this,"Invalid Duration: ".concat(t.toMessage())))}return _inherits(InvalidDurationError,t),InvalidDurationError}(To),Oo=function(t){function ConflictingSpecificationError(){return _classCallCheck(this,ConflictingSpecificationError),_possibleConstructorReturn(this,_getPrototypeOf(ConflictingSpecificationError).apply(this,arguments))}return _inherits(ConflictingSpecificationError,t),ConflictingSpecificationError}(To),xo=function(t){function InvalidUnitError(t){return _classCallCheck(this,InvalidUnitError),_possibleConstructorReturn(this,_getPrototypeOf(InvalidUnitError).call(this,"Invalid unit ".concat(t)))}return _inherits(InvalidUnitError,t),InvalidUnitError}(To),ko=function(t){function InvalidArgumentError(){return _classCallCheck(this,InvalidArgumentError),_possibleConstructorReturn(this,_getPrototypeOf(InvalidArgumentError).apply(this,arguments))}return _inherits(InvalidArgumentError,t),InvalidArgumentError}(To),Co=function(t){function ZoneIsAbstractError(){return _classCallCheck(this,ZoneIsAbstractError),_possibleConstructorReturn(this,_getPrototypeOf(ZoneIsAbstractError).call(this,"Zone is an abstract class"))}return _inherits(ZoneIsAbstractError,t),ZoneIsAbstractError}(To),Po=Object.is||function is(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};_export({target:"Object",stat:!0},{is:Po});var Io="numeric",Ro="short",Lo="long",Ao={year:Io,month:Io,day:Io},jo={year:Io,month:Ro,day:Io},Do={year:Io,month:Lo,day:Io},No={year:Io,month:Lo,day:Io,weekday:Lo},Fo={hour:Io,minute:Io},Uo={hour:Io,minute:Io,second:Io},Vo={hour:Io,minute:Io,second:Io,timeZoneName:Ro},zo={hour:Io,minute:Io,second:Io,timeZoneName:Lo},Go={hour:Io,minute:Io,hour12:!1},qo={hour:Io,minute:Io,second:Io,hour12:!1},Wo={hour:Io,minute:Io,second:Io,hour12:!1,timeZoneName:Ro},Ko={hour:Io,minute:Io,second:Io,hour12:!1,timeZoneName:Lo},Bo={year:Io,month:Io,day:Io,hour:Io,minute:Io},Yo={year:Io,month:Io,day:Io,hour:Io,minute:Io,second:Io},Zo={year:Io,month:Ro,day:Io,hour:Io,minute:Io},Ho={year:Io,month:Ro,day:Io,hour:Io,minute:Io,second:Io},Xo={year:Io,month:Ro,day:Io,weekday:Ro,hour:Io,minute:Io},$o={year:Io,month:Lo,day:Io,hour:Io,minute:Io,timeZoneName:Ro},Qo={year:Io,month:Lo,day:Io,hour:Io,minute:Io,second:Io,timeZoneName:Ro},Jo={year:Io,month:Lo,day:Io,weekday:Lo,hour:Io,minute:Io,timeZoneName:Lo},ta={year:Io,month:Lo,day:Io,weekday:Lo,hour:Io,minute:Io,second:Io,timeZoneName:Lo};_export({target:"String",proto:!0},{repeat:"".repeat||function repeat(t){var e=String(requireObjectCoercible(this)),n="",r=toInteger(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});var ea=Math.max,na=Math.min,ra=Math.floor,ia=/\$([$&'`]|\d\d?|<[^>]*>)/g,oa=/\$([$&'`]|\d\d?)/g;function isUndefined(t){return void 0===t}function isNumber(t){return"number"==typeof t}function isInteger(t){return"number"==typeof t&&t%1==0}function isDate(t){return"[object Date]"===Object.prototype.toString.call(t)}function hasIntl(){try{return"undefined"!=typeof Intl&&Intl.DateTimeFormat}catch(t){return!1}}function hasFormatToParts(){return!isUndefined(Intl.DateTimeFormat.prototype.formatToParts)}function hasRelative(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(t){return!1}}function maybeArray(t){return Array.isArray(t)?t:[t]}function bestBy(t,e,n){if(0!==t.length)return t.reduce((function(t,r){var i=[e(r),r];return t&&n(t[0],i[0])===t[0]?t:i}),null)[1]}function pick(t,e){return e.reduce((function(e,n){return e[n]=t[n],e}),{})}function hasOwnProperty$1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function integerBetween(t,e,n){return isInteger(t)&&t>=e&&t<=n}function padStart(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t.toString().length<e?("0".repeat(e)+t).slice(-e):t.toString()}function parseInteger(t){return isUndefined(t)||null===t||""===t?void 0:parseInt(t,10)}function parseMillis(t){if(!isUndefined(t)&&null!==t&&""!==t){var e=1e3*parseFloat("0."+t);return Math.floor(e)}}function roundTo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.pow(10,e);return(n?Math.trunc:Math.round)(t*r)/r}function isLeapYear(t){return t%4==0&&(t%100!=0||t%400==0)}function daysInYear(t){return isLeapYear(t)?366:365}function daysInMonth(t,e){var n=function floorMod(t,e){return t-e*Math.floor(t/e)}(e-1,12)+1;return 2===n?isLeapYear(t+(e-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function objToLocalTS(t){var e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e)).setUTCFullYear(e.getUTCFullYear()-1900),+e}function weeksInWeekYear(t){var e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return 4===e||3===r?53:52}function untruncateYear(t){return t>99?t:t>60?1900+t:2e3+t}function parseZoneInfo(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new Date(t),o={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);var a=Object.assign({timeZoneName:e},o),s=hasIntl();if(s&&hasFormatToParts()){var u=new Intl.DateTimeFormat(n,a).formatToParts(i).find((function(t){return"timezonename"===t.type.toLowerCase()}));return u?u.value:null}if(s){var l=new Intl.DateTimeFormat(n,o).format(i);return new Intl.DateTimeFormat(n,a).format(i).substring(l.length).replace(/^[, \u200e]+/,"")}return null}function signedOffset(t,e){var n=parseInt(t,10);Number.isNaN(n)&&(n=0);var r=parseInt(e,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function asNumber(t){var e=Number(t);if("boolean"==typeof t||""===t||Number.isNaN(e))throw new ko("Invalid unit value ".concat(t));return e}function normalizeObject(t,e,n){var r={};for(var i in t)if(hasOwnProperty$1(t,i)){if(n.indexOf(i)>=0)continue;var o=t[i];if(null==o)continue;r[e(i)]=asNumber(o)}return r}function formatOffset(t,e){var n=Math.trunc(t/60),r=Math.abs(t%60),i=n>=0&&!Object.is(n,-0)?"+":"-",o="".concat(i).concat(Math.abs(n));switch(e){case"short":return"".concat(i).concat(padStart(Math.abs(n),2),":").concat(padStart(r,2));case"narrow":return r>0?"".concat(o,":").concat(r):o;case"techie":return"".concat(i).concat(padStart(Math.abs(n),2)).concat(padStart(r,2));default:throw new RangeError("Value format ".concat(e," is out of range for property format"))}}function timeObject(t){return pick(t,["hour","minute","second","millisecond"])}fixRegexpWellKnownSymbolLogic("replace",2,(function(t,e,n){return[function replace(n,r){var i=requireObjectCoercible(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){var i=n(e,t,this,r);if(i.done)return i.value;var o=anObject(t),a=String(this),s="function"==typeof r;s||(r=String(r));var u=o.global;if(u){var l=o.unicode;o.lastIndex=0}for(var c=[];;){var h=regexpExecAbstract(o,a);if(null===h)break;if(c.push(h),!u)break;""===String(h[0])&&(o.lastIndex=advanceStringIndex(a,toLength(o.lastIndex),l))}for(var f,d="",p=0,y=0;y<c.length;y++){h=c[y];for(var m=String(h[0]),g=ea(na(toInteger(h.index),a.length),0),v=[],_=1;_<h.length;_++)v.push(void 0===(f=h[_])?f:String(f));var b=h.groups;if(s){var w=[m].concat(v,g,a);void 0!==b&&w.push(b);var T=String(r.apply(void 0,w))}else T=getSubstitution(m,a,g,v,b,r);g>=p&&(d+=a.slice(p,g)+T,p=g+m.length)}return d+a.slice(p)}];function getSubstitution(t,n,r,i,o,a){var s=r+t.length,u=i.length,l=oa;return void 0!==o&&(o=toObject(o),l=ia),e.call(a,l,(function(e,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":l=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return e;if(c>u){var h=ra(c/10);return 0===h?e:h<=u?void 0===i[h-1]?a.charAt(1):i[h-1]+a.charAt(1):e}l=i[c-1]}return void 0===l?"":l}))}}));var aa=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/;function stringify(t){return JSON.stringify(t,Object.keys(t).sort())}var sa=["January","February","March","April","May","June","July","August","September","October","November","December"],ua=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],la=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(t){switch(t){case"narrow":return la;case"short":return ua;case"long":return sa;case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var ca=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ha=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],fa=["M","T","W","T","F","S","S"];function weekdays(t){switch(t){case"narrow":return fa;case"short":return ha;case"long":return ca;case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var da=["AM","PM"],pa=["Before Christ","Anno Domini"],ya=["BC","AD"],ma=["B","A"];function eras(t){switch(t){case"narrow":return ma;case"short":return ya;case"long":return pa;default:return null}}function stringifyTokens(t,e){var n="",r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u.literal?n+=u.val:n+=e(u.val)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}var ga={D:Ao,DD:jo,DDD:Do,DDDD:No,t:Fo,tt:Uo,ttt:Vo,tttt:zo,T:Go,TT:qo,TTT:Wo,TTTT:Ko,f:Bo,ff:Zo,fff:$o,ffff:Jo,F:Yo,FF:Ho,FFF:Qo,FFFF:ta},va=function(){function Formatter(t,e){_classCallCheck(this,Formatter),this.opts=e,this.loc=t,this.systemLoc=null}return _createClass(Formatter,null,[{key:"create",value:function create(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Formatter(t,e)}},{key:"parseFormat",value:function parseFormat(t){for(var e=null,n="",r=!1,i=[],o=0;o<t.length;o++){var a=t.charAt(o);"'"===a?(n.length>0&&i.push({literal:r,val:n}),e=null,n="",r=!r):r?n+=a:a===e?n+=a:(n.length>0&&i.push({literal:!1,val:n}),n=a,e=a)}return n.length>0&&i.push({literal:r,val:n}),i}},{key:"macroTokenToFormatOpts",value:function macroTokenToFormatOpts(t){return ga[t]}}]),_createClass(Formatter,[{key:"formatWithSystemDefault",value:function formatWithSystemDefault(t,e){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,Object.assign({},this.opts,e)).format()}},{key:"formatDateTime",value:function formatDateTime(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.loc.dtFormatter(t,Object.assign({},this.opts,e));return n.format()}},{key:"formatDateTimeParts",value:function formatDateTimeParts(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.loc.dtFormatter(t,Object.assign({},this.opts,e));return n.formatToParts()}},{key:"resolvedOptions",value:function resolvedOptions(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.loc.dtFormatter(t,Object.assign({},this.opts,e));return n.resolvedOptions()}},{key:"num",value:function num(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.opts.forceSimple)return padStart(t,e);var n=Object.assign({},this.opts);return e>0&&(n.padTo=e),this.loc.numberFormatter(n).format(t)}},{key:"formatDateTimeFromString",value:function formatDateTimeFromString(t,e){var n=this,r="en"===this.loc.listingMode(),i=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar&&hasFormatToParts(),o=function string(e,r){return n.loc.extract(t,e,r)},a=function formatOffset(e){return t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):""},s=function meridiem(){return r?function meridiemForDateTime(t){return da[t.hour<12?0:1]}(t):o({hour:"numeric",hour12:!0},"dayperiod")},u=function month(e,n){return r?function monthForDateTime(t,e){return months(e)[t.month-1]}(t,e):o(n?{month:e}:{month:e,day:"numeric"},"month")},l=function weekday(e,n){return r?function weekdayForDateTime(t,e){return weekdays(e)[t.weekday-1]}(t,e):o(n?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday")},c=function era(e){return r?function eraForDateTime(t,e){return eras(e)[t.year<0?0:1]}(t,e):o({era:e},"era")};return stringifyTokens(Formatter.parseFormat(e),(function tokenToString(e){switch(e){case"S":return n.num(t.millisecond);case"u":case"SSS":return n.num(t.millisecond,3);case"s":return n.num(t.second);case"ss":return n.num(t.second,2);case"m":return n.num(t.minute);case"mm":return n.num(t.minute,2);case"h":return n.num(t.hour%12==0?12:t.hour%12);case"hh":return n.num(t.hour%12==0?12:t.hour%12,2);case"H":return n.num(t.hour);case"HH":return n.num(t.hour,2);case"Z":return a({format:"narrow",allowZ:n.opts.allowZ});case"ZZ":return a({format:"short",allowZ:n.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:!1});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:n.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:n.loc.locale});case"z":return t.zoneName;case"a":return s();case"d":return i?o({day:"numeric"},"day"):n.num(t.day);case"dd":return i?o({day:"2-digit"},"day"):n.num(t.day,2);case"c":return n.num(t.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return n.num(t.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):n.num(t.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):n.num(t.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?o({month:"numeric"},"month"):n.num(t.month);case"MM":return i?o({month:"2-digit"},"month"):n.num(t.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?o({year:"numeric"},"year"):n.num(t.year);case"yy":return i?o({year:"2-digit"},"year"):n.num(t.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):n.num(t.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):n.num(t.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return n.num(t.weekYear.toString().slice(-2),2);case"kkkk":return n.num(t.weekYear,4);case"W":return n.num(t.weekNumber);case"WW":return n.num(t.weekNumber,2);case"o":return n.num(t.ordinal);case"ooo":return n.num(t.ordinal,3);case"q":return n.num(t.quarter);case"qq":return n.num(t.quarter,2);case"X":return n.num(Math.floor(t.ts/1e3));case"x":return n.num(t.ts);default:return function maybeMacro(e){var r=Formatter.macroTokenToFormatOpts(e);return r?n.formatWithSystemDefault(t,r):e}(e)}}))}},{key:"formatDurationFromString",value:function formatDurationFromString(t,e){var n=this,r=function tokenToField(t){switch(t[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},i=Formatter.parseFormat(e),o=i.reduce((function(t,e){var n=e.literal,r=e.val;return n?t:t.concat(r)}),[]);return stringifyTokens(i,function tokenToString(t){return function(e){var i=r(e);return i?n.num(t.get(i),e.length):e}}(t.shiftTo.apply(t,_toConsumableArray(o.map(r).filter((function(t){return t}))))))}}]),Formatter}(),_a=function(){function Invalid(t,e){_classCallCheck(this,Invalid),this.reason=t,this.explanation=e}return _createClass(Invalid,[{key:"toMessage",value:function toMessage(){return this.explanation?"".concat(this.reason,": ").concat(this.explanation):this.reason}}]),Invalid}(),ba=Ci.f,wa=fails((function(){return!Object.getOwnPropertyNames(1)}));_export({target:"Object",stat:!0,forced:wa},{getOwnPropertyNames:ba});var Ta=function(){function Zone(){_classCallCheck(this,Zone)}return _createClass(Zone,[{key:"offsetName",value:function offsetName(t,e){throw new Co}},{key:"formatOffset",value:function formatOffset(t,e){throw new Co}},{key:"offset",value:function offset(t){throw new Co}},{key:"equals",value:function equals(t){throw new Co}},{key:"type",get:function get(){throw new Co}},{key:"name",get:function get(){throw new Co}},{key:"universal",get:function get(){throw new Co}},{key:"isValid",get:function get(){throw new Co}}]),Zone}(),Sa=null,Ea=function(t){function LocalZone(){return _classCallCheck(this,LocalZone),_possibleConstructorReturn(this,_getPrototypeOf(LocalZone).apply(this,arguments))}return _inherits(LocalZone,t),_createClass(LocalZone,[{key:"offsetName",value:function offsetName(t,e){return parseZoneInfo(t,e.format,e.locale)}},{key:"formatOffset",value:function formatOffset$1(t,e){return formatOffset(this.offset(t),e)}},{key:"offset",value:function offset(t){return-new Date(t).getTimezoneOffset()}},{key:"equals",value:function equals(t){return"local"===t.type}},{key:"type",get:function get(){return"local"}},{key:"name",get:function get(){return hasIntl()?(new Intl.DateTimeFormat).resolvedOptions().timeZone:"local"}},{key:"universal",get:function get(){return!1}},{key:"isValid",get:function get(){return!0}}],[{key:"instance",get:function get(){return null===Sa&&(Sa=new LocalZone),Sa}}]),LocalZone}(Ta),Ma=T.f,Oa=rt.f,xa=wellKnownSymbol("match"),ka=o.RegExp,Ca=ka.prototype,Pa=/a/g,Ia=/a/g,Ra=new ka(Pa)!==Pa;if(a&&ht("RegExp",!Ra||fails((function(){return Ia[xa]=!1,ka(Pa)!=Pa||ka(Ia)==Ia||"/a/i"!=ka(Pa,"i")})))){for(var La=function RegExp(t,e){var n=this instanceof La,r=isRegexp(t),i=void 0===e;return!n&&r&&t.constructor===La&&i?t:inheritIfRequired(Ra?new ka(r&&!i?t.source:t,e):ka((r=t instanceof La)?t.source:t,r&&i?regexpFlags.call(t):e),n?this:Ca,La)},proxy=function(t){t in La||Ma(La,t,{configurable:!0,get:function(){return ka[t]},set:function(e){ka[t]=e}})},Aa=Oa(ka),ja=0;Aa.length>ja;)proxy(Aa[ja++]);Ca.constructor=La,La.prototype=Ca,B(o,"RegExp",La)}setSpecies("RegExp");var Da=RegExp("^".concat(aa.source,"$")),Na={};var Fa={year:0,month:1,day:2,hour:3,minute:4,second:5};var Ua={},Va=function(t){function IANAZone(t){var e;return _classCallCheck(this,IANAZone),(e=_possibleConstructorReturn(this,_getPrototypeOf(IANAZone).call(this))).zoneName=t,e.valid=IANAZone.isValidZone(t),e}return _inherits(IANAZone,t),_createClass(IANAZone,null,[{key:"create",value:function create(t){return Ua[t]||(Ua[t]=new IANAZone(t)),Ua[t]}},{key:"resetCache",value:function resetCache(){Ua={},Na={}}},{key:"isValidSpecifier",value:function isValidSpecifier(t){return!(!t||!t.match(Da))}},{key:"isValidZone",value:function isValidZone(t){try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch(t){return!1}}},{key:"parseGMTOffset",value:function parseGMTOffset(t){if(t){var e=t.match(/^Etc\/GMT([+-]\d{1,2})$/i);if(e)return-60*parseInt(e[1])}return null}}]),_createClass(IANAZone,[{key:"offsetName",value:function offsetName(t,e){return parseZoneInfo(t,e.format,e.locale,this.name)}},{key:"formatOffset",value:function formatOffset$1(t,e){return formatOffset(this.offset(t),e)}},{key:"offset",value:function offset(t){var e=new Date(t),n=function makeDTF(t){return Na[t]||(Na[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Na[t]}(this.name),r=n.formatToParts?function partsOffset(t,e){for(var n=t.formatToParts(e),r=[],i=0;i<n.length;i++){var o=n[i],a=o.type,s=o.value,u=Fa[a];isUndefined(u)||(r[u]=parseInt(s,10))}return r}(n,e):function hackyOffset(t,e){var n=t.format(e).replace(/\u200E/g,""),r=_slicedToArray(/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n),7),i=r[1],o=r[2];return[r[3],i,o,r[4],r[5],r[6]]}(n,e),i=_slicedToArray(r,6),o=objToLocalTS({year:i[0],month:i[1],day:i[2],hour:i[3],minute:i[4],second:i[5],millisecond:0}),a=e.valueOf();return(o-(a-=a%1e3))/6e4}},{key:"equals",value:function equals(t){return"iana"===t.type&&t.name===this.name}},{key:"type",get:function get(){return"iana"}},{key:"name",get:function get(){return this.zoneName}},{key:"universal",get:function get(){return!1}},{key:"isValid",get:function get(){return this.valid}}]),IANAZone}(Ta),za=/"/g;_export({target:"String",proto:!0,forced:function(t){return fails((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}("fixed")},{fixed:function fixed(){return t="tt",e="",n="",r=String(requireObjectCoercible(this)),i="<"+t,""!==e&&(i+=" "+e+'="'+String(n).replace(za,"&quot;")+'"'),i+">"+r+"</"+t+">";var t,e,n,r,i}});var Ga=null,qa=function(t){function FixedOffsetZone(t){var e;return _classCallCheck(this,FixedOffsetZone),(e=_possibleConstructorReturn(this,_getPrototypeOf(FixedOffsetZone).call(this))).fixed=t,e}return _inherits(FixedOffsetZone,t),_createClass(FixedOffsetZone,null,[{key:"instance",value:function instance(t){return 0===t?FixedOffsetZone.utcInstance:new FixedOffsetZone(t)}},{key:"parseSpecifier",value:function parseSpecifier(t){if(t){var e=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new FixedOffsetZone(signedOffset(e[1],e[2]))}return null}},{key:"utcInstance",get:function get(){return null===Ga&&(Ga=new FixedOffsetZone(0)),Ga}}]),_createClass(FixedOffsetZone,[{key:"offsetName",value:function offsetName(){return this.name}},{key:"formatOffset",value:function formatOffset$1(t,e){return formatOffset(this.fixed,e)}},{key:"offset",value:function offset(){return this.fixed}},{key:"equals",value:function equals(t){return"fixed"===t.type&&t.fixed===this.fixed}},{key:"type",get:function get(){return"fixed"}},{key:"name",get:function get(){return 0===this.fixed?"UTC":"UTC".concat(formatOffset(this.fixed,"narrow"))}},{key:"universal",get:function get(){return!0}},{key:"isValid",get:function get(){return!0}}]),FixedOffsetZone}(Ta),Wa=function(t){function InvalidZone(t){var e;return _classCallCheck(this,InvalidZone),(e=_possibleConstructorReturn(this,_getPrototypeOf(InvalidZone).call(this))).zoneName=t,e}return _inherits(InvalidZone,t),_createClass(InvalidZone,[{key:"offsetName",value:function offsetName(){return null}},{key:"formatOffset",value:function formatOffset(){return""}},{key:"offset",value:function offset(){return NaN}},{key:"equals",value:function equals(){return!1}},{key:"type",get:function get(){return"invalid"}},{key:"name",get:function get(){return this.zoneName}},{key:"universal",get:function get(){return!1}},{key:"isValid",get:function get(){return!1}}]),InvalidZone}(Ta);function normalizeZone(t,e){var n;if(isUndefined(t)||null===t)return e;if(t instanceof Ta)return t;if(function isString(t){return"string"==typeof t}(t)){var r=t.toLowerCase();return"local"===r?e:"utc"===r||"gmt"===r?qa.utcInstance:null!=(n=Va.parseGMTOffset(t))?qa.instance(n):Va.isValidSpecifier(r)?Va.create(t):qa.parseSpecifier(r)||new Wa(t)}return isNumber(t)?qa.instance(t):"object"===_typeof(t)&&t.offset&&"number"==typeof t.offset?t:new Wa(t)}var Ka=function now(){return Date.now()},Ba=null,Ya=null,Za=null,Ha=null,Xa=!1,$a=function(){function Settings(){_classCallCheck(this,Settings)}return _createClass(Settings,null,[{key:"resetCaches",value:function resetCaches(){os.resetCache(),Va.resetCache()}},{key:"now",get:function get(){return Ka},set:function set(t){Ka=t}},{key:"defaultZoneName",get:function get(){return Settings.defaultZone.name},set:function set(t){Ba=t?normalizeZone(t):null}},{key:"defaultZone",get:function get(){return Ba||Ea.instance}},{key:"defaultLocale",get:function get(){return Ya},set:function set(t){Ya=t}},{key:"defaultNumberingSystem",get:function get(){return Za},set:function set(t){Za=t}},{key:"defaultOutputCalendar",get:function get(){return Ha},set:function set(t){Ha=t}},{key:"throwOnInvalid",get:function get(){return Xa},set:function set(t){Xa=t}}]),Settings}(),Qa={};function getCachedDTF(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=JSON.stringify([t,e]),r=Qa[n];return r||(r=new Intl.DateTimeFormat(t,e),Qa[n]=r),r}var Ja={};var ts={};var es=null;function systemLocale(){if(es)return es;if(hasIntl()){var t=(new Intl.DateTimeFormat).resolvedOptions().locale;return es=t&&"und"!==t?t:"en-US"}return es="en-US"}function mapMonths(t){for(var e=[],n=1;n<=12;n++){var r=ou.utc(2016,n,1);e.push(t(r))}return e}function mapWeekdays(t){for(var e=[],n=1;n<=7;n++){var r=ou.utc(2016,11,13+n);e.push(t(r))}return e}function listStuff(t,e,n,r,i){var o=t.listingMode(n);return"error"===o?null:"en"===o?r(e):i(e)}var ns=function(){function PolyNumberFormatter(t,e,n){if(_classCallCheck(this,PolyNumberFormatter),this.padTo=n.padTo||0,this.floor=n.floor||!1,!e&&hasIntl()){var r={useGrouping:!1};n.padTo>0&&(r.minimumIntegerDigits=n.padTo),this.inf=function getCachedINF(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=JSON.stringify([t,e]),r=Ja[n];return r||(r=new Intl.NumberFormat(t,e),Ja[n]=r),r}(t,r)}}return _createClass(PolyNumberFormatter,[{key:"format",value:function format(t){if(this.inf){var e=this.floor?Math.floor(t):t;return this.inf.format(e)}return padStart(this.floor?Math.floor(t):roundTo(t,3),this.padTo)}}]),PolyNumberFormatter}(),rs=function(){function PolyDateFormatter(t,e,n){var r;if(_classCallCheck(this,PolyDateFormatter),this.opts=n,this.hasIntl=hasIntl(),t.zone.universal&&this.hasIntl?(r="UTC",n.timeZoneName?this.dt=t:this.dt=0===t.offset?t:ou.fromMillis(t.ts+60*t.offset*1e3)):"local"===t.zone.type?this.dt=t:(this.dt=t,r=t.zone.name),this.hasIntl){var i=Object.assign({},this.opts);r&&(i.timeZone=r),this.dtf=getCachedDTF(e,i)}}return _createClass(PolyDateFormatter,[{key:"format",value:function format(){if(this.hasIntl)return this.dtf.format(this.dt.toJSDate());var t=function formatString(t){switch(stringify(pick(t,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hour12"]))){case stringify(Ao):return"M/d/yyyy";case stringify(jo):return"LLL d, yyyy";case stringify(Do):return"LLLL d, yyyy";case stringify(No):return"EEEE, LLLL d, yyyy";case stringify(Fo):return"h:mm a";case stringify(Uo):return"h:mm:ss a";case stringify(Vo):case stringify(zo):return"h:mm a";case stringify(Go):return"HH:mm";case stringify(qo):return"HH:mm:ss";case stringify(Wo):case stringify(Ko):return"HH:mm";case stringify(Bo):return"M/d/yyyy, h:mm a";case stringify(Zo):return"LLL d, yyyy, h:mm a";case stringify($o):return"LLLL d, yyyy, h:mm a";case stringify(Jo):return"EEEE, LLLL d, yyyy, h:mm a";case stringify(Yo):return"M/d/yyyy, h:mm:ss a";case stringify(Ho):return"LLL d, yyyy, h:mm:ss a";case stringify(Xo):return"EEE, d LLL yyyy, h:mm a";case stringify(Qo):return"LLLL d, yyyy, h:mm:ss a";case stringify(ta):return"EEEE, LLLL d, yyyy, h:mm:ss a";default:return"EEEE, LLLL d, yyyy, h:mm a"}}(this.opts),e=os.create("en-US");return va.create(e).formatDateTimeFromString(this.dt,t)}},{key:"formatToParts",value:function formatToParts(){return this.hasIntl&&hasFormatToParts()?this.dtf.formatToParts(this.dt.toJSDate()):[]}},{key:"resolvedOptions",value:function resolvedOptions(){return this.hasIntl?this.dtf.resolvedOptions():{locale:"en-US",numberingSystem:"latn",outputCalendar:"gregory"}}}]),PolyDateFormatter}(),is=function(){function PolyRelFormatter(t,e,n){_classCallCheck(this,PolyRelFormatter),this.opts=Object.assign({style:"long"},n),!e&&hasRelative()&&(this.rtf=function getCachedRTF(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=JSON.stringify([t,e]),r=ts[n];return r||(r=new Intl.RelativeTimeFormat(t,e),ts[n]=r),r}(t,n))}return _createClass(PolyRelFormatter,[{key:"format",value:function format(t,e){return this.rtf?this.rtf.format(t,e):function formatRelativeTime(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"always",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=-1===["hours","minutes","seconds"].indexOf(t);if("auto"===n&&o){var a="days"===t;switch(e){case 1:return a?"tomorrow":"next ".concat(i[t][0]);case-1:return a?"yesterday":"last ".concat(i[t][0]);case 0:return a?"today":"this ".concat(i[t][0])}}var s=Object.is(e,-0)||e<0,u=Math.abs(e),l=1===u,c=i[t],h=r?l?c[1]:c[2]||c[1]:l?i[t][0]:t;return s?"".concat(u," ").concat(h," ago"):"in ".concat(u," ").concat(h)}(e,t,this.opts.numeric,"long"!==this.opts.style)}},{key:"formatToParts",value:function formatToParts(t,e){return this.rtf?this.rtf.formatToParts(t,e):[]}}]),PolyRelFormatter}(),os=function(){function Locale(t,e,n,r){_classCallCheck(this,Locale);var i=_slicedToArray(function parseLocaleString(t){var e=t.indexOf("-u-");if(-1===e)return[t];var n,r=t.substring(0,e);try{n=getCachedDTF(t).resolvedOptions()}catch(t){n=getCachedDTF(r).resolvedOptions()}var i=n;return[r,i.numberingSystem,i.calendar]}(t),3),o=i[0],a=i[1],s=i[2];this.locale=o,this.numberingSystem=e||a||null,this.outputCalendar=n||s||null,this.intl=function intlConfigString(t,e,n){return hasIntl()?n||e?(t+="-u",n&&(t+="-ca-".concat(n)),e&&(t+="-nu-".concat(e)),t):t:[]}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}return _createClass(Locale,null,[{key:"fromOpts",value:function fromOpts(t){return Locale.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}},{key:"create",value:function create(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t||$a.defaultLocale,o=i||(r?"en-US":systemLocale()),a=e||$a.defaultNumberingSystem,s=n||$a.defaultOutputCalendar;return new Locale(o,a,s,i)}},{key:"resetCache",value:function resetCache(){es=null,Qa={},Ja={},ts={}}},{key:"fromObject",value:function fromObject(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locale,n=t.numberingSystem,r=t.outputCalendar;return Locale.create(e,n,r)}}]),_createClass(Locale,[{key:"listingMode",value:function listingMode(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=hasIntl(),n=e&&hasFormatToParts(),r=this.isEnglish(),i=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return n||r&&i||t?!n||r&&i?"en":"intl":"error"}},{key:"clone",value:function clone(t){return t&&0!==Object.getOwnPropertyNames(t).length?Locale.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this}},{key:"redefaultToEN",value:function redefaultToEN(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone(Object.assign({},t,{defaultToEN:!0}))}},{key:"redefaultToSystem",value:function redefaultToSystem(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clone(Object.assign({},t,{defaultToEN:!1}))}},{key:"months",value:function months$1(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return listStuff(this,t,r,months,(function(){var r=n?{month:t,day:"numeric"}:{month:t},i=n?"format":"standalone";return e.monthsCache[i][t]||(e.monthsCache[i][t]=mapMonths((function(t){return e.extract(t,r,"month")}))),e.monthsCache[i][t]}))}},{key:"weekdays",value:function weekdays$1(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return listStuff(this,t,r,weekdays,(function(){var r=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=n?"format":"standalone";return e.weekdaysCache[i][t]||(e.weekdaysCache[i][t]=mapWeekdays((function(t){return e.extract(t,r,"weekday")}))),e.weekdaysCache[i][t]}))}},{key:"meridiems",value:function meridiems$1(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return listStuff(this,void 0,e,(function(){return da}),(function(){if(!t.meridiemCache){var e={hour:"numeric",hour12:!0};t.meridiemCache=[ou.utc(2016,11,13,9),ou.utc(2016,11,13,19)].map((function(n){return t.extract(n,e,"dayperiod")}))}return t.meridiemCache}))}},{key:"eras",value:function eras$1(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return listStuff(this,t,n,eras,(function(){var n={era:t};return e.eraCache[t]||(e.eraCache[t]=[ou.utc(-40,1,1),ou.utc(2017,1,1)].map((function(t){return e.extract(t,n,"era")}))),e.eraCache[t]}))}},{key:"extract",value:function extract(t,e,n){var r=this.dtFormatter(t,e).formatToParts().find((function(t){return t.type.toLowerCase()===n}));return r?r.value:null}},{key:"numberFormatter",value:function numberFormatter(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ns(this.intl,t.forceSimple||this.fastNumbers,t)}},{key:"dtFormatter",value:function dtFormatter(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new rs(t,this.intl,e)}},{key:"relFormatter",value:function relFormatter(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new is(this.intl,this.isEnglish(),t)}},{key:"isEnglish",value:function isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||hasIntl()&&new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}},{key:"equals",value:function equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}},{key:"fastNumbers",get:function get(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function supportsFastNumbers(t){return(!t.numberingSystem||"latn"===t.numberingSystem)&&("latn"===t.numberingSystem||!t.locale||t.locale.startsWith("en")||hasIntl()&&"latn"===new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}}]),Locale}();function combineRegexes(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t+e.source}),"");return RegExp("^".concat(r,"$"))}function combineExtractors(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(e,n){var r=_slicedToArray(e,3),i=r[0],o=r[1],a=r[2],s=_slicedToArray(n(t,a),3),u=s[0],l=s[1],c=s[2];return[Object.assign(i,u),o||l,c]}),[{},null,1]).slice(0,2)}}function parse(t){if(null==t)return[null,null];for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=_slicedToArray(o[i],2),s=a[0],u=a[1],l=s.exec(t);if(l)return u(l)}return[null,null]}function simpleParse(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n){var r,i={};for(r=0;r<e.length;r++)i[e[r]]=parseInteger(t[n+r]);return[i,null,n+r]}}var as=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ss=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,9}))?)?)?/,us=RegExp("".concat(ss.source).concat(as.source,"?")),ls=RegExp("(?:T".concat(us.source,")?")),cs=simpleParse("weekYear","weekNumber","weekDay"),hs=simpleParse("year","ordinal"),fs=RegExp("".concat(ss.source," ?(?:").concat(as.source,"|(").concat(aa.source,"))?")),ds=RegExp("(?: ".concat(fs.source,")?"));function int(t,e,n){var r=t[e];return isUndefined(r)?n:parseInteger(r)}function extractISOYmd(t,e){return[{year:int(t,e),month:int(t,e+1,1),day:int(t,e+2,1)},null,e+3]}function extractISOTime(t,e){return[{hour:int(t,e,0),minute:int(t,e+1,0),second:int(t,e+2,0),millisecond:parseMillis(t[e+3])},null,e+4]}function extractISOOffset(t,e){var n=!t[e]&&!t[e+1],r=signedOffset(t[e+1],t[e+2]);return[{},n?null:qa.instance(r),e+3]}function extractIANAZone(t,e){return[{},t[e]?Va.create(t[e]):null,e+1]}var ps=/^P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})(?:[.,](-?\d{1,9}))?S)?)?)$/;function extractISODuration(t){var e=_slicedToArray(t,9),n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return[{years:parseInteger(n),months:parseInteger(r),weeks:parseInteger(i),days:parseInteger(o),hours:parseInteger(a),minutes:parseInteger(s),seconds:parseInteger(u),milliseconds:parseMillis(l)}]}var ys={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fromStrings(t,e,n,r,i,o,a){var s={year:2===e.length?untruncateYear(parseInteger(e)):parseInteger(e),month:ua.indexOf(n)+1,day:parseInteger(r),hour:parseInteger(i),minute:parseInteger(o)};return a&&(s.second=parseInteger(a)),t&&(s.weekday=t.length>3?ca.indexOf(t)+1:ha.indexOf(t)+1),s}var ms=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(t){var e,n=_slicedToArray(t,12),r=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=n[6],l=n[7],c=n[8],h=n[9],f=n[10],d=n[11],p=fromStrings(r,a,o,i,s,u,l);return e=c?ys[c]:h?0:signedOffset(f,d),[p,new qa(e)]}var gs=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vs=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,_s=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(t){var e=_slicedToArray(t,8),n=e[1],r=e[2],i=e[3];return[fromStrings(n,e[4],i,r,e[5],e[6],e[7]),qa.utcInstance]}function extractASCII(t){var e=_slicedToArray(t,8),n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6];return[fromStrings(n,e[7],r,i,o,a,s),qa.utcInstance]}var bs=combineRegexes(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ls),ws=combineRegexes(/(\d{4})-?W(\d\d)(?:-?(\d))?/,ls),Ts=combineRegexes(/(\d{4})-?(\d{3})/,ls),Ss=combineRegexes(us),Es=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset),Ms=combineExtractors(cs,extractISOTime,extractISOOffset),Os=combineExtractors(hs,extractISOTime),xs=combineExtractors(extractISOTime,extractISOOffset);function parseISODate(t){return parse(t,[bs,Es],[ws,Ms],[Ts,Os],[Ss,xs])}function parseRFC2822Date(t){return parse(function preprocessRFC2822(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(t),[ms,extractRFC2822])}function parseHTTPDate(t){return parse(t,[gs,extractRFC1123Or850],[vs,extractRFC1123Or850],[_s,extractASCII])}var ks=combineRegexes(/(\d{4})-(\d\d)-(\d\d)/,ds),Cs=combineRegexes(fs),Ps=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),Is=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(t){return parse(t,[ks,Ps],[Cs,Is])}var Rs={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Ls=Object.assign({years:{months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},Rs),As=Object.assign({years:{months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},Rs),js=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Ds=js.slice(0).reverse();function clone$1(t,e){var n={values:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.values:Object.assign({},t.values,e.values||{}),loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy};return new Ns(n)}function convert(t,e,n,r,i){var o=t[i][n],a=e[n]/o,s=!(Math.sign(a)===Math.sign(r[i]))&&0!==r[i]&&Math.abs(a)<=1?function antiTrunc(t){return t<0?Math.floor(t):Math.ceil(t)}(a):Math.trunc(a);r[i]+=s,e[n]-=s*o}function normalizeValues(t,e){Ds.reduce((function(n,r){return isUndefined(e[r])?n:(n&&convert(t,e,n,e,r),r)}),null)}var Ns=function(){function Duration(t){_classCallCheck(this,Duration);var e="longterm"===t.conversionAccuracy||!1;this.values=t.values,this.loc=t.loc||os.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=e?As:Ls,this.isLuxonDuration=!0}return _createClass(Duration,[{key:"toFormat",value:function toFormat(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e,{floor:!1!==e.round&&!1!==e.floor});return this.isValid?va.create(this.loc,n).formatDurationFromString(this,t):"Invalid Duration"}},{key:"toObject",value:function toObject(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return{};var e=Object.assign({},this.values);return t.includeConfig&&(e.conversionAccuracy=this.conversionAccuracy,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}},{key:"toISO",value:function toISO(){if(!this.isValid)return null;var t="P";return 0!==this.years&&(t+=this.years+"Y"),0===this.months&&0===this.quarters||(t+=this.months+3*this.quarters+"M"),0!==this.weeks&&(t+=this.weeks+"W"),0!==this.days&&(t+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(t+="T"),0!==this.hours&&(t+=this.hours+"H"),0!==this.minutes&&(t+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(t+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===t&&(t+="T0S"),t}},{key:"toJSON",value:function toJSON(){return this.toISO()}},{key:"toString",value:function toString(){return this.toISO()}},{key:"valueOf",value:function valueOf(){return this.as("milliseconds")}},{key:"plus",value:function plus(t){if(!this.isValid)return this;var e=friendlyDuration(t),n={},r=!0,i=!1,o=void 0;try{for(var a,s=js[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;(hasOwnProperty$1(e.values,u)||hasOwnProperty$1(this.values,u))&&(n[u]=e.get(u)+this.get(u))}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return clone$1(this,{values:n},!0)}},{key:"minus",value:function minus(t){if(!this.isValid)return this;var e=friendlyDuration(t);return this.plus(e.negate())}},{key:"mapUnits",value:function mapUnits(t){if(!this.isValid)return this;for(var e={},n=0,r=Object.keys(this.values);n<r.length;n++){var i=r[n];e[i]=asNumber(t(this.values[i],i))}return clone$1(this,{values:e},!0)}},{key:"get",value:function get(t){return this[Duration.normalizeUnit(t)]}},{key:"set",value:function set(t){return this.isValid?clone$1(this,{values:Object.assign(this.values,normalizeObject(t,Duration.normalizeUnit,[]))}):this}},{key:"reconfigure",value:function reconfigure(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locale,n=t.numberingSystem,r=t.conversionAccuracy,i=this.loc.clone({locale:e,numberingSystem:n}),o={loc:i};return r&&(o.conversionAccuracy=r),clone$1(this,o)}},{key:"as",value:function as(t){return this.isValid?this.shiftTo(t).get(t):NaN}},{key:"normalize",value:function normalize(){if(!this.isValid)return this;var t=this.toObject();return normalizeValues(this.matrix,t),clone$1(this,{values:t},!0)}},{key:"shiftTo",value:function shiftTo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!this.isValid)return this;if(0===e.length)return this;e=e.map((function(t){return Duration.normalizeUnit(t)}));var r,i={},o={},a=this.toObject();normalizeValues(this.matrix,a);var s=!0,u=!1,l=void 0;try{for(var c,h=js[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value;if(e.indexOf(f)>=0){r=f;var d=0;for(var p in o)d+=this.matrix[p][f]*o[p],o[p]=0;isNumber(a[f])&&(d+=a[f]);var y=Math.trunc(d);for(var m in i[f]=y,o[f]=d-y,a)js.indexOf(m)>js.indexOf(f)&&convert(this.matrix,a,m,i,f)}else isNumber(a[f])&&(o[f]=a[f])}}catch(t){u=!0,l=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}for(var g in o)0!==o[g]&&(i[r]+=g===r?o[g]:o[g]/this.matrix[r][g]);return clone$1(this,{values:i},!0).normalize()}},{key:"negate",value:function negate(){if(!this.isValid)return this;for(var t={},e=0,n=Object.keys(this.values);e<n.length;e++){var r=n[e];t[r]=-this.values[r]}return clone$1(this,{values:t},!0)}},{key:"equals",value:function equals(t){if(!this.isValid||!t.isValid)return!1;if(!this.loc.equals(t.loc))return!1;var e=!0,n=!1,r=void 0;try{for(var i,o=js[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(this.values[a]!==t.values[a])return!1}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return!0}},{key:"locale",get:function get(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function get(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function get(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function get(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function get(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function get(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function get(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function get(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function get(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function get(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function get(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function get(){return null===this.invalid}},{key:"invalidReason",get:function get(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function get(){return this.invalid?this.invalid.explanation:null}}],[{key:"fromMillis",value:function fromMillis(t,e){return Duration.fromObject(Object.assign({milliseconds:t},e))}},{key:"fromObject",value:function fromObject(t){if(null==t||"object"!==_typeof(t))throw new ko("Duration.fromObject: argument expected to be an object, got ".concat(null===t?"null":_typeof(t)));return new Duration({values:normalizeObject(t,Duration.normalizeUnit,["locale","numberingSystem","conversionAccuracy","zone"]),loc:os.fromObject(t),conversionAccuracy:t.conversionAccuracy})}},{key:"fromISO",value:function fromISO(t,e){var n=_slicedToArray(function parseISODuration(t){return parse(t,[ps,extractISODuration])}(t),1)[0];if(n){var r=Object.assign(n,e);return Duration.fromObject(r)}return Duration.invalid("unparsable",'the input "'.concat(t,"\" can't be parsed as ISO 8601"))}},{key:"invalid",value:function invalid(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)throw new ko("need to specify a reason the Duration is invalid");var invalid=t instanceof _a?t:new _a(t,e);if($a.throwOnInvalid)throw new Mo(invalid);return new Duration({invalid:invalid})}},{key:"normalizeUnit",value:function normalizeUnit(t){var e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t?t.toLowerCase():t];if(!e)throw new xo(t);return e}},{key:"isDuration",value:function isDuration(t){return t&&t.isLuxonDuration||!1}}]),Duration}();function friendlyDuration(t){if(isNumber(t))return Ns.fromMillis(t);if(Ns.isDuration(t))return t;if("object"===_typeof(t))return Ns.fromObject(t);throw new ko("Unknown duration argument ".concat(t," of type ").concat(_typeof(t)))}var Fs="Invalid Interval";function validateStartEnd(t,e){return t&&t.isValid?e&&e.isValid?e<t?Us.invalid("end before start","The end of an interval must be after its start, but you had start=".concat(t.toISO()," and end=").concat(e.toISO())):null:Us.invalid("missing or invalid end"):Us.invalid("missing or invalid start")}var Us=function(){function Interval(t){_classCallCheck(this,Interval),this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}return _createClass(Interval,[{key:"length",value:function length(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds";return this.isValid?this.toDuration.apply(this,[t]).get(t):NaN}},{key:"count",value:function count(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds";if(!this.isValid)return NaN;var e=this.start.startOf(t),n=this.end.startOf(t);return Math.floor(n.diff(e,t).get(t))+1}},{key:"hasSame",value:function hasSame(t){return!!this.isValid&&this.e.minus(1).hasSame(this.s,t)}},{key:"isEmpty",value:function isEmpty(){return this.s.valueOf()===this.e.valueOf()}},{key:"isAfter",value:function isAfter(t){return!!this.isValid&&this.s>t}},{key:"isBefore",value:function isBefore(t){return!!this.isValid&&this.e<=t}},{key:"contains",value:function contains(t){return!!this.isValid&&(this.s<=t&&this.e>t)}},{key:"set",value:function set(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=t.end;return this.isValid?Interval.fromDateTimes(e||this.s,n||this.e):this}},{key:"splitAt",value:function splitAt(){var t=this;if(!this.isValid)return[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=n.map(friendlyDateTime).filter((function(e){return t.contains(e)})).sort(),o=[],a=this.s,s=0;a<this.e;){var u=i[s]||this.e,l=+u>+this.e?this.e:u;o.push(Interval.fromDateTimes(a,l)),a=l,s+=1}return o}},{key:"splitBy",value:function splitBy(t){var e=friendlyDuration(t);if(!this.isValid||!e.isValid||0===e.as("milliseconds"))return[];for(var n,r,i=this.s,o=[];i<this.e;)r=+(n=i.plus(e))>+this.e?this.e:n,o.push(Interval.fromDateTimes(i,r)),i=r;return o}},{key:"divideEqually",value:function divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}},{key:"overlaps",value:function overlaps(t){return this.e>t.s&&this.s<t.e}},{key:"abutsStart",value:function abutsStart(t){return!!this.isValid&&+this.e==+t.s}},{key:"abutsEnd",value:function abutsEnd(t){return!!this.isValid&&+t.e==+this.s}},{key:"engulfs",value:function engulfs(t){return!!this.isValid&&(this.s<=t.s&&this.e>=t.e)}},{key:"equals",value:function equals(t){return!(!this.isValid||!t.isValid)&&(this.s.equals(t.s)&&this.e.equals(t.e))}},{key:"intersection",value:function intersection(t){if(!this.isValid)return this;var e=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return e>n?null:Interval.fromDateTimes(e,n)}},{key:"union",value:function union(t){if(!this.isValid)return this;var e=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return Interval.fromDateTimes(e,n)}},{key:"difference",value:function difference(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Interval.xor([this].concat(n)).map((function(e){return t.intersection(e)})).filter((function(t){return t&&!t.isEmpty()}))}},{key:"toString",value:function toString(){return this.isValid?"[".concat(this.s.toISO()," – ").concat(this.e.toISO(),")"):Fs}},{key:"toISO",value:function toISO(t){return this.isValid?"".concat(this.s.toISO(t),"/").concat(this.e.toISO(t)):Fs}},{key:"toISODate",value:function toISODate(){return this.isValid?"".concat(this.s.toISODate(),"/").concat(this.e.toISODate()):Fs}},{key:"toISOTime",value:function toISOTime(t){return this.isValid?"".concat(this.s.toISOTime(t),"/").concat(this.e.toISOTime(t)):Fs}},{key:"toFormat",value:function toFormat(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.separator,r=void 0===n?" – ":n;return this.isValid?"".concat(this.s.toFormat(t)).concat(r).concat(this.e.toFormat(t)):Fs}},{key:"toDuration",value:function toDuration(t,e){return this.isValid?this.e.diff(this.s,t,e):Ns.invalid(this.invalidReason)}},{key:"mapEndpoints",value:function mapEndpoints(t){return Interval.fromDateTimes(t(this.s),t(this.e))}},{key:"start",get:function get(){return this.isValid?this.s:null}},{key:"end",get:function get(){return this.isValid?this.e:null}},{key:"isValid",get:function get(){return null===this.invalidReason}},{key:"invalidReason",get:function get(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function get(){return this.invalid?this.invalid.explanation:null}}],[{key:"invalid",value:function invalid(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)throw new ko("need to specify a reason the Interval is invalid");var invalid=t instanceof _a?t:new _a(t,e);if($a.throwOnInvalid)throw new Eo(invalid);return new Interval({invalid:invalid})}},{key:"fromDateTimes",value:function fromDateTimes(t,e){var n=friendlyDateTime(t),r=friendlyDateTime(e),i=validateStartEnd(n,r);return null==i?new Interval({start:n,end:r}):i}},{key:"after",value:function after(t,e){var n=friendlyDuration(e),r=friendlyDateTime(t);return Interval.fromDateTimes(r,r.plus(n))}},{key:"before",value:function before(t,e){var n=friendlyDuration(e),r=friendlyDateTime(t);return Interval.fromDateTimes(r.minus(n),r)}},{key:"fromISO",value:function fromISO(t,e){var n=_slicedToArray((t||"").split("/",2),2),r=n[0],i=n[1];if(r&&i){var o=ou.fromISO(r,e),a=ou.fromISO(i,e);if(o.isValid&&a.isValid)return Interval.fromDateTimes(o,a);if(o.isValid){var s=Ns.fromISO(i,e);if(s.isValid)return Interval.after(o,s)}else if(a.isValid){var u=Ns.fromISO(r,e);if(u.isValid)return Interval.before(a,u)}}return Interval.invalid("unparsable",'the input "'.concat(t,"\" can't be parsed asISO 8601"))}},{key:"isInterval",value:function isInterval(t){return t&&t.isLuxonInterval||!1}},{key:"merge",value:function merge(t){var e=t.sort((function(t,e){return t.s-e.s})).reduce((function(t,e){var n=_slicedToArray(t,2),r=n[0],i=n[1];return i?i.overlaps(e)||i.abutsStart(e)?[r,i.union(e)]:[r.concat([i]),e]:[r,e]}),[[],null]),n=_slicedToArray(e,2),r=n[0],i=n[1];return i&&r.push(i),r}},{key:"xor",value:function xor(t){var e,n=null,r=0,i=[],o=t.map((function(t){return[{time:t.s,type:"s"},{time:t.e,type:"e"}]})),a=(e=Array.prototype).concat.apply(e,_toConsumableArray(o)).sort((function(t,e){return t.time-e.time})),s=!0,u=!1,l=void 0;try{for(var c,h=a[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value;1===(r+="s"===f.type?1:-1)?n=f.time:(n&&+n!=+f.time&&i.push(Interval.fromDateTimes(n,f.time)),n=null)}}catch(t){u=!0,l=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}return Interval.merge(i)}}]),Interval}(),Vs=function(){function Info(){_classCallCheck(this,Info)}return _createClass(Info,null,[{key:"hasDST",value:function hasDST(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a.defaultZone,e=ou.local().setZone(t).set({month:12});return!t.universal&&e.offset!==e.set({month:6}).offset}},{key:"isValidIANAZone",value:function isValidIANAZone(t){return Va.isValidSpecifier(t)&&Va.isValidZone(t)}},{key:"normalizeZone",value:function normalizeZone$1(t){return normalizeZone(t,$a.defaultZone)}},{key:"months",value:function months(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.locale,r=void 0===n?null:n,i=e.numberingSystem,o=void 0===i?null:i,a=e.outputCalendar,s=void 0===a?"gregory":a;return os.create(r,o,s).months(t)}},{key:"monthsFormat",value:function monthsFormat(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.locale,r=void 0===n?null:n,i=e.numberingSystem,o=void 0===i?null:i,a=e.outputCalendar,s=void 0===a?"gregory":a;return os.create(r,o,s).months(t,!0)}},{key:"weekdays",value:function weekdays(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.locale,r=void 0===n?null:n,i=e.numberingSystem,o=void 0===i?null:i;return os.create(r,o,null).weekdays(t)}},{key:"weekdaysFormat",value:function weekdaysFormat(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.locale,r=void 0===n?null:n,i=e.numberingSystem,o=void 0===i?null:i;return os.create(r,o,null).weekdays(t,!0)}},{key:"meridiems",value:function meridiems(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locale,n=void 0===e?null:e;return os.create(n).meridiems()}},{key:"eras",value:function eras(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"short",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.locale,r=void 0===n?null:n;return os.create(r,null,"gregory").eras(t)}},{key:"features",value:function features(){var t=!1,e=!1,n=!1,r=!1;if(hasIntl()){t=!0,e=hasFormatToParts(),r=hasRelative();try{n="America/New_York"===new Intl.DateTimeFormat("en",{timeZone:"America/New_York"}).resolvedOptions().timeZone}catch(t){n=!1}}return{intl:t,intlTokens:e,zones:n,relative:r}}}]),Info}();function dayDiff(t,e){var n=function utcDayStart(t){return t.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},r=n(e)-n(t);return Math.floor(Ns.fromMillis(r).as("days"))}function _diff(t,e,n,r){var i=function highOrderDiffs(t,e,n){for(var r,i,o={},a=0,s=[["years",function(t,e){return e.year-t.year}],["months",function(t,e){return e.month-t.month+12*(e.year-t.year)}],["weeks",function(t,e){var n=dayDiff(t,e);return(n-n%7)/7}],["days",dayDiff]];a<s.length;a++){var u=_slicedToArray(s[a],2),l=u[0],c=u[1];if(n.indexOf(l)>=0){r=l;var h=c(t,e);(i=t.plus(_defineProperty({},l,h)))>e?(t=t.plus(_defineProperty({},l,h-1)),h-=1):t=i,o[l]=h}}return[t,o,i,r]}(t,e,n),o=_slicedToArray(i,4),a=o[0],s=o[1],u=o[2],l=o[3],c=e-a,h=n.filter((function(t){return["hours","minutes","seconds","milliseconds"].indexOf(t)>=0}));0===h.length&&(u<e&&(u=a.plus(_defineProperty({},l,1))),u!==a&&(s[l]=(s[l]||0)+c/(u-a)));var f,d=Ns.fromObject(Object.assign(s,r));return h.length>0?(f=Ns.fromMillis(c,r)).shiftTo.apply(f,_toConsumableArray(h)).plus(d):d}var zs=[].join,Gs=d!=Object,qs=sloppyArrayMethod("join",",");_export({target:"Array",proto:!0,forced:Gs||qs},{join:function join(t){return zs.call(toIndexedObject(this),void 0===t?",":t)}}),fixRegexpWellKnownSymbolLogic("search",1,(function(t,e,n){return[function search(e){var n=requireObjectCoercible(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=anObject(t),o=String(this),a=i.lastIndex;Po(a,0)||(i.lastIndex=0);var s=regexpExecAbstract(i,o);return Po(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var Ws={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Ks={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Bs=Ws.hanidec.replace(/[\[|\]]/g,"").split("");function digitRegex(t){var e=t.numberingSystem,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new RegExp("".concat(Ws[e||"latn"]).concat(n))}var Ys="missing Intl.DateTimeFormat.formatToParts support";function intUnit(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{regex:t,deser:function deser(t){var n=_slicedToArray(t,1)[0];return e(function parseDigits(t){var e=parseInt(t,10);if(isNaN(e)){e="";for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(-1!==t[n].search(Ws.hanidec))e+=Bs.indexOf(t[n]);else for(var i in Ks){var o=_slicedToArray(Ks[i],2),a=o[0],s=o[1];r>=a&&r<=s&&(e+=r-a)}}return parseInt(e,10)}return e}(n))}}}function fixListRegex(t){return t.replace(/\./,"\\.?")}function stripInsensitivities(t){return t.replace(/\./,"").toLowerCase()}function oneOf(t,e){return null===t?null:{regex:RegExp(t.map(fixListRegex).join("|")),deser:function deser(n){var r=_slicedToArray(n,1)[0];return t.findIndex((function(t){return stripInsensitivities(r)===stripInsensitivities(t)}))+e}}}function offset(t,e){return{regex:t,deser:function deser(t){var e=_slicedToArray(t,3);return signedOffset(e[1],e[2])},groups:e}}function simple(t){return{regex:t,deser:function deser(t){return _slicedToArray(t,1)[0]}}}var Zs={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};var Hs=null;function maybeExpandMacroToken(t,e){if(t.literal)return t;var n=va.macroTokenToFormatOpts(t.val);if(!n)return t;var r=va.create(e,n).formatDateTimeParts(function getDummyDateTime(){return Hs||(Hs=ou.fromMillis(1555555555555)),Hs}()).map((function(t){return function tokenForPart(t,e,n){var r=t.type,i=t.value;if("literal"===r)return{literal:!0,val:i};var o=n[r],a=Zs[r];return"object"===_typeof(a)&&(a=a[o]),a?{literal:!1,val:a}:void 0}(t,0,n)}));return r.includes(void 0)?t:r}function explainFromTokens(t,e,n){var r=function expandMacroTokens(t,e){var n;return(n=Array.prototype).concat.apply(n,_toConsumableArray(t.map((function(t){return maybeExpandMacroToken(t,e)}))))}(va.parseFormat(n),t),i=r.map((function(e){return function unitForToken(t,e){var n=digitRegex(e),r=digitRegex(e,"{2}"),i=digitRegex(e,"{3}"),o=digitRegex(e,"{4}"),a=digitRegex(e,"{6}"),s=digitRegex(e,"{1,2}"),u=digitRegex(e,"{1,3}"),l=digitRegex(e,"{1,6}"),c=digitRegex(e,"{1,9}"),h=digitRegex(e,"{2,4}"),f=digitRegex(e,"{4,6}"),d=function literal(t){return{regex:RegExp((e=t.val,e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:function deser(t){return _slicedToArray(t,1)[0]},literal:!0};var e},p=function unitate(p){if(t.literal)return d(p);switch(p.val){case"G":return oneOf(e.eras("short",!1),0);case"GG":return oneOf(e.eras("long",!1),0);case"y":return intUnit(l);case"yy":return intUnit(h,untruncateYear);case"yyyy":return intUnit(o);case"yyyyy":return intUnit(f);case"yyyyyy":return intUnit(a);case"M":return intUnit(s);case"MM":return intUnit(r);case"MMM":return oneOf(e.months("short",!0,!1),1);case"MMMM":return oneOf(e.months("long",!0,!1),1);case"L":return intUnit(s);case"LL":return intUnit(r);case"LLL":return oneOf(e.months("short",!1,!1),1);case"LLLL":return oneOf(e.months("long",!1,!1),1);case"d":return intUnit(s);case"dd":return intUnit(r);case"o":return intUnit(u);case"ooo":return intUnit(i);case"HH":return intUnit(r);case"H":return intUnit(s);case"hh":return intUnit(r);case"h":return intUnit(s);case"mm":return intUnit(r);case"m":case"q":return intUnit(s);case"qq":return intUnit(r);case"s":return intUnit(s);case"ss":return intUnit(r);case"S":return intUnit(u);case"SSS":return intUnit(i);case"u":return simple(c);case"a":return oneOf(e.meridiems(),0);case"kkkk":return intUnit(o);case"kk":return intUnit(h,untruncateYear);case"W":return intUnit(s);case"WW":return intUnit(r);case"E":case"c":return intUnit(n);case"EEE":return oneOf(e.weekdays("short",!1,!1),1);case"EEEE":return oneOf(e.weekdays("long",!1,!1),1);case"ccc":return oneOf(e.weekdays("short",!0,!1),1);case"cccc":return oneOf(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return offset(new RegExp("([+-]".concat(s.source,")(?::(").concat(r.source,"))?")),2);case"ZZZ":return offset(new RegExp("([+-]".concat(s.source,")(").concat(r.source,")?")),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);default:return d(p)}}(t)||{invalidReason:Ys};return p.token=t,p}(e,t)})),o=i.find((function(t){return t.invalidReason}));if(o)return{input:e,tokens:r,invalidReason:o.invalidReason};var a=_slicedToArray(function buildRegex(t){var e=t.map((function(t){return t.regex})).reduce((function(t,e){return"".concat(t,"(").concat(e.source,")")}),"");return["^".concat(e,"$"),t]}(i),2),s=a[0],u=a[1],l=RegExp(s,"i"),c=_slicedToArray(function match$1(t,e,n){var r=t.match(e);if(r){var i={},o=1;for(var a in n)if(hasOwnProperty$1(n,a)){var s=n[a],u=s.groups?s.groups+1:1;!s.literal&&s.token&&(i[s.token.val[0]]=s.deser(r.slice(o,o+u))),o+=u}return[r,i]}return[r,{}]}(e,l,u),2),h=c[0],f=c[1],d=_slicedToArray(f?function dateTimeFromMatches(t){var e;return e=isUndefined(t.Z)?isUndefined(t.z)?null:Va.create(t.z):new qa(t.Z),isUndefined(t.q)||(t.M=3*(t.q-1)+1),isUndefined(t.h)||(t.h<12&&1===t.a?t.h+=12:12===t.h&&0===t.a&&(t.h=0)),0===t.G&&t.y&&(t.y=-t.y),isUndefined(t.u)||(t.S=parseMillis(t.u)),[Object.keys(t).reduce((function(e,n){var r=function toField(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(n);return r&&(e[r]=t[n]),e}),{}),e]}(f):[null,null],2);return{input:e,tokens:r,regex:l,rawMatches:h,matches:f,result:d[0],zone:d[1]}}function parseFromTokens(t,e,n){var r=explainFromTokens(t,e,n);return[r.result,r.zone,r.invalidReason]}var Xs=[0,31,59,90,120,151,181,212,243,273,304,334],$s=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(t,e){return new _a("unit out of range","you specified ".concat(e," (of type ").concat(_typeof(e),") as a ").concat(t,", which is invalid"))}function dayOfWeek(t,e,n){var r=new Date(Date.UTC(t,e-1,n)).getUTCDay();return 0===r?7:r}function computeOrdinal(t,e,n){return n+(isLeapYear(t)?$s:Xs)[e-1]}function uncomputeOrdinal(t,e){var n=isLeapYear(t)?$s:Xs,r=n.findIndex((function(t){return t<e}));return{month:r+1,day:e-n[r]}}function gregorianToWeek(t){var e,n=t.year,r=t.month,i=t.day,o=computeOrdinal(n,r,i),a=dayOfWeek(n,r,i),s=Math.floor((o-a+10)/7);return s<1?s=weeksInWeekYear(e=n-1):s>weeksInWeekYear(n)?(e=n+1,s=1):e=n,Object.assign({weekYear:e,weekNumber:s,weekday:a},timeObject(t))}function weekToGregorian(t){var e,n=t.weekYear,r=t.weekNumber,i=t.weekday,o=dayOfWeek(n,1,4),a=daysInYear(n),s=7*r+i-o-3;s<1?s+=daysInYear(e=n-1):s>a?(e=n+1,s-=daysInYear(n)):e=n;var u=uncomputeOrdinal(e,s),l=u.month,c=u.day;return Object.assign({year:e,month:l,day:c},timeObject(t))}function gregorianToOrdinal(t){var e=t.year,n=computeOrdinal(e,t.month,t.day);return Object.assign({year:e,ordinal:n},timeObject(t))}function ordinalToGregorian(t){var e=t.year,n=uncomputeOrdinal(e,t.ordinal),r=n.month,i=n.day;return Object.assign({year:e,month:r,day:i},timeObject(t))}function hasInvalidGregorianData(t){var e=isInteger(t.year),n=integerBetween(t.month,1,12),r=integerBetween(t.day,1,daysInMonth(t.year,t.month));return e?n?!r&&unitOutOfRange("day",t.day):unitOutOfRange("month",t.month):unitOutOfRange("year",t.year)}function hasInvalidTimeData(t){var e=t.hour,n=t.minute,r=t.second,i=t.millisecond,o=integerBetween(e,0,23)||24===e&&0===n&&0===r&&0===i,a=integerBetween(n,0,59),s=integerBetween(r,0,59),u=integerBetween(i,0,999);return o?a?s?!u&&unitOutOfRange("millisecond",i):unitOutOfRange("second",r):unitOutOfRange("minute",n):unitOutOfRange("hour",e)}var Qs="Invalid DateTime";function unsupportedZone(t){return new _a("unsupported zone",'the zone "'.concat(t.name,'" is not supported'))}function possiblyCachedWeekData(t){return null===t.weekData&&(t.weekData=gregorianToWeek(t.c)),t.weekData}function clone$2(t,e){var n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ou(Object.assign({},n,e,{old:n}))}function fixOffset(t,e,n){var r=t-60*e*1e3,i=n.offset(r);if(e===i)return[r,e];r-=60*(i-e)*1e3;var o=n.offset(r);return i===o?[r,i]:[t-60*Math.min(i,o)*1e3,Math.max(i,o)]}function tsToObj(t,e){var n=new Date(t+=60*e*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function objToTS(t,e,n){return fixOffset(objToLocalTS(t),e,n)}function adjustTime(t,e){var n,r=Object.keys(e.values);-1===r.indexOf("milliseconds")&&r.push("milliseconds"),e=(n=e).shiftTo.apply(n,_toConsumableArray(r));var i=t.o,o=t.c.year+e.years,a=t.c.month+e.months+3*e.quarters,s=Object.assign({},t.c,{year:o,month:a,day:Math.min(t.c.day,daysInMonth(o,a))+e.days+7*e.weeks}),u=Ns.fromObject({hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=_slicedToArray(fixOffset(objToLocalTS(s),i,t.zone),2),c=l[0],h=l[1];return 0!==u&&(c+=u,h=t.zone.offset(c)),{ts:c,o:h}}function parseDataToDateTime(t,e,n,r,i){var o=n.setZone,a=n.zone;if(t&&0!==Object.keys(t).length){var s=e||a,u=ou.fromObject(Object.assign(t,n,{zone:s,setZone:void 0}));return o?u:u.setZone(a)}return ou.invalid(new _a("unparsable",'the input "'.concat(i,"\" can't be parsed as ").concat(r)))}function toTechFormat(t,e){return t.isValid?va.create(os.create("en-US"),{allowZ:!0,forceSimple:!0}).formatDateTimeFromString(t,e):null}function toTechTimeFormat(t,e){var n=e.suppressSeconds,r=void 0!==n&&n,i=e.suppressMilliseconds,o=void 0!==i&&i,a=e.includeOffset,s=e.includeZone,u=void 0!==s&&s,l=e.spaceZone,c=void 0!==l&&l,h="HH:mm";return r&&0===t.second&&0===t.millisecond||(h+=":ss",o&&0===t.millisecond||(h+=".SSS")),(u||a)&&c&&(h+=" "),u?h+="z":a&&(h+="ZZ"),toTechFormat(t,h)}var Js={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},tu={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},eu={ordinal:1,hour:0,minute:0,second:0,millisecond:0},nu=["year","month","day","hour","minute","second","millisecond"],ru=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],iu=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(t){var e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new xo(t);return e}function quickDT(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=nu[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;isUndefined(t[s])&&(t[s]=Js[s])}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=hasInvalidGregorianData(t)||hasInvalidTimeData(t);if(u)return ou.invalid(u);var l=$a.now(),c=_slicedToArray(objToTS(t,e.offset(l),e),2),h=c[0],f=c[1];return new ou({ts:h,zone:e,o:f})}function diffRelative(t,e,n){var r=!!isUndefined(n.round)||n.round,i=function format(t,i){return t=roundTo(t,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(t,i)},o=function differ(r){return n.calendary?e.hasSame(t,r)?0:e.startOf(r).diff(t.startOf(r),r).get(r):e.diff(t,r).get(r)};if(n.unit)return i(o(n.unit),n.unit);var a=!0,s=!1,u=void 0;try{for(var l,c=n.units[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value,f=o(h);if(Math.abs(f)>=1)return i(f,h)}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}return i(0,n.units[n.units.length-1])}var ou=function(){function DateTime(t){_classCallCheck(this,DateTime);var e=t.zone||$a.defaultZone,n=t.invalid||(Number.isNaN(t.ts)?new _a("invalid input"):null)||(e.isValid?null:unsupportedZone(e));this.ts=isUndefined(t.ts)?$a.now():t.ts;var r=null,i=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(e)){var o=[t.old.c,t.old.o];r=o[0],i=o[1]}else r=tsToObj(this.ts,e.offset(this.ts)),r=(n=Number.isNaN(r.year)?new _a("invalid input"):null)?null:r,i=n?null:e.offset(this.ts);this._zone=e,this.loc=t.loc||os.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}return _createClass(DateTime,[{key:"get",value:function get(t){return this[t]}},{key:"resolvedLocaleOpts",value:function resolvedLocaleOpts(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=va.create(this.loc.clone(t),t).resolvedOptions(this),n=e.locale,r=e.numberingSystem,i=e.calendar;return{locale:n,numberingSystem:r,outputCalendar:i}}},{key:"toUTC",value:function toUTC(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setZone(qa.instance(t),e)}},{key:"toLocal",value:function toLocal(){return this.setZone($a.defaultZone)}},{key:"setZone",value:function setZone(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keepLocalTime,r=void 0!==n&&n,i=e.keepCalendarTime,o=void 0!==i&&i;if((t=normalizeZone(t,$a.defaultZone)).equals(this.zone))return this;if(t.isValid){var a=this.ts;if(r||o){var s=this.o-t.offset(this.ts),u=this.toObject(),l=objToTS(u,s,t),c=_slicedToArray(l,1);a=c[0]}return clone$2(this,{ts:a,zone:t})}return DateTime.invalid(unsupportedZone(t))}},{key:"reconfigure",value:function reconfigure(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locale,n=t.numberingSystem,r=t.outputCalendar,i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return clone$2(this,{loc:i})}},{key:"setLocale",value:function setLocale(t){return this.reconfigure({locale:t})}},{key:"set",value:function set(t){if(!this.isValid)return this;var e,n=normalizeObject(t,normalizeUnit,[]);!isUndefined(n.weekYear)||!isUndefined(n.weekNumber)||!isUndefined(n.weekday)?e=weekToGregorian(Object.assign(gregorianToWeek(this.c),n)):isUndefined(n.ordinal)?(e=Object.assign(this.toObject(),n),isUndefined(n.day)&&(e.day=Math.min(daysInMonth(e.year,e.month),e.day))):e=ordinalToGregorian(Object.assign(gregorianToOrdinal(this.c),n));var r=_slicedToArray(objToTS(e,this.o,this.zone),2);return clone$2(this,{ts:r[0],o:r[1]})}},{key:"plus",value:function plus(t){return this.isValid?clone$2(this,adjustTime(this,friendlyDuration(t))):this}},{key:"minus",value:function minus(t){return this.isValid?clone$2(this,adjustTime(this,friendlyDuration(t).negate())):this}},{key:"startOf",value:function startOf(t){if(!this.isValid)return this;var e={},n=Ns.normalizeUnit(t);switch(n){case"years":e.month=1;case"quarters":case"months":e.day=1;case"weeks":case"days":e.hour=0;case"hours":e.minute=0;case"minutes":e.second=0;case"seconds":e.millisecond=0}if("weeks"===n&&(e.weekday=1),"quarters"===n){var r=Math.ceil(this.month/3);e.month=3*(r-1)+1}return this.set(e)}},{key:"endOf",value:function endOf(t){return this.isValid?this.plus(_defineProperty({},t,1)).startOf(t).minus(1):this}},{key:"toFormat",value:function toFormat(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isValid?va.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,t):Qs}},{key:"toLocaleString",value:function toLocaleString(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao;return this.isValid?va.create(this.loc.clone(t),t).formatDateTime(this):Qs}},{key:"toLocaleParts",value:function toLocaleParts(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?va.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}},{key:"toISO",value:function toISO(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?"".concat(this.toISODate(),"T").concat(this.toISOTime(t)):null}},{key:"toISODate",value:function toISODate(){var t="yyyy-MM-dd";return this.year>9999&&(t="+"+t),toTechFormat(this,t)}},{key:"toISOWeekDate",value:function toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}},{key:"toISOTime",value:function toISOTime(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.suppressMilliseconds,n=void 0!==e&&e,r=t.suppressSeconds,i=void 0!==r&&r,o=t.includeOffset,a=void 0===o||o;return toTechTimeFormat(this,{suppressSeconds:i,suppressMilliseconds:n,includeOffset:a})}},{key:"toRFC2822",value:function toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ")}},{key:"toHTTP",value:function toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}},{key:"toSQLDate",value:function toSQLDate(){return toTechFormat(this,"yyyy-MM-dd")}},{key:"toSQLTime",value:function toSQLTime(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.includeOffset,n=void 0===e||e,r=t.includeZone,i=void 0!==r&&r;return toTechTimeFormat(this,{includeOffset:n,includeZone:i,spaceZone:!0})}},{key:"toSQL",value:function toSQL(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?"".concat(this.toSQLDate()," ").concat(this.toSQLTime(t)):null}},{key:"toString",value:function toString(){return this.isValid?this.toISO():Qs}},{key:"valueOf",value:function valueOf(){return this.toMillis()}},{key:"toMillis",value:function toMillis(){return this.isValid?this.ts:NaN}},{key:"toSeconds",value:function toSeconds(){return this.isValid?this.ts/1e3:NaN}},{key:"toJSON",value:function toJSON(){return this.toISO()}},{key:"toBSON",value:function toBSON(){return this.toJSDate()}},{key:"toObject",value:function toObject(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return{};var e=Object.assign({},this.c);return t.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}},{key:"toJSDate",value:function toJSDate(){return new Date(this.isValid?this.ts:NaN)}},{key:"diff",value:function diff(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.isValid||!t.isValid)return Ns.invalid(this.invalid||t.invalid,"created by diffing an invalid DateTime");var r=Object.assign({locale:this.locale,numberingSystem:this.numberingSystem},n),i=maybeArray(e).map(Ns.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,s=o?t:this,u=_diff(a,s,i,r);return o?u.negate():u}},{key:"diffNow",value:function diffNow(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"milliseconds",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.diff(DateTime.local(),t,e)}},{key:"until",value:function until(t){return this.isValid?Us.fromDateTimes(this,t):this}},{key:"hasSame",value:function hasSame(t,e){if(!this.isValid)return!1;if("millisecond"===e)return this.valueOf()===t.valueOf();var n=t.valueOf();return this.startOf(e)<=n&&n<=this.endOf(e)}},{key:"equals",value:function equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}},{key:"toRelative",value:function toRelative(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isValid)return null;var e=t.base||DateTime.fromObject({zone:this.zone}),n=t.padding?this<e?-t.padding:t.padding:0;return diffRelative(e,this.plus(n),Object.assign(t,{numeric:"always",units:["years","months","days","hours","minutes","seconds"]}))}},{key:"toRelativeCalendar",value:function toRelativeCalendar(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isValid?diffRelative(t.base||DateTime.fromObject({zone:this.zone}),this,Object.assign(t,{numeric:"auto",units:["years","months","days"],calendary:!0})):null}},{key:"isValid",get:function get(){return null===this.invalid}},{key:"invalidReason",get:function get(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function get(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function get(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function get(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function get(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function get(){return this._zone}},{key:"zoneName",get:function get(){return this.isValid?this.zone.name:null}},{key:"year",get:function get(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function get(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function get(){return this.isValid?this.c.month:NaN}},{key:"day",get:function get(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function get(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function get(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function get(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function get(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function get(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}},{key:"weekNumber",get:function get(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}},{key:"weekday",get:function get(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}},{key:"ordinal",get:function get(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}},{key:"monthShort",get:function get(){return this.isValid?Vs.months("short",{locale:this.locale})[this.month-1]:null}},{key:"monthLong",get:function get(){return this.isValid?Vs.months("long",{locale:this.locale})[this.month-1]:null}},{key:"weekdayShort",get:function get(){return this.isValid?Vs.weekdays("short",{locale:this.locale})[this.weekday-1]:null}},{key:"weekdayLong",get:function get(){return this.isValid?Vs.weekdays("long",{locale:this.locale})[this.weekday-1]:null}},{key:"offset",get:function get(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function get(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function get(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function get(){return this.isValid?this.zone.universal:null}},{key:"isInDST",get:function get(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function get(){return isLeapYear(this.year)}},{key:"daysInMonth",get:function get(){return daysInMonth(this.year,this.month)}},{key:"daysInYear",get:function get(){return this.isValid?daysInYear(this.year):NaN}},{key:"weeksInWeekYear",get:function get(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}}],[{key:"local",value:function local(t,e,n,r,i,o,a){return isUndefined(t)?new DateTime({ts:$a.now()}):quickDT({year:t,month:e,day:n,hour:r,minute:i,second:o,millisecond:a},$a.defaultZone)}},{key:"utc",value:function utc(t,e,n,r,i,o,a){return isUndefined(t)?new DateTime({ts:$a.now(),zone:qa.utcInstance}):quickDT({year:t,month:e,day:n,hour:r,minute:i,second:o,millisecond:a},qa.utcInstance)}},{key:"fromJSDate",value:function fromJSDate(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=isDate(t)?t.valueOf():NaN;if(Number.isNaN(n))return DateTime.invalid("invalid input");var r=normalizeZone(e.zone,$a.defaultZone);return r.isValid?new DateTime({ts:n,zone:r,loc:os.fromObject(e)}):DateTime.invalid(unsupportedZone(r))}},{key:"fromMillis",value:function fromMillis(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isNumber(t))return t<-864e13||t>864e13?DateTime.invalid("Timestamp out of range"):new DateTime({ts:t,zone:normalizeZone(e.zone,$a.defaultZone),loc:os.fromObject(e)});throw new ko("fromMillis requires a numerical input")}},{key:"fromSeconds",value:function fromSeconds(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isNumber(t))return new DateTime({ts:1e3*t,zone:normalizeZone(e.zone,$a.defaultZone),loc:os.fromObject(e)});throw new ko("fromSeconds requires a numerical input")}},{key:"fromObject",value:function fromObject(t){var e=normalizeZone(t.zone,$a.defaultZone);if(!e.isValid)return DateTime.invalid(unsupportedZone(e));var n=$a.now(),r=e.offset(n),i=normalizeObject(t,normalizeUnit,["zone","locale","outputCalendar","numberingSystem"]),o=!isUndefined(i.ordinal),a=!isUndefined(i.year),s=!isUndefined(i.month)||!isUndefined(i.day),u=a||s,l=i.weekYear||i.weekNumber,c=os.fromObject(t);if((u||o)&&l)throw new Oo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&o)throw new Oo("Can't mix ordinal dates with month/day");var h,f,d=l||i.weekday&&!u,p=tsToObj(n,r);d?(h=ru,f=tu,p=gregorianToWeek(p)):o?(h=iu,f=eu,p=gregorianToOrdinal(p)):(h=nu,f=Js);var y=!1,m=!0,g=!1,v=void 0;try{for(var _,b=h[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var w=_.value;isUndefined(i[w])?i[w]=y?f[w]:p[w]:y=!0}}catch(t){g=!0,v=t}finally{try{m||null==b.return||b.return()}finally{if(g)throw v}}var T=(d?function hasInvalidWeekData(t){var e=isInteger(t.weekYear),n=integerBetween(t.weekNumber,1,weeksInWeekYear(t.weekYear)),r=integerBetween(t.weekday,1,7);return e?n?!r&&unitOutOfRange("weekday",t.weekday):unitOutOfRange("week",t.week):unitOutOfRange("weekYear",t.weekYear)}(i):o?function hasInvalidOrdinalData(t){var e=isInteger(t.year),n=integerBetween(t.ordinal,1,daysInYear(t.year));return e?!n&&unitOutOfRange("ordinal",t.ordinal):unitOutOfRange("year",t.year)}(i):hasInvalidGregorianData(i))||hasInvalidTimeData(i);if(T)return DateTime.invalid(T);var S=_slicedToArray(objToTS(d?weekToGregorian(i):o?ordinalToGregorian(i):i,r,e),2),E=new DateTime({ts:S[0],zone:e,o:S[1],loc:c});return i.weekday&&u&&t.weekday!==E.weekday?DateTime.invalid("mismatched weekday","you can't specify both a weekday of ".concat(i.weekday," and a date of ").concat(E.toISO())):E}},{key:"fromISO",value:function fromISO(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=parseISODate(t),r=_slicedToArray(n,2),i=r[0],o=r[1];return parseDataToDateTime(i,o,e,"ISO 8601",t)}},{key:"fromRFC2822",value:function fromRFC2822(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=parseRFC2822Date(t),r=_slicedToArray(n,2),i=r[0],o=r[1];return parseDataToDateTime(i,o,e,"RFC 2822",t)}},{key:"fromHTTP",value:function fromHTTP(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=parseHTTPDate(t),r=_slicedToArray(n,2),i=r[0],o=r[1];return parseDataToDateTime(i,o,e,"HTTP",e)}},{key:"fromFormat",value:function fromFormat(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(isUndefined(t)||isUndefined(e))throw new ko("fromFormat requires an input string and a format");var r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,a=void 0===o?null:o,s=os.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0}),u=parseFromTokens(s,t,e),l=_slicedToArray(u,3),c=l[0],h=l[1],f=l[2];return f?DateTime.invalid(f):parseDataToDateTime(c,h,n,"format ".concat(e),t)}},{key:"fromString",value:function fromString(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return DateTime.fromFormat(t,e,n)}},{key:"fromSQL",value:function fromSQL(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=parseSQL(t),r=_slicedToArray(n,2),i=r[0],o=r[1];return parseDataToDateTime(i,o,e,"SQL",t)}},{key:"invalid",value:function invalid(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)throw new ko("need to specify a reason the DateTime is invalid");var invalid=t instanceof _a?t:new _a(t,e);if($a.throwOnInvalid)throw new So(invalid);return new DateTime({invalid:invalid})}},{key:"isDateTime",value:function isDateTime(t){return t&&t.isLuxonDateTime||!1}},{key:"min",value:function min(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.every(DateTime.isDateTime))throw new ko("min requires all arguments be DateTimes");return bestBy(e,(function(t){return t.valueOf()}),Math.min)}},{key:"max",value:function max(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.every(DateTime.isDateTime))throw new ko("max requires all arguments be DateTimes");return bestBy(e,(function(t){return t.valueOf()}),Math.max)}},{key:"fromFormatExplain",value:function fromFormatExplain(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.locale,i=void 0===r?null:r,o=n.numberingSystem,a=void 0===o?null:o,s=os.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});return explainFromTokens(s,t,e)}},{key:"fromStringExplain",value:function fromStringExplain(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return DateTime.fromFormatExplain(t,e,n)}},{key:"DATE_SHORT",get:function get(){return Ao}},{key:"DATE_MED",get:function get(){return jo}},{key:"DATE_FULL",get:function get(){return Do}},{key:"DATE_HUGE",get:function get(){return No}},{key:"TIME_SIMPLE",get:function get(){return Fo}},{key:"TIME_WITH_SECONDS",get:function get(){return Uo}},{key:"TIME_WITH_SHORT_OFFSET",get:function get(){return Vo}},{key:"TIME_WITH_LONG_OFFSET",get:function get(){return zo}},{key:"TIME_24_SIMPLE",get:function get(){return Go}},{key:"TIME_24_WITH_SECONDS",get:function get(){return qo}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function get(){return Wo}},{key:"TIME_24_WITH_LONG_OFFSET",get:function get(){return Ko}},{key:"DATETIME_SHORT",get:function get(){return Bo}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function get(){return Yo}},{key:"DATETIME_MED",get:function get(){return Zo}},{key:"DATETIME_MED_WITH_SECONDS",get:function get(){return Ho}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function get(){return Xo}},{key:"DATETIME_FULL",get:function get(){return $o}},{key:"DATETIME_FULL_WITH_SECONDS",get:function get(){return Qo}},{key:"DATETIME_HUGE",get:function get(){return Jo}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function get(){return ta}}]),DateTime}();function friendlyDateTime(t){if(ou.isDateTime(t))return t;if(t&&t.valueOf&&isNumber(t.valueOf()))return ou.fromJSDate(t);if(t&&"object"===_typeof(t))return ou.fromObject(t);throw new ko("Unknown datetime argument: ".concat(t,", of type ").concat(_typeof(t)))}var au=Object.freeze({__proto__:null,DateTime:ou,Duration:Ns,Interval:Us,Info:Vs,Zone:Ta,FixedOffsetZone:qa,IANAZone:Va,InvalidZone:Wa,LocalZone:Ea,Settings:$a}),su=function unwrapExports(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(createCommonjsModule((function(t,e){!function webpackUniversalModuleDefinition(e,n){t.exports=n(au)}("undefined"!=typeof self&&self,(function(t){return function(t){var e={};function __webpack_require__(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)__webpack_require__.d(n,r,function(e){return t[e]}.bind(null,r));return n},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(t,e,n){n.d(e,"f",(function(){return isPresent})),n.d(e,"e",(function(){return isNumber})),n.d(e,"d",(function(){return r})),n.d(e,"j",(function(){return range})),n.d(e,"k",(function(){return repeat})),n.d(e,"m",(function(){return toArray})),n.d(e,"h",(function(){return padStart})),n.d(e,"l",(function(){return split})),n.d(e,"i",(function(){return pymod})),n.d(e,"a",(function(){return divmod})),n.d(e,"b",(function(){return empty})),n.d(e,"g",(function(){return notEmpty})),n.d(e,"c",(function(){return includes}));var isPresent=function(t){return null!=t},isNumber=function(t){return"number"==typeof t},r=Array.isArray,range=function(t,e){void 0===e&&(e=t),1===arguments.length&&(e=t,t=0);for(var n=[],r=t;r<e;r++)n.push(r);return n},repeat=function(t,e){var n=0,i=[];if(r(t))for(;n<e;n++)i[n]=[].concat(t);else for(;n<e;n++)i[n]=t;return i},toArray=function(t){return r(t)?t:[t]};function padStart(t,e,n){void 0===n&&(n=" ");var r=String(t);return e>>=0,r.length>e?String(r):((e-=r.length)>n.length&&(n+=repeat(n,e/n.length)),n.slice(0,e)+String(r))}var split=function(t,e,n){var r=t.split(e);return n?r.slice(0,n).concat([r.slice(n).join(e)]):r},pymod=function(t,e){var n=t%e;return n*e<0?n+e:n},divmod=function(t,e){return{div:Math.floor(t/e),mod:pymod(t,e)}},empty=function(t){return!isPresent(t)||0===t.length},notEmpty=function(t){return!empty(t)},includes=function(t,e){return notEmpty(t)&&-1!==t.indexOf(e)}},function(t,e,n){n.r(e);var r,i,o=n(0);(i=r||(r={})).MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],i.ONE_DAY=864e5,i.MAXYEAR=9999,i.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),i.PY_WEEKDAYS=[6,0,1,2,3,4,5],i.getYearDay=function(t){var e=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());return Math.ceil((e.valueOf()-new Date(t.getUTCFullYear(),0,1).valueOf())/i.ONE_DAY)+1},i.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},i.isDate=function(t){return t instanceof Date},i.isValidDate=function(t){return i.isDate(t)&&!isNaN(t.getTime())},i.tzOffset=function(t){return 60*t.getTimezoneOffset()*1e3},i.daysBetween=function(t,e){var n=t.getTime()-i.tzOffset(t)-(e.getTime()-i.tzOffset(e));return Math.round(n/i.ONE_DAY)},i.toOrdinal=function(t){return i.daysBetween(t,i.ORDINAL_BASE)},i.fromOrdinal=function(t){return new Date(i.ORDINAL_BASE.getTime()+t*i.ONE_DAY)},i.getMonthDays=function(t){var e=t.getUTCMonth();return 1===e&&i.isLeapYear(t.getUTCFullYear())?29:i.MONTH_DAYS[e]},i.getWeekday=function(t){return i.PY_WEEKDAYS[t.getUTCDay()]},i.monthRange=function(t,e){var n=new Date(Date.UTC(t,e,1));return[i.getWeekday(n),i.getMonthDays(n)]},i.combine=function(t,e){return e=e||t,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},i.clone=function(t){return new Date(t.getTime())},i.cloneDates=function(t){for(var e=[],n=0;n<t.length;n++)e.push(i.clone(t[n]));return e},i.sort=function(t){t.sort((function(t,e){return t.getTime()-e.getTime()}))},i.timeToUntilString=function(t,e){void 0===e&&(e=!0);var n=new Date(t);return[Object(o.h)(n.getUTCFullYear().toString(),4,"0"),Object(o.h)(n.getUTCMonth()+1,2,"0"),Object(o.h)(n.getUTCDate(),2,"0"),"T",Object(o.h)(n.getUTCHours(),2,"0"),Object(o.h)(n.getUTCMinutes(),2,"0"),Object(o.h)(n.getUTCSeconds(),2,"0"),e?"Z":""].join("")},i.untilStringToDate=function(t){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/.exec(t);if(!e)throw new Error("Invalid UNTIL value: "+t);return new Date(Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[5],10)||0,parseInt(e[6],10)||0,parseInt(e[7],10)||0))};var a=r,s=function(){function IterResult(t,e){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=e,"between"===t?(this.maxDate=e.inc?e.before:new Date(e.before.getTime()-1),this.minDate=e.inc?e.after:new Date(e.after.getTime()+1)):"before"===t?this.maxDate=e.inc?e.dt:new Date(e.dt.getTime()-1):"after"===t&&(this.minDate=e.inc?e.dt:new Date(e.dt.getTime()+1))}return IterResult.prototype.accept=function(t){++this.total;var e=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if("between"===this.method){if(e)return!0;if(n)return!1}else if("before"===this.method){if(n)return!1}else if("after"===this.method)return!!e||(this.add(t),!1);return this.add(t)},IterResult.prototype.add=function(t){return this._result.push(t),!0},IterResult.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},IterResult.prototype.clone=function(){return new IterResult(this.method,this.args)},IterResult}(),extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function __extends(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var u,__assign=function(){return(__assign=Object.assign||function __assign(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},l=function(t){function CallbackIterResult(e,n,r){var i=t.call(this,e,n)||this;return i.iterator=r,i}return __extends(CallbackIterResult,t),CallbackIterResult.prototype.add=function(t){return!!this.iterator(t,this._result.length)&&(this._result.push(t),!0)},CallbackIterResult}(s);function freqIsDailyOrGreater(t){return t<u.HOURLY}!function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"}(u||(u={}));var c=["MO","TU","WE","TH","FR","SA","SU"],h=function(){function Weekday(t,e){if(0===e)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=e}return Weekday.prototype.nth=function(t){return this.n===t?this:new Weekday(this.weekday,t)},Weekday.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},Weekday.prototype.toString=function(){var t=c[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},Weekday.prototype.getJsWeekday=function(){return 6===this.weekday?0:this.weekday+1},Weekday}(),f=function(){function Time(t,e,n,r){this.hour=t,this.minute=e,this.second=n,this.millisecond=r||0}return Time.prototype.getHours=function(){return this.hour},Time.prototype.getMinutes=function(){return this.minute},Time.prototype.getSeconds=function(){return this.second},Time.prototype.getMilliseconds=function(){return this.millisecond},Time.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},Time}(),d=function(t){function DateTime(e,n,r,i,o,a,s){var u=t.call(this,i,o,a,s)||this;return u.year=e,u.month=n,u.day=r,u}return __extends(DateTime,t),DateTime.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},DateTime.prototype.getWeekday=function(){return r.getWeekday(new Date(this.getTime()))},DateTime.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},DateTime.prototype.getDay=function(){return this.day},DateTime.prototype.getMonth=function(){return this.month},DateTime.prototype.getYear=function(){return this.year},DateTime.prototype.addYears=function(t){this.year+=t},DateTime.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var e=Math.floor(this.month/12),n=Object(o.i)(this.month,12);this.month=n,this.year+=e,0===this.month&&(this.month=12,--this.year)}},DateTime.prototype.addWeekly=function(t,e){e>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-e))+7*t:this.day+=-(this.getWeekday()-e)+7*t,this.fixDay()},DateTime.prototype.addDaily=function(t){this.day+=t,this.fixDay()},DateTime.prototype.addHours=function(t,e,n){for(e&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var r=Object(o.a)(this.hour,24),i=r.div,a=r.mod;if(i&&(this.hour=a,this.addDaily(i)),Object(o.b)(n)||Object(o.c)(n,this.hour))break}},DateTime.prototype.addMinutes=function(t,e,n,r){for(e&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/t)*t);;){this.minute+=t;var i=Object(o.a)(this.minute,60),a=i.div,s=i.mod;if(a&&(this.minute=s,this.addHours(a,!1,n)),(Object(o.b)(n)||Object(o.c)(n,this.hour))&&(Object(o.b)(r)||Object(o.c)(r,this.minute)))break}},DateTime.prototype.addSeconds=function(t,e,n,r,i){for(e&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/t)*t);;){this.second+=t;var a=Object(o.a)(this.second,60),s=a.div,u=a.mod;if(s&&(this.second=u,this.addMinutes(s,!1,n,r)),(Object(o.b)(n)||Object(o.c)(n,this.hour))&&(Object(o.b)(r)||Object(o.c)(r,this.minute))&&(Object(o.b)(i)||Object(o.c)(i,this.second)))break}},DateTime.prototype.fixDay=function(){if(!(this.day<=28)){var t=r.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,13===this.month&&(this.month=1,++this.year,this.year>r.MAXYEAR))return;t=r.monthRange(this.year,this.month-1)[1]}}},DateTime.prototype.add=function(t,e){var n=t.freq,r=t.interval,i=t.wkst,o=t.byhour,a=t.byminute,s=t.bysecond;switch(n){case u.YEARLY:return this.addYears(r);case u.MONTHLY:return this.addMonths(r);case u.WEEKLY:return this.addWeekly(r,i);case u.DAILY:return this.addDaily(r);case u.HOURLY:return this.addHours(r,e,o);case u.MINUTELY:return this.addMinutes(r,e,o,a);case u.SECONDLY:return this.addSeconds(r,e,o,a,s)}},DateTime}(f);function initializeOptions(t){var e=[],n=Object.keys(t),r={};if(n.forEach((function(n){var i=t[n];r[n]=i,Object(o.c)(N,n)||e.push(n),a.isDate(i)&&!a.isValidDate(i)&&e.push(n)})),e.length)throw new Error("Invalid options: "+e.join(", "));return r}function parseString(t){var e=t.split("\n").map(parseLine).filter((function(t){return null!==t}));return __assign({},e[0],e[1])}function parseDtstart(t){var e={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!n)return e;n[0];var r=n[1],i=n[2];return r&&(e.tzid=r),e.dtstart=a.untilStringToDate(i),e}function parseLine(t){if(!(t=t.replace(/^\s+|\s+$/,"")).length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return parseRrule(t);e[0];var n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return parseRrule(t);case"DTSTART":return parseDtstart(t);default:throw new Error("Unsupported RFC prop "+n+" in "+t)}}function parseRrule(t){var e=parseDtstart(t.replace(/^RRULE:/i,""));return t.replace(/^(?:RRULE|EXRULE):/i,"").split(";").forEach((function(n){var r=n.split("="),i=r[0],o=r[1];switch(i.toUpperCase()){case"FREQ":e.freq=u[o.toUpperCase()];break;case"WKST":e.wkst=j[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var s=function parseNumber(t){if(-1!==t.indexOf(",")){return t.split(",").map(parseIndividualNumber)}return parseIndividualNumber(t)}(o),l=i.toLowerCase();e[l]=s;break;case"BYWEEKDAY":case"BYDAY":e.byweekday=function parseWeekday(t){return t.split(",").map((function(t){if(2===t.length)return j[t];var e=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/),n=Number(e[1]),r=e[2],i=j[r].weekday;return new h(i,n)}))}(o);break;case"DTSTART":case"TZID":var c=parseDtstart(t);e.tzid=c.tzid,e.dtstart=c.dtstart;break;case"UNTIL":e.until=a.untilStringToDate(o);break;case"BYEASTER":e.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+i+"'")}})),e}function parseIndividualNumber(t){return/^[+-]?\d+$/.test(t)?Number(t):t}var p=n(2),y=function(){function DateWithZone(t,e){this.date=t,this.tzid=e}return Object.defineProperty(DateWithZone.prototype,"isUTC",{get:function(){return!this.tzid||"UTC"===this.tzid.toUpperCase()},enumerable:!0,configurable:!0}),DateWithZone.prototype.toString=function(){var t=a.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+t:";TZID="+this.tzid+":"+t},DateWithZone.prototype.getTime=function(){return this.date.getTime()},DateWithZone.prototype.rezonedDate=function(){if(this.isUTC)return this.date;try{return p.DateTime.fromJSDate(this.date).setZone(this.tzid,{keepLocalTime:!0}).toJSDate()}catch(t){return t instanceof TypeError&&console.error("Using TZID without Luxon available is unsupported. Returned times are in UTC, not the requested time zone"),this.date}},DateWithZone}();function optionsToString(t){for(var e=[],n="",r=Object.keys(t),i=Object.keys(D),s=0;s<r.length;s++)if("tzid"!==r[s]&&Object(o.c)(i,r[s])){var u=r[s].toUpperCase(),l=t[r[s]],c="";if(Object(o.f)(l)&&(!Object(o.d)(l)||l.length)){switch(u){case"FREQ":c=F.FREQUENCIES[t.freq];break;case"WKST":c=Object(o.e)(l)?new h(l).toString():l.toString();break;case"BYWEEKDAY":u="BYDAY",c=Object(o.m)(l).map((function(t){return t instanceof h?t:Object(o.d)(t)?new h(t[0],t[1]):new h(t)})).toString();break;case"DTSTART":n=buildDtstart(l,t.tzid);break;case"UNTIL":c=a.timeToUntilString(l,!t.tzid);break;default:if(Object(o.d)(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);c=f.toString()}else c=String(l)}c&&e.push([u,c])}}var p=e.map((function(t){return t[0]+"="+t[1].toString()})).join(";"),y="";return""!==p&&(y="RRULE:"+p),[n,y].filter((function(t){return!!t})).join("\n")}function buildDtstart(t,e){return t?"DTSTART"+new y(new Date(t),e).toString():""}var m=function(){function Cache(){this.all=!1,this.before=[],this.after=[],this.between=[]}return Cache.prototype._cacheAdd=function(t,e,n){e&&(e=e instanceof Date?a.clone(e):a.cloneDates(e)),"all"===t?this.all=e:(n._value=e,this[t].push(n))},Cache.prototype._cacheGet=function(t,e){var n=!1,r=e?Object.keys(e):[],findCacheDiff=function(t){for(var n=0;n<r.length;n++){var i=r[n];if(String(e[i])!==String(t[i]))return!0}return!1},i=this[t];if("all"===t)n=this.all;else if(Object(o.d)(i))for(var u=0;u<i.length;u++){var l=i[u];if(!r.length||!findCacheDiff(l)){n=l._value;break}}if(!n&&this.all){var c=new s(t,e);for(u=0;u<this.all.length&&c.accept(this.all[u]);u++);n=c.getValue(),this._cacheAdd(t,n,e)}return Object(o.d)(n)?a.cloneDates(n):n instanceof Date?a.clone(n):n},Cache}(),g=Object(o.k)(1,31).concat(Object(o.k)(2,28),Object(o.k)(3,31),Object(o.k)(4,30),Object(o.k)(5,31),Object(o.k)(6,30),Object(o.k)(7,31),Object(o.k)(8,31),Object(o.k)(9,30),Object(o.k)(10,31),Object(o.k)(11,30),Object(o.k)(12,31),Object(o.k)(1,7)),v=Object(o.k)(1,31).concat(Object(o.k)(2,29),Object(o.k)(3,31),Object(o.k)(4,30),Object(o.k)(5,31),Object(o.k)(6,30),Object(o.k)(7,31),Object(o.k)(8,31),Object(o.k)(9,30),Object(o.k)(10,31),Object(o.k)(11,30),Object(o.k)(12,31),Object(o.k)(1,7)),_=Object(o.j)(1,29),b=Object(o.j)(1,30),w=Object(o.j)(1,31),T=Object(o.j)(1,32),S=T.concat(b,T,w,T,w,T,T,w,T,w,T,T.slice(0,7)),E=T.concat(_,T,w,T,w,T,T,w,T,w,T,T.slice(0,7)),M=Object(o.j)(-28,0),O=Object(o.j)(-29,0),x=Object(o.j)(-30,0),k=Object(o.j)(-31,0),C=k.concat(O,k,x,k,x,k,k,x,k,x,k,k.slice(0,7)),P=k.concat(M,k,x,k,x,k,k,x,k,x,k,k.slice(0,7)),I=[0,31,60,91,121,152,182,213,244,274,305,335,366],R=[0,31,59,90,120,151,181,212,243,273,304,334,365],L=function(){for(var t=[],e=0;e<55;e++)t=t.concat(Object(o.j)(7));return t}();function rebuildYear(t,e){var n,r,i=new Date(Date.UTC(t,0,1)),s=a.isLeapYear(t)?366:365,u=a.isLeapYear(t+1)?366:365,l=a.toOrdinal(i),c=a.getWeekday(i),h=__assign({yearlen:s,nextyearlen:u,yearordinal:l,yearweekday:c},function baseYearMasks(t){var e=a.isLeapYear(t)?366:365,n=new Date(Date.UTC(t,0,1)),r=a.getWeekday(n);if(365===e)return{mmask:g,mdaymask:E,nmdaymask:P,wdaymask:L.slice(r),mrange:R};return{mmask:v,mdaymask:S,nmdaymask:C,wdaymask:L.slice(r),mrange:I}}(t),{wnomask:null});if(Object(o.b)(e.byweekno))return h;h.wnomask=Object(o.k)(0,s+7);var f=n=Object(o.i)(7-c+e.wkst,7);f>=4?(f=0,r=h.yearlen+Object(o.i)(c-e.wkst,7)):r=s-f;for(var d=Math.floor(r/7),p=Object(o.i)(r,7),y=Math.floor(d+p/4),m=0;m<e.byweekno.length;m++){var _=e.byweekno[m];if(_<0&&(_+=y+1),_>0&&_<=y){var b=void 0;_>1?(b=f+7*(_-1),f!==n&&(b-=7-n)):b=f;for(var w=0;w<7&&(h.wnomask[b]=1,b++,h.wdaymask[b]!==e.wkst);w++);}}if(Object(o.c)(e.byweekno,1)){b=f+7*y;if(f!==n&&(b-=7-n),b<s)for(m=0;m<7&&(h.wnomask[b]=1,b+=1,h.wdaymask[b]!==e.wkst);m++);}if(f){var T=void 0;if(Object(o.c)(e.byweekno,-1))T=-1;else{var M=a.getWeekday(new Date(Date.UTC(t-1,0,1))),O=Object(o.i)(7-M.valueOf()+e.wkst,7),x=a.isLeapYear(t-1)?366:365,k=void 0;O>=4?(O=0,k=x+Object(o.i)(M-e.wkst,7)):k=s-f,T=Math.floor(52+Object(o.i)(k,7)/4)}if(Object(o.c)(e.byweekno,T))for(b=0;b<f;b++)h.wnomask[b]=1}return h}var A=function(){function Iterinfo(t){this.options=t}return Iterinfo.prototype.rebuild=function(t,e){var n=this.options;if(t!==this.lastyear&&(this.yearinfo=rebuildYear(t,n)),Object(o.g)(n.bynweekday)&&(e!==this.lastmonth||t!==this.lastyear)){var r=this.yearinfo,i=r.yearlen,a=r.mrange,s=r.wdaymask;this.monthinfo=function rebuildMonth(t,e,n,r,i,a){var s={lastyear:t,lastmonth:e,nwdaymask:[]},u=[];if(a.freq===F.YEARLY)if(Object(o.b)(a.bymonth))u=[[0,n]];else for(var l=0;l<a.bymonth.length;l++)e=a.bymonth[l],u.push(r.slice(e-1,e+1));else a.freq===F.MONTHLY&&(u=[r.slice(e-1,e+1)]);if(Object(o.b)(u))return s;for(s.nwdaymask=Object(o.k)(0,n),l=0;l<u.length;l++)for(var c=u[l],h=c[0],f=c[1]-1,d=0;d<a.bynweekday.length;d++){var p=void 0,y=a.bynweekday[d],m=y[0],g=y[1];g<0?(p=f+7*(g+1),p-=Object(o.i)(i[p]-m,7)):(p=h+7*(g-1),p+=Object(o.i)(7-i[p]+m,7)),h<=p&&p<=f&&(s.nwdaymask[p]=1)}return s}(t,e,i,a,s,n)}Object(o.f)(n.byeaster)&&(this.eastermask=function easter(t,e){void 0===e&&(e=0);var n=t%19,r=Math.floor(t/100),i=t%100,o=Math.floor(r/4),a=r%4,s=Math.floor((r+8)/25),u=Math.floor((r-s+1)/3),l=Math.floor(19*n+r-o-u+15)%30,c=Math.floor(i/4),h=i%4,f=Math.floor(32+2*a+2*c-l-h)%7,d=Math.floor((n+11*l+22*f)/451),p=Math.floor((l+f-7*d+114)/31),y=(l+f-7*d+114)%31+1,m=Date.UTC(t,p-1,y+e),g=Date.UTC(t,0,1);return[Math.ceil((m-g)/864e5)]}(t,n.byeaster))},Object.defineProperty(Iterinfo.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(Iterinfo.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),Iterinfo.prototype.ydayset=function(){return[Object(o.j)(this.yearlen),0,this.yearlen]},Iterinfo.prototype.mdayset=function(t,e,n){for(var r=this.mrange[e-1],i=this.mrange[e],a=Object(o.k)(null,this.yearlen),s=r;s<i;s++)a[s]=s;return[a,r,i]},Iterinfo.prototype.wdayset=function(t,e,n){for(var r=Object(o.k)(null,this.yearlen+7),i=a.toOrdinal(new Date(Date.UTC(t,e-1,n)))-this.yearordinal,s=i,u=0;u<7&&(r[i]=i,++i,this.wdaymask[i]!==this.options.wkst);u++);return[r,s,i]},Iterinfo.prototype.ddayset=function(t,e,n){var r=Object(o.k)(null,this.yearlen),i=a.toOrdinal(new Date(Date.UTC(t,e-1,n)))-this.yearordinal;return r[i]=i,[r,i,i+1]},Iterinfo.prototype.htimeset=function(t,e,n,r){var i=this,o=[];return this.options.byminute.forEach((function(e){o=o.concat(i.mtimeset(t,e,n,r))})),a.sort(o),o},Iterinfo.prototype.mtimeset=function(t,e,n,r){var i=this.options.bysecond.map((function(n){return new f(t,e,n,r)}));return a.sort(i),i},Iterinfo.prototype.stimeset=function(t,e,n,r){return[new f(t,e,n,r)]},Iterinfo.prototype.getdayset=function(t){switch(t){case u.YEARLY:return this.ydayset.bind(this);case u.MONTHLY:return this.mdayset.bind(this);case u.WEEKLY:return this.wdayset.bind(this);case u.DAILY:default:return this.ddayset.bind(this)}},Iterinfo.prototype.gettimeset=function(t){switch(t){case u.HOURLY:return this.htimeset.bind(this);case u.MINUTELY:return this.mtimeset.bind(this);case u.SECONDLY:return this.stimeset.bind(this)}},Iterinfo}();function buildPoslist(t,e,n,r,i,s){for(var u=[],l=0;l<t.length;l++){var c=void 0,h=void 0,f=t[l];f<0?(c=Math.floor(f/e.length),h=Object(o.i)(f,e.length)):(c=Math.floor((f-1)/e.length),h=Object(o.i)(f-1,e.length));for(var d=[],p=n;p<r;p++){var y=s[p];Object(o.f)(y)&&d.push(y)}var m=void 0;m=c<0?d.slice(c)[0]:d[c];var g=e[h],v=a.fromOrdinal(i.yearordinal+m),_=a.combine(v,g);Object(o.c)(u,_)||u.push(_)}return a.sort(u),u}function iter(t,e){var n=e.dtstart,r=e.freq,i=e.interval,s=e.until,u=e.bysetpos,l=e.count;if(0===l||0===i)return emitResult(t);var c=d.fromDate(n),h=new A(e);h.rebuild(c.year,c.month);for(var p=function makeTimeset(t,e,n){var r=n.freq,i=n.byhour,a=n.byminute,s=n.bysecond;if(freqIsDailyOrGreater(r))return function buildTimeset(t){var e=t.dtstart.getTime()%1e3;if(!freqIsDailyOrGreater(t.freq))return[];var n=[];return t.byhour.forEach((function(r){t.byminute.forEach((function(i){t.bysecond.forEach((function(t){n.push(new f(r,i,t,e))}))}))})),n}(n);if(r>=F.HOURLY&&Object(o.g)(i)&&!Object(o.c)(i,e.hour)||r>=F.MINUTELY&&Object(o.g)(a)&&!Object(o.c)(a,e.minute)||r>=F.SECONDLY&&Object(o.g)(s)&&!Object(o.c)(s,e.second))return[];return t.gettimeset(r)(e.hour,e.minute,e.second,e.millisecond)}(h,c,e);;){var y=h.getdayset(r)(c.year,c.month,c.day),m=y[0],g=y[1],v=y[2],_=removeFilteredDays(m,g,v,h,e);if(Object(o.g)(u))for(var b=buildPoslist(u,p,g,v,h,m),w=0;w<b.length;w++){var T=b[w];if(s&&T>s)return emitResult(t);if(T>=n){var S=rezoneIfNeeded(T,e);if(!t.accept(S))return emitResult(t);if(l&&!--l)return emitResult(t)}}else for(w=g;w<v;w++){var E=m[w];if(Object(o.f)(E))for(var M=a.fromOrdinal(h.yearordinal+E),O=0;O<p.length;O++){var x=p[O];T=a.combine(M,x);if(s&&T>s)return emitResult(t);if(T>=n){S=rezoneIfNeeded(T,e);if(!t.accept(S))return emitResult(t);if(l&&!--l)return emitResult(t)}}}if(0===e.interval)return emitResult(t);if(c.add(e,_),c.year>a.MAXYEAR)return emitResult(t);freqIsDailyOrGreater(r)||(p=h.gettimeset(r)(c.hour,c.minute,c.second,0)),h.rebuild(c.year,c.month)}}function isFiltered(t,e,n){var r=n.bymonth,i=n.byweekno,a=n.byweekday,s=n.byeaster,u=n.bymonthday,l=n.bynmonthday,c=n.byyearday;return Object(o.g)(r)&&!Object(o.c)(r,t.mmask[e])||Object(o.g)(i)&&!t.wnomask[e]||Object(o.g)(a)&&!Object(o.c)(a,t.wdaymask[e])||Object(o.g)(t.nwdaymask)&&!t.nwdaymask[e]||null!==s&&!Object(o.c)(t.eastermask,e)||(Object(o.g)(u)||Object(o.g)(l))&&!Object(o.c)(u,t.mdaymask[e])&&!Object(o.c)(l,t.nmdaymask[e])||Object(o.g)(c)&&(e<t.yearlen&&!Object(o.c)(c,e+1)&&!Object(o.c)(c,-t.yearlen+e)||e>=t.yearlen&&!Object(o.c)(c,e+1-t.yearlen)&&!Object(o.c)(c,-t.nextyearlen+e-t.yearlen))}function rezoneIfNeeded(t,e){return new y(t,e.tzid).rezonedDate()}function emitResult(t){return t.getValue()}function removeFilteredDays(t,e,n,r,i){for(var o=!1,a=e;a<n;a++){var s=t[a];(o=isFiltered(r,s,i))&&(t[s]=null)}return o}var getnlp=function(){return getnlp._nlp||(getnlp._nlp=n(3)),getnlp._nlp},j={MO:new h(0),TU:new h(1),WE:new h(2),TH:new h(3),FR:new h(4),SA:new h(5),SU:new h(6)},D={freq:u.YEARLY,dtstart:null,interval:1,wkst:j.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},N=Object.keys(D),F=function(){function RRule(t,e){void 0===t&&(t={}),void 0===e&&(e=!1),this._cache=e?null:new m,this.origOptions=initializeOptions(t);var n=function parseOptions(t){var e=initializeOptions(t),n=Object.keys(t);if(N.forEach((function(t){Object(o.c)(n,t)&&Object(o.f)(e[t])||(e[t]=D[t])})),Object(o.f)(e.byeaster)&&(e.freq=F.YEARLY),!Object(o.f)(e.freq)||!F.FREQUENCIES[e.freq])throw new Error("Invalid frequency: "+e.freq+" "+t.freq);if(e.dtstart||(e.dtstart=new Date((new Date).setMilliseconds(0))),Object(o.f)(e.wkst)?Object(o.e)(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=F.MO.weekday,Object(o.f)(e.bysetpos)){Object(o.e)(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){if(0===(u=e.bysetpos[r])||!(u>=-366&&u<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Object(o.g)(e.byweekno)||Object(o.g)(e.byyearday)||Boolean(e.bymonthday)||Object(o.g)(e.bymonthday)||Object(o.f)(e.byweekday)||Object(o.f)(e.byeaster)))switch(e.freq){case F.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case F.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case F.WEEKLY:e.byweekday=[a.getWeekday(e.dtstart)]}if(Object(o.f)(e.bymonth)&&!Object(o.d)(e.bymonth)&&(e.bymonth=[e.bymonth]),Object(o.f)(e.byyearday)&&!Object(o.d)(e.byyearday)&&Object(o.e)(e.byyearday)&&(e.byyearday=[e.byyearday]),Object(o.f)(e.bymonthday))if(Object(o.d)(e.bymonthday)){var i=[],s=[];for(r=0;r<e.bymonthday.length;r++){var u;(u=e.bymonthday[r])>0?i.push(u):u<0&&s.push(u)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);else e.bymonthday=[],e.bynmonthday=[];if(Object(o.f)(e.byweekno)&&!Object(o.d)(e.byweekno)&&(e.byweekno=[e.byweekno]),Object(o.f)(e.byweekday))if(Object(o.e)(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(e.byweekday instanceof h)!e.byweekday.n||e.freq>F.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{var l=[],c=[];for(r=0;r<e.byweekday.length;r++){var f=e.byweekday[r];if(Object(o.e)(f))l.push(f);else{var d=f;!d.n||e.freq>F.MONTHLY?l.push(d.weekday):c.push([d.weekday,d.n])}}e.byweekday=Object(o.g)(l)?l:null,e.bynweekday=Object(o.g)(c)?c:null}else e.bynweekday=null;return Object(o.f)(e.byhour)?Object(o.e)(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<F.HOURLY?[e.dtstart.getUTCHours()]:null,Object(o.f)(e.byminute)?Object(o.e)(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<F.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Object(o.f)(e.bysecond)?Object(o.e)(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<F.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}(t).parsedOptions;this.options=n}return RRule.parseText=function(t,e){return getnlp().parseText(t,e)},RRule.fromText=function(t,e){return getnlp().fromText(t,e)},RRule.fromString=function(t){return new RRule(RRule.parseString(t)||void 0)},RRule.prototype._iter=function(t){return iter(t,this.options)},RRule.prototype._cacheGet=function(t,e){return!!this._cache&&this._cache._cacheGet(t,e)},RRule.prototype._cacheAdd=function(t,e,n){if(this._cache)return this._cache._cacheAdd(t,e,n)},RRule.prototype.all=function(t){if(t)return this._iter(new l("all",{},t));var e=this._cacheGet("all");return!1===e&&(e=this._iter(new s("all",{})),this._cacheAdd("all",e)),e},RRule.prototype.between=function(t,e,n,r){if(void 0===n&&(n=!1),!a.isValidDate(t)||!a.isValidDate(e))throw new Error("Invalid date passed in to RRule.between");var i={before:e,after:t,inc:n};if(r)return this._iter(new l("between",i,r));var o=this._cacheGet("between",i);return!1===o&&(o=this._iter(new s("between",i)),this._cacheAdd("between",o,i)),o},RRule.prototype.before=function(t,e){if(void 0===e&&(e=!1),!a.isValidDate(t))throw new Error("Invalid date passed in to RRule.before");var n={dt:t,inc:e},r=this._cacheGet("before",n);return!1===r&&(r=this._iter(new s("before",n)),this._cacheAdd("before",r,n)),r},RRule.prototype.after=function(t,e){if(void 0===e&&(e=!1),!a.isValidDate(t))throw new Error("Invalid date passed in to RRule.after");var n={dt:t,inc:e},r=this._cacheGet("after",n);return!1===r&&(r=this._iter(new s("after",n)),this._cacheAdd("after",r,n)),r},RRule.prototype.count=function(){return this.all().length},RRule.prototype.toString=function(){return optionsToString(this.origOptions)},RRule.prototype.toText=function(t,e,n){return getnlp().toText(this,t,e,n)},RRule.prototype.isFullyConvertibleToText=function(){return getnlp().isFullyConvertible(this)},RRule.prototype.clone=function(){return new RRule(this.origOptions)},RRule.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],RRule.YEARLY=u.YEARLY,RRule.MONTHLY=u.MONTHLY,RRule.WEEKLY=u.WEEKLY,RRule.DAILY=u.DAILY,RRule.HOURLY=u.HOURLY,RRule.MINUTELY=u.MINUTELY,RRule.SECONDLY=u.SECONDLY,RRule.MO=j.MO,RRule.TU=j.TU,RRule.WE=j.WE,RRule.TH=j.TH,RRule.FR=j.FR,RRule.SA=j.SA,RRule.SU=j.SU,RRule.parseString=parseString,RRule.optionsToString=optionsToString,RRule}();var U={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function parseInput(t,e){var n=[],r=[],i=[],a=[],s=parseDtstart(t),u=s.dtstart,l=s.tzid;return function splitIntoLines(t,e){void 0===e&&(e=!1);if(!(t=t&&t.trim()))throw new Error("Invalid empty string");if(!e)return t.split(/\s/);var n=t.split("\n"),r=0;for(;r<n.length;){var i=n[r]=n[r].replace(/\s+$/g,"");i?r>0&&" "===i[0]?(n[r-1]+=i.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}(t,e.unfold).forEach((function(t){if(t){var e=function breakDownLine(t){var e=function extractName(t){if(-1===t.indexOf(":"))return{name:"RRULE",value:t};var e=Object(o.l)(t,":",1),n=e[0],r=e[1];return{name:n,value:r}}(t),n=e.name,r=e.value,i=n.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:r}}(t),s=e.name,u=e.parms,c=e.value;switch(s.toUpperCase()){case"RRULE":if(u.length)throw new Error("unsupported RRULE parm: "+u.join(","));n.push(parseString(t));break;case"RDATE":var h=/RDATE(?:;TZID=([^:=]+))?/i.exec(t),f=(h[0],h[1]);f&&!l&&(l=f),r=r.concat(parseRDate(c,u));break;case"EXRULE":if(u.length)throw new Error("unsupported EXRULE parm: "+u.join(","));i.push(parseString(c));break;case"EXDATE":a=a.concat(parseRDate(c,u));break;case"DTSTART":break;default:throw new Error("unsupported property: "+s)}}})),{dtstart:u,tzid:l,rrulevals:n,rdatevals:r,exrulevals:i,exdatevals:a}}function rrulestr(t,e){return void 0===e&&(e={}),function buildRule(t,e){var n=parseInput(t,e),r=n.rrulevals,i=n.rdatevals,o=n.exrulevals,a=n.exdatevals,s=n.dtstart,u=n.tzid,l=!1===e.cache;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||r.length>1||i.length||o.length||a.length){var c=new V(l);return c.dtstart(s),c.tzid(u||void 0),r.forEach((function(t){c.rrule(new F(groomRruleOptions(t,s,u),l))})),i.forEach((function(t){c.rdate(t)})),o.forEach((function(t){c.exrule(new F(groomRruleOptions(t,s,u),l))})),a.forEach((function(t){c.exdate(t)})),e.compatible&&e.dtstart&&c.rdate(s),c}var h=r[0]||{};return new F(groomRruleOptions(h,h.dtstart||e.dtstart||s,h.tzid||e.tzid||u),l)}(t,function rrulestr_initializeOptions(t){var e=[],n=Object.keys(t),r=Object.keys(U);if(n.forEach((function(t){Object(o.c)(r,t)||e.push(t)})),e.length)throw new Error("Invalid options: "+e.join(", "));var i=__assign({},t);return r.forEach((function(t){Object(o.c)(n,t)||(i[t]=U[t])})),i}(e))}function groomRruleOptions(t,e,n){return __assign({},t,{dtstart:e,tzid:n})}function parseRDate(t,e){return function validateDateParm(t){t.forEach((function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)}))}(e),t.split(",").map((function(t){return a.untilStringToDate(t)}))}function createGetterSetter(t){var e=this;return function(n){if(void 0!==n&&(e["_"+t]=n),void 0!==e["_"+t])return e["_"+t];for(var r=0;r<e._rrule.length;r++){var i=e._rrule[r].origOptions[t];if(i)return i}}}var V=function(t){function RRuleSet(e){void 0===e&&(e=!1);var n=t.call(this,{},e)||this;return n.dtstart=createGetterSetter.apply(n,["dtstart"]),n.tzid=createGetterSetter.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return __extends(RRuleSet,t),RRuleSet.prototype._iter=function(t){return function iterSet(t,e,n,r,i,o){var s={},u=t.accept;function evalExdate(t,e){n.forEach((function(n){n.between(t,e,!0).forEach((function(t){s[Number(t)]=!0}))}))}i.forEach((function(t){var e=new y(t,o).rezonedDate();s[Number(e)]=!0})),t.accept=function(t){var e=Number(t);return!(!s[e]&&(evalExdate(new Date(e-1),new Date(e+1)),!s[e]))||(s[e]=!0,u.call(this,t))},"between"===t.method&&(evalExdate(t.args.after,t.args.before),t.accept=function(t){var e=Number(t);return!!s[e]||(s[e]=!0,u.call(this,t))});for(var l=0;l<r.length;l++){var c=new y(r[l],o).rezonedDate();if(!t.accept(new Date(c.getTime())))break}e.forEach((function(e){iter(t,e.options)}));var h=t._result;switch(a.sort(h),t.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},RRuleSet.prototype.rrule=function(t){_addRule(t,this._rrule)},RRuleSet.prototype.exrule=function(t){_addRule(t,this._exrule)},RRuleSet.prototype.rdate=function(t){_addDate(t,this._rdate)},RRuleSet.prototype.exdate=function(t){_addDate(t,this._exdate)},RRuleSet.prototype.rrules=function(){return this._rrule.map((function(t){return rrulestr(t.toString())}))},RRuleSet.prototype.exrules=function(){return this._exrule.map((function(t){return rrulestr(t.toString())}))},RRuleSet.prototype.rdates=function(){return this._rdate.map((function(t){return new Date(t.getTime())}))},RRuleSet.prototype.exdates=function(){return this._exdate.map((function(t){return new Date(t.getTime())}))},RRuleSet.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(optionsToString({dtstart:this._dtstart}))),this._rrule.forEach((function(e){t=t.concat(e.toString().split("\n"))})),this._exrule.forEach((function(e){t=t.concat(e.toString().split("\n").map((function(t){return t.replace(/^RRULE:/,"EXRULE:")})).filter((function(t){return!/^DTSTART/.test(t)})))})),this._rdate.length&&t.push(rdatesToString("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(rdatesToString("EXDATE",this._exdate,this.tzid())),t},RRuleSet.prototype.toString=function(){return this.valueOf().join("\n")},RRuleSet.prototype.clone=function(){var t=new RRuleSet(!!this._cache);return this._rrule.forEach((function(e){return t.rrule(e.clone())})),this._exrule.forEach((function(e){return t.exrule(e.clone())})),this._rdate.forEach((function(e){return t.rdate(new Date(e.getTime()))})),this._exdate.forEach((function(e){return t.exdate(new Date(e.getTime()))})),t},RRuleSet}(F);function _addRule(t,e){if(!(t instanceof F))throw new TypeError(String(t)+" is not RRule instance");Object(o.c)(e.map(String),String(t))||e.push(t)}function _addDate(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");Object(o.c)(e.map(Number),Number(t))||(e.push(t),a.sort(e))}function rdatesToString(t,e,n){var r=!n||"UTC"===n.toUpperCase();return""+(r?t+":":t+";TZID="+n+":")+e.map((function(t){return a.timeToUntilString(t.valueOf(),r)})).join(",")}n.d(e,"Frequency",(function(){return u})),n.d(e,"Weekday",(function(){return h})),n.d(e,"RRule",(function(){return F})),n.d(e,"RRuleSet",(function(){return V})),n.d(e,"rrulestr",(function(){return rrulestr}));
/*!
	 * rrule.js - Library for working with recurrence rules for calendar dates.
	 * https://github.com/jakubroztocil/rrule
	 *
	 * Copyright 2010, Jakub Roztocil and Lars Schoning
	 * Licenced under the BSD licence.
	 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
	 *
	 * Based on:
	 * python-dateutil - Extensions to the standard Python datetime module.
	 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
	 * Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>
	 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
	 *
	 */e.default=F},function(e,n){e.exports=t},function(t,e,n){n.r(e);var r={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},i=n(1),o=n(0),contains=function(t,e){return-1!==t.indexOf(e)},defaultGetText=function(t){return t.toString()},defaultDateFormatter=function(t,e,n){return e+" "+n+", "+t},a=function(){function ToText(t,e,n,i){if(void 0===e&&(e=defaultGetText),void 0===n&&(n=r),void 0===i&&(i=defaultDateFormatter),this.text=[],this.language=n||r,this.gettext=e,this.dateFormatter=i,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort((function(t,e){return t-e})),s.sort((function(t,e){return e-t})),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(Object(o.f)(this.origOptions.byweekday)){var u=Object(o.d)(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],l=String(u);this.byweekday={allWeeks:u.filter((function(t){return!t.n})),someWeeks:u.filter((function(t){return Boolean(t.n)})),isWeekdays:-1!==l.indexOf("MO")&&-1!==l.indexOf("TU")&&-1!==l.indexOf("WE")&&-1!==l.indexOf("TH")&&-1!==l.indexOf("FR")&&-1===l.indexOf("SA")&&-1===l.indexOf("SU"),isEveryDay:-1!==l.indexOf("MO")&&-1!==l.indexOf("TU")&&-1!==l.indexOf("WE")&&-1!==l.indexOf("TH")&&-1!==l.indexOf("FR")&&-1!==l.indexOf("SA")&&-1!==l.indexOf("SU")};var sortWeekDays=function(t,e){return t.weekday-e.weekday};this.byweekday.allWeeks.sort(sortWeekDays),this.byweekday.someWeeks.sort(sortWeekDays),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return ToText.isFullyConvertible=function(t){if(!(t.options.freq in ToText.IMPLEMENTED))return!1;if(t.origOptions.until&&t.origOptions.count)return!1;for(var e in t.origOptions){if(contains(["dtstart","wkst","freq"],e))return!0;if(!contains(ToText.IMPLEMENTED[t.options.freq],e))return!1}return!0},ToText.prototype.isFullyConvertible=function(){return ToText.isFullyConvertible(this.rrule)},ToText.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in ToText.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[i.default.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var e=this.options.until;this.add(this.dateFormatter(e.getUTCFullYear(),this.language.monthNames[e.getUTCMonth()],e.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},ToText.prototype.HOURLY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},ToText.prototype.MINUTELY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add((this.plural(this.options.interval),t("minutes")))},ToText.prototype.DAILY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},ToText.prototype.WEEKLY=function(){var t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(1===this.options.interval&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},ToText.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},ToText.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},ToText.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},ToText.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},ToText.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},ToText.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},ToText.prototype.nth=function(t){var e,n;t=parseInt(t.toString(),10);var r=this.gettext;if(-1===t)return r("last");switch(n=Math.abs(t)){case 1:case 21:case 31:e=n+r("st");break;case 2:case 22:e=n+r("nd");break;case 3:case 23:e=n+r("rd");break;default:e=n+r("th")}return t<0?e+" "+r("last"):e},ToText.prototype.monthtext=function(t){return this.language.monthNames[t-1]},ToText.prototype.weekdaytext=function(t){var e=Object(o.e)(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[e]},ToText.prototype.plural=function(t){return t%100!=1},ToText.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},ToText.prototype.list=function(t,e,n,r){void 0===r&&(r=","),Object(o.d)(t)||(t=[t]);e=e||function(t){return t.toString()};var i=this,realCallback=function(t){return e&&e.call(i,t)};return n?function(t,e,n){for(var r="",i=0;i<t.length;i++)0!==i&&(i===t.length-1?r+=" "+n+" ":r+=e+" "),r+=t[i];return r}(t.map(realCallback),r,n):t.map(realCallback).join(r+" ")},ToText}(),s=function(){function Parser(t){this.done=!0,this.rules=t}return Parser.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},Parser.prototype.isDone=function(){return this.done&&null===this.symbol},Parser.prototype.nextSymbol=function(){var t,e;this.symbol=null,this.value=null;do{if(this.done)return!1;for(var n in t=null,this.rules){var r=this.rules[n].exec(this.text);r&&(null===t||r[0].length>t[0].length)&&(t=r,e=n)}if(null!=t&&(this.text=this.text.substr(t[0].length),""===this.text&&(this.done=!0)),null==t)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===e);return this.symbol=e,this.value=t,!0},Parser.prototype.accept=function(t){if(this.symbol===t){if(this.value){var e=this.value;return this.nextSymbol(),e}return this.nextSymbol(),!0}return!1},Parser.prototype.acceptNumber=function(){return this.accept("number")},Parser.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},Parser}();function parseText(t,e){void 0===e&&(e=r);var n={},o=new s(e.tokens);return o.start(t)?(function S(){o.expect("every");var t=o.acceptNumber();t&&(n.interval=parseInt(t[0],10));if(o.isDone())throw new Error("Unexpected end");switch(o.symbol){case"day(s)":n.freq=i.default.DAILY,o.nextSymbol()&&(!function AT(){if(!o.accept("at"))return;do{var t=o.acceptNumber();if(!t)throw new Error("Unexpected symbol "+o.symbol+", expected hour");for(n.byhour=[parseInt(t[0],10)];o.accept("comma");){if(!(t=o.acceptNumber()))throw new Error("Unexpected symbol "+o.symbol+"; expected hour");n.byhour.push(parseInt(t[0],10))}}while(o.accept("comma")||o.accept("at"))}(),F());break;case"weekday(s)":n.freq=i.default.WEEKLY,n.byweekday=[i.default.MO,i.default.TU,i.default.WE,i.default.TH,i.default.FR],o.nextSymbol(),F();break;case"week(s)":n.freq=i.default.WEEKLY,o.nextSymbol()&&(ON(),F());break;case"hour(s)":n.freq=i.default.HOURLY,o.nextSymbol()&&(ON(),F());break;case"minute(s)":n.freq=i.default.MINUTELY,o.nextSymbol()&&(ON(),F());break;case"month(s)":n.freq=i.default.MONTHLY,o.nextSymbol()&&(ON(),F());break;case"year(s)":n.freq=i.default.YEARLY,o.nextSymbol()&&(ON(),F());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=i.default.WEEKLY;var e=o.symbol.substr(0,2).toUpperCase();if(n.byweekday=[i.default[e]],!o.nextSymbol())return;for(;o.accept("comma");){if(o.isDone())throw new Error("Unexpected end");var r=decodeWKD();if(!r)throw new Error("Unexpected symbol "+o.symbol+", expected weekday");n.byweekday.push(i.default[r]),o.nextSymbol()}!function MDAYs(){o.accept("on"),o.accept("the");var t=decodeNTH();if(!t)return;n.bymonthday=[t],o.nextSymbol();for(;o.accept("comma");){if(!(t=decodeNTH()))throw new Error("Unexpected symbol "+o.symbol+"; expected monthday");n.bymonthday.push(t),o.nextSymbol()}}(),F();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=i.default.YEARLY,n.bymonth=[decodeM()],!o.nextSymbol())return;for(;o.accept("comma");){if(o.isDone())throw new Error("Unexpected end");var a=decodeM();if(!a)throw new Error("Unexpected symbol "+o.symbol+", expected month");n.bymonth.push(a),o.nextSymbol()}ON(),F();break;default:throw new Error("Unknown symbol")}}(),n):null;function ON(){var t=o.accept("on"),e=o.accept("the");if(t||e)do{var r=decodeNTH(),a=decodeWKD(),s=decodeM();if(r)a?(o.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(i.default[a].nth(r))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(r),o.accept("day(s)"));else if(a)o.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(i.default[a]);else if("weekday(s)"===o.symbol)o.nextSymbol(),n.byweekday||(n.byweekday=[i.default.MO,i.default.TU,i.default.WE,i.default.TH,i.default.FR]);else if("week(s)"===o.symbol){o.nextSymbol();var u=o.acceptNumber();if(!u)throw new Error("Unexpected symbol "+o.symbol+", expected week number");for(n.byweekno=[parseInt(u[0],10)];o.accept("comma");){if(!(u=o.acceptNumber()))throw new Error("Unexpected symbol "+o.symbol+"; expected monthday");n.byweekno.push(parseInt(u[0],10))}}else{if(!s)return;o.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(s)}}while(o.accept("comma")||o.accept("the")||o.accept("on"))}function decodeM(){switch(o.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function decodeWKD(){switch(o.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return o.symbol.substr(0,2).toUpperCase();default:return!1}}function decodeNTH(){switch(o.symbol){case"last":return o.nextSymbol(),-1;case"first":return o.nextSymbol(),1;case"second":return o.nextSymbol(),o.accept("last")?-2:2;case"third":return o.nextSymbol(),o.accept("last")?-3:3;case"nth":var t=parseInt(o.value[1],10);if(t<-366||t>366)throw new Error("Nth out of range: "+t);return o.nextSymbol(),o.accept("last")?-t:t;default:return!1}}function F(){if("until"===o.symbol){var t=Date.parse(o.text);if(!t)throw new Error("Cannot parse until date:"+o.text);n.until=new Date(t)}else o.accept("for")&&(n.count=parseInt(o.value[0],10),o.expect("number"))}}n.d(e,"fromText",(function(){return fromText})),n.d(e,"isFullyConvertible",(function(){return l})),n.d(e,"toText",(function(){return toText})),n.d(e,"parseText",(function(){return parseText}));
/*!
	* rrule.js - Library for working with recurrence rules for calendar dates.
	* https://github.com/jakubroztocil/rrule
	*
	* Copyright 2010, Jakub Roztocil and Lars Schoning
	* Licenced under the BSD licence.
	* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
	*
	*/
var fromText=function(t,e){return void 0===e&&(e=r),new i.default(parseText(t,e)||void 0)},u=["count","until","interval","byweekday","bymonthday","bymonth"];a.IMPLEMENTED=[],a.IMPLEMENTED[i.default.HOURLY]=u,a.IMPLEMENTED[i.default.MINUTELY]=u,a.IMPLEMENTED[i.default.DAILY]=["byhour"].concat(u),a.IMPLEMENTED[i.default.WEEKLY]=u,a.IMPLEMENTED[i.default.MONTHLY]=u,a.IMPLEMENTED[i.default.YEARLY]=["byweekno","byyearday"].concat(u);var toText=function(t,e,n,r){return new a(t,e,n,r).toString()},l=a.isFullyConvertible}])}))})));function parseTimes(t,e){var n=[];if(null==t)n=[];else if(Array.isArray(t))n=t.map((function(t){return new Date(t).getTime()}));else if("object"===_typeof(t)){new su(t).all().map((function(t){return ou.fromJSDate(t).toUTC().valueOf()})).forEach((function(t){n.includes(t)||n.push(t)}))}else if(t.includes(",")){var r=t.split(",");n=r.map((function(t){return new Date(t).getTime()}))}else if(t.includes("/")){var i=t.split("/").map((function(t){if("present"===t.toLowerCase())return{value:Date.now(),type:"date"};var e=new Date(t);if(function isValidDate(t){return t instanceof Date&&!isNaN(t)}(e))return{value:e.getTime(),type:"date"};try{return{value:Ns.fromISO(t).toObject(),type:"period"}}catch(t){return{value:null,type:null}}}));if(2===i.length);else if(3===i.length&&"date"===i[0].type&&"date"===i[1].type&&"period"===i[2].type)for(var o=Ns.fromObject(i[2].value).as("milliseconds"),a=0,s=i[0].value;s<=i[1].value;)n.push(s),a++,s=i[0].value+a*o}else{t.toLowerCase().split(" and ").forEach((function(t){var r,i=t.split(" ");if(i.length>=2){var o=Number(i[0]);if(!isNaN(o)&&"times"===i[1].trim())return void(n=n.concat(Array(o).fill(i.length>=3&&"history"===i[2]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY)))}try{r=su.fromText(t)}catch(t){return[]}if(r.options.freq===su.HOURLY?(r.options.byhour=Array.from(Array(24).keys()).filter((function(t){return t%r.options.interval==0})),r.options.byminute=[0],r.options.bysecond=[0],r.options.interval=1):r.options.freq===su.MINUTELY&&(r.options.byminute=Array.from(Array(60).keys()).filter((function(t){return t%r.options.interval==0})),r.options.bysecond=[0],r.options.interval=1),null!=e){var a=ou.fromJSDate(r.options.dtstart);if(null!=a){var s=Ns.fromISO(e);null!=s&&null!=(a=a.plus(s))&&(r.options.dtstart=a.toJSDate())}}var u,l=r.all().map((function(t){return ou.fromJSDate(t).toUTC().valueOf()}));if(t.toLowerCase().includes(" history")){var c=l.length-1;if(0===c){var h=_objectSpread2({},r.options);h.count=2;var f=new su(h).all();u=f[1]-f[0]}else u=(c+1)*(l[c]-l[0])/c;l=l.map((function(t){return t-u}))}l.forEach((function(t){n.includes(t)||n.push(t)}))}))}return n.sort(),n}function getBaseUrl(t){return t.split(/[?#]/)[0]}var uu,lu,cu=0,hu=0,fu=0,du=1e3,pu=0,yu=0,mu=0,gu="object"==typeof performance&&performance.now?performance:Date,vu="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now$1(){return yu||(vu(clearNow),yu=gu.now()+mu)}function clearNow(){yu=0}function Timer(){this._call=this._time=this._next=null}function wake(){yu=(pu=gu.now())+mu,cu=hu=0;try{!function timerFlush(){now$1(),++cu;for(var t,e=uu;e;)(t=yu-e._time)>=0&&e._call.call(null,t),e=e._next;--cu}()}finally{cu=0,function nap(){var t,e,n=uu,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:uu=e);lu=t,sleep(r)}(),yu=0}}function poke(){var t=gu.now(),e=t-pu;e>du&&(mu-=e,pu=t)}function sleep(t){cu||(hu&&(hu=clearTimeout(hu)),t-yu>24?(t<1/0&&(hu=setTimeout(wake,t-gu.now()-mu)),fu&&(fu=clearInterval(fu))):(fu||(pu=gu.now(),fu=setInterval(poke,du)),cu=1,vu(wake)))}function timeout$1(t,e,n){var r=new Timer;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}Timer.prototype=function timer(t,e,n){var r=new Timer;return r.restart(t,e,n),r}.prototype={constructor:Timer,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?now$1():+n)+(null==e?0:+e),this._next||lu===this||(lu?lu._next=this:uu=this,lu=this),this._call=t,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var _u="propertychange";function listen(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function listenOnce(t,e,n,r){return listen(t,e,n,r,!0)}function unlistenByKey(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),clear$1(t))}var bu=function(){function Disposable(){this.disposed_=!1}return Disposable.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},Disposable.prototype.disposeInternal=function(){},Disposable}();function numberSafeCompareFunction(t,e){return t>e?1:t<e?-1:0}function includes(t,e){return t.indexOf(e)>=0}function linearFindNearest(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var i=void 0;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function find(t,e){for(var n,r=t.length>>>0,i=0;i<r;i++)if(e(n=t[i],i,t))return n;return null}function equals$1(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function findIndex(t,e){var n;return!t.every((function(r,i){return n=i,!e(r,i,t)}))?n:-1}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}var wu=function(){function BaseEvent(t){this.propagationStopped,this.type=t,this.target=null}return BaseEvent.prototype.preventDefault=function(){this.propagationStopped=!0},BaseEvent.prototype.stopPropagation=function(){this.propagationStopped=!0},BaseEvent}(),Tu=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Su=function(t){function Target(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_={},n.dispatching_={},n.listeners_={},n}return Tu(Target,t),Target.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_[t];n||(n=[],this.listeners_[t]=n),-1===n.indexOf(e)&&n.push(e)}},Target.prototype.dispatchEvent=function(t){var e="string"==typeof t?new wu(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var r,i=this.listeners_[n];if(i){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var o=0,a=i.length;o<a;++o)if(!1===i[o].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var s=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];s--;)this.removeEventListener(n,VOID);delete this.dispatching_[n]}return r}},Target.prototype.disposeInternal=function(){clear$1(this.listeners_)},Target.prototype.getListeners=function(t){return this.listeners_[t]},Target.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},Target.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var r=n.indexOf(e);-1!==r&&(t in this.pendingRemovals_?(n[r]=VOID,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}},Target}(bu),Eu={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",WHEEL:"wheel"},Mu=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Ou=function(t){function Observable(){var e=t.call(this)||this;return e.revision_=0,e}return Mu(Observable,t),Observable.prototype.changed=function(){++this.revision_,this.dispatchEvent(Eu.CHANGE)},Observable.prototype.getRevision=function(){return this.revision_},Observable.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=listen(this,t[i],e);return r}return listen(this,t,e)},Observable.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=listenOnce(this,t[i],e);return r}return listenOnce(this,t,e)},Observable.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},Observable}(Su);function unByKey(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)unlistenByKey(t[e]);else unlistenByKey(t)}var xu=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ku=function(t){function ObjectEvent(e,n,r){var i=t.call(this,e)||this;return i.key=n,i.oldValue=r,i}return xu(ObjectEvent,t),ObjectEvent}(wu),Cu=function(t){function BaseObject(e){var n=t.call(this)||this;return getUid(n),n.values_={},void 0!==e&&n.setProperties(e),n}return xu(BaseObject,t),BaseObject.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},BaseObject.prototype.getKeys=function(){return Object.keys(this.values_)},BaseObject.prototype.getProperties=function(){return Ur({},this.values_)},BaseObject.prototype.notify=function(t,e){var n;n=getChangeEventType(t),this.dispatchEvent(new ku(n,t,e)),n=_u,this.dispatchEvent(new ku(n,t,e))},BaseObject.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},BaseObject.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},BaseObject.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},BaseObject}(Ou),Pu={};function getChangeEventType(t){return Pu.hasOwnProperty(t)?Pu[t]:Pu[t]="change:"+t}var Iu=Ee.trim,Ru=o.parseInt,Lu=/^[+-]?0[Xx]/,Au=8!==Ru(be+"08")||22!==Ru(be+"0x16")?function parseInt(t,e){var n=Iu(String(t));return Ru(n,e>>>0||(Lu.test(n)?16:10))}:Ru;_export({target:"Number",stat:!0,forced:Number.parseInt!=Au},{parseInt:Au});var ju=function emptyElement(t){if(!(t instanceof HTMLElement))throw new TypeError("Expected an element");for(var e;e=t.lastChild;)t.removeChild(e);return t},Du=createCommonjsModule((function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}})),Nu=(Du.node,Du.nodeList,Du.string,Du.fn,9);if("undefined"!=typeof Element&&!Element.prototype.matches){var Fu=Element.prototype;Fu.matches=Fu.matchesSelector||Fu.mozMatchesSelector||Fu.msMatchesSelector||Fu.oMatchesSelector||Fu.webkitMatchesSelector}var Uu=function closest(t,e){for(;t&&t.nodeType!==Nu;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}};function _delegate(t,e,n,r,i){var o=listener$1.apply(this,arguments);return t.addEventListener(n,o,i),{destroy:function(){t.removeEventListener(n,o,i)}}}function listener$1(t,e,n,r){return function(n){n.delegateTarget=Uu(n.target,e),n.delegateTarget&&r.call(t,n)}}var Vu=function delegate(t,e,n,r,i){return"function"==typeof t.addEventListener?_delegate.apply(null,arguments):"function"==typeof n?_delegate.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return _delegate(t,e,n,r,i)})))};var zu=function listen$1(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!Du.string(e))throw new TypeError("Second argument must be a String");if(!Du.fn(n))throw new TypeError("Third argument must be a Function");if(Du.node(t))return function listenNode(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(Du.nodeList(t))return function listenNodeList(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(Du.string(t))return function listenSelector(t,e,n){return Vu(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")},Gu=createCommonjsModule((function(t){(t.exports={}).forEach=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}}})),qu=createCommonjsModule((function(t){var e=t.exports={};e.isIE=function(t){return!!function isAnyIeVersion(){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("msie")||-1!==t.indexOf("trident")||-1!==t.indexOf(" edge/")}()&&(!t||t===function(){var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");do{e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(n[0]);return t>4?t:void 0}())},e.isLegacyOpera=function(){return!!window.opera}})),Wu=createCommonjsModule((function(t){(t.exports={}).getOption=function getOption(t,e,n){var r=t[e];if(null==r&&void 0!==n)return n;return r}})),Ku=function batchProcessorMaker(t){var e=(t=t||{}).reporter,n=Wu.getOption(t,"async",!0),r=Wu.getOption(t,"auto",!0);r&&!n&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var i,o=Batch(),a=!1;function processBatch(){for(a=!0;o.size();){var t=o;o=Batch(),t.process()}a=!1}function processBatchAsync(){i=function requestFrame(t){return e=t,setTimeout(e,0);var e}(processBatch)}return{add:function addFunction(t,e){!a&&r&&n&&0===o.size()&&processBatchAsync(),o.add(t,e)},force:function forceProcessBatch(t){a||(void 0===t&&(t=n),i&&(!function cancelFrame(t){return clearTimeout(t)}(i),i=null),t?processBatchAsync():processBatch())}}};function Batch(){var t={},e=0,n=0,r=0;return{add:function add(i,o){o||(o=i,i=0),i>n?n=i:i<r&&(r=i),t[i]||(t[i]=[]),t[i].push(o),e++},process:function process(){for(var e=r;e<=n;e++)for(var i=t[e],o=0;o<i.length;o++){(0,i[o])()}},size:function getSize(){return e}}}var Bu="_erd";function getState(t){return t[Bu]}var Yu={initState:function initState(t){return t[Bu]={},getState(t)},getState:getState,cleanState:function cleanState(t){delete t[Bu]}},Zu=Gu.forEach,scroll=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,r=t.stateHandler.getState,i=(t.stateHandler.hasState,t.idHandler);if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var o=function getScrollbarSizes(){var t=document.createElement("div");t.style.cssText="position: absolute; width: 1000px; height: 1000px; visibility: hidden; margin: 0; padding: 0;";var e=document.createElement("div");e.style.cssText="position: absolute; width: 500px; height: 500px; overflow: scroll; visibility: none; top: -1500px; left: -1500px; visibility: hidden; margin: 0; padding: 0;",e.appendChild(t),document.body.insertBefore(e,document.body.firstChild);var n=500-e.clientWidth,r=500-e.clientHeight;return document.body.removeChild(e),{width:n,height:r}}(),a="erd_scroll_detection_container";function addEvent(t,n,r){if(t.addEventListener)t.addEventListener(n,r);else{if(!t.attachEvent)return e.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+n,r)}}function removeEvent(t,n,r){if(t.removeEventListener)t.removeEventListener(n,r);else{if(!t.detachEvent)return e.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+n,r)}}function getExpandElement(t){return r(t).container.childNodes[0].childNodes[0].childNodes[0]}function getShrinkElement(t){return r(t).container.childNodes[0].childNodes[0].childNodes[1]}return function injectScrollStyle(t,e){if(!document.getElementById(t)){var n=e+"_animation",r="/* Created by the element-resize-detector library. */\n";r+="."+e+" > div::-webkit-scrollbar { display: none; }\n\n",r+="."+(e+"_animation_active")+" { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+n+"; animation-name: "+n+"; }\n",r+="@-webkit-keyframes "+n+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function injectStyle(e,n){n=n||function(t){document.head.appendChild(t)};var r=document.createElement("style");return r.innerHTML=e,r.id=t,n(r),r}(r+="@keyframes "+n+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}("erd_scroll_detection_scrollbar_style",a),{makeDetectable:function makeDetectable(t,s,u){function debug(){if(t.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(i.get(s),"Scroll: "),e.log.apply)e.log.apply(null,n);else for(var r=0;r<n.length;r++)e.log(n[r])}}function isUnrendered(t){var e=r(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||-1===n.width.indexOf("px")}function getStyle(){var t=window.getComputedStyle(s),e={};return e.position=t.position,e.width=s.offsetWidth,e.height=s.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function storeStyle(){if(debug("storeStyle invoked."),r(s)){var t=getStyle();r(s).style=t}else debug("Aborting because element has been uninstalled")}function storeCurrentSize(t,e,n){r(t).lastWidth=e,r(t).lastHeight=n}function getWidthOffset(){return 2*o.width+1}function getHeightOffset(){return 2*o.height+1}function getExpandWidth(t){return t+10+getWidthOffset()}function getExpandHeight(t){return t+10+getHeightOffset()}function positionScrollbars(t,e,n){var r=getExpandElement(t),i=getShrinkElement(t),o=getExpandWidth(e),a=getExpandHeight(n),s=function getShrinkWidth(t){return 2*t+getWidthOffset()}(e),u=function getShrinkHeight(t){return 2*t+getHeightOffset()}(n);r.scrollLeft=o,r.scrollTop=a,i.scrollLeft=s,i.scrollTop=u}function injectContainerElement(){var t=r(s).container;if(!t){(t=document.createElement("div")).className=a,t.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;",r(s).container=t,function addAnimationClass(t){t.className+=" "+a+"_animation_active"}(t),s.appendChild(t);var onAnimationStart=function(){r(s).onRendered&&r(s).onRendered()};addEvent(t,"animationstart",onAnimationStart),r(s).onAnimationStart=onAnimationStart}return t}function injectScrollElements(){if(debug("Injecting elements"),r(s)){!function alterPositionStyles(){var t=r(s).style;if("static"===t.position){s.style.position="relative";var removeRelativeStyles=function(t,e,n,r){var i=n[r];"auto"!==i&&"0"!==function getNumericalValue(t){return t.replace(/[^-\d\.]/g,"")}(i)&&(t.warn("An element that is positioned static has style."+r+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",e),e.style[r]=0)};removeRelativeStyles(e,s,t,"top"),removeRelativeStyles(e,s,t,"right"),removeRelativeStyles(e,s,t,"bottom"),removeRelativeStyles(e,s,t,"left")}}();var t=r(s).container;t||(t=injectContainerElement());var n=o.width,i=o.height,u="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; "+function getLeftTopBottomRightCssText(t,e,n,r){return"left: "+(t=t?t+"px":"0")+"; top: "+(e=e?e+"px":"0")+"; right: "+(r=r?r+"px":"0")+"; bottom: "+(n=n?n+"px":"0")+";"}(-(1+n),-(1+i),-i,-n),l=document.createElement("div"),c=document.createElement("div"),h=document.createElement("div"),f=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div");l.dir="ltr",l.style.cssText="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;",l.className=a,c.className=a,c.style.cssText=u,h.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",f.style.cssText="position: absolute; left: 0; top: 0;",d.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",p.style.cssText="position: absolute; width: 200%; height: 200%;",h.appendChild(f),d.appendChild(p),c.appendChild(h),c.appendChild(d),l.appendChild(c),t.appendChild(l),addEvent(h,"scroll",onExpandScroll),addEvent(d,"scroll",onShrinkScroll),r(s).onExpandScroll=onExpandScroll,r(s).onShrinkScroll=onShrinkScroll}else debug("Aborting because element has been uninstalled");function onExpandScroll(){r(s).onExpand&&r(s).onExpand()}function onShrinkScroll(){r(s).onShrink&&r(s).onShrink()}}function registerListenersAndPositionElements(){function updateChildSizes(t,e,n){var r=function getExpandChildElement(t){return getExpandElement(t).childNodes[0]}(t),i=getExpandWidth(e),o=getExpandHeight(n);r.style.width=i+"px",r.style.height=o+"px"}function updateDetectorElements(o){var a=s.offsetWidth,u=s.offsetHeight;debug("Storing current size",a,u),storeCurrentSize(s,a,u),n.add(0,(function performUpdateChildSizes(){if(r(s))if(areElementsInjected()){if(t.debug){var n=s.offsetWidth,o=s.offsetHeight;n===a&&o===u||e.warn(i.get(s),"Scroll: Size changed before updating detector elements.")}updateChildSizes(s,a,u)}else debug("Aborting because element container has not been initialized");else debug("Aborting because element has been uninstalled")})),n.add(1,(function updateScrollbars(){r(s)?areElementsInjected()?positionScrollbars(s,a,u):debug("Aborting because element container has not been initialized"):debug("Aborting because element has been uninstalled")})),o&&n.add(2,(function(){r(s)?areElementsInjected()?o():debug("Aborting because element container has not been initialized"):debug("Aborting because element has been uninstalled")}))}function areElementsInjected(){return!!r(s).container}function notifyListenersIfNeeded(){debug("notifyListenersIfNeeded invoked");var t=r(s);return function isFirstNotify(){return void 0===r(s).lastNotifiedWidth}()&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height?debug("Not notifying: Size is the same as the start size, and there has been no notification yet."):t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight?debug("Not notifying: Size already notified"):(debug("Current size not notified, notifying..."),t.lastNotifiedWidth=t.lastWidth,t.lastNotifiedHeight=t.lastHeight,void Zu(r(s).listeners,(function(t){t(s)})))}function handleScroll(){if(debug("Scroll detected."),isUnrendered(s))debug("Scroll event fired while unrendered. Ignoring...");else{var t=s.offsetWidth,e=s.offsetHeight;t!==r(s).lastWidth||e!==r(s).lastHeight?(debug("Element size changed."),updateDetectorElements(notifyListenersIfNeeded)):debug("Element size has not changed ("+t+"x"+e+").")}}if(debug("registerListenersAndPositionElements invoked."),r(s)){r(s).onRendered=function handleRender(){if(debug("startanimation triggered."),isUnrendered(s))debug("Ignoring since element is still unrendered...");else{debug("Element rendered.");var t=getExpandElement(s),e=getShrinkElement(s);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(debug("Scrollbars out of sync. Updating detector elements..."),updateDetectorElements(notifyListenersIfNeeded))}},r(s).onExpand=handleScroll,r(s).onShrink=handleScroll;var o=r(s).style;updateChildSizes(s,o.width,o.height)}else debug("Aborting because element has been uninstalled")}function finalizeDomMutation(){if(debug("finalizeDomMutation invoked."),r(s)){var t=r(s).style;storeCurrentSize(s,t.width,t.height),positionScrollbars(s,t.width,t.height)}else debug("Aborting because element has been uninstalled")}function ready(){u(s)}function install(){debug("Installing..."),function initListeners(){r(s).listeners=[]}(),function storeStartSize(){var t=getStyle();r(s).startSize={width:t.width,height:t.height},debug("Element start size",r(s).startSize)}(),n.add(0,storeStyle),n.add(1,injectScrollElements),n.add(2,registerListenersAndPositionElements),n.add(3,finalizeDomMutation),n.add(4,ready)}u||(u=s,s=t,t=null),t=t||{},debug("Making detectable..."),!function isDetached(t){return!function isInDocument(t){return t===t.ownerDocument.body||t.ownerDocument.body.contains(t)}(t)||null===window.getComputedStyle(t)}(s)?install():(debug("Element is detached"),injectContainerElement(),debug("Waiting until element is attached..."),r(s).onRendered=function(){debug("Element is now attached"),install()})},addListener:function addListener(t,e){if(!r(t).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");r(t).listeners.push(e)},uninstall:function uninstall(t){var e=r(t);e&&(e.onExpandScroll&&removeEvent(getExpandElement(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&removeEvent(getShrinkElement(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&removeEvent(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))}}},Hu=Gu.forEach;function isCollection(t){return Array.isArray(t)||void 0!==t.length}function toArray(t){if(Array.isArray(t))return t;var e=[];return Hu(t,(function(t){e.push(t)})),e}function isElement(t){return t&&1===t.nodeType}var elementResizeDetector=function(t){var e,n;if((t=t||{}).idHandler)e={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var r=function(t){var e=t.idGenerator,n=t.stateHandler.getState;return{get:function getId(t){var e=n(t);return e&&void 0!==e.id?e.id:null},set:function setId(t){var r=n(t);if(!r)throw new Error("setId required the element to have a resize detection state.");var i=e.generate();return r.id=i,i}}}({idGenerator:(n=1,{generate:function generate(){return n++}}),stateHandler:Yu});e=r}var i=t.reporter;i||(i=function(t){function noop(){}var e={log:noop,warn:noop,error:noop};if(!t&&window.console){var attachFunction=function(t,e){t[e]=function reporterProxy(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var n=0;n<arguments.length;n++)t(arguments[n])}};attachFunction(e,"log"),attachFunction(e,"warn"),attachFunction(e,"error")}return e}(!1===i));var o=getOption(t,"batchProcessor",Ku({reporter:i})),a={};a.callOnAdd=!!getOption(t,"callOnAdd",!0),a.debug=!!getOption(t,"debug",!1);var s,u=function(t){var e={};function getListeners(n){var r=t.get(n);return void 0===r?[]:e[r]||[]}return{get:getListeners,add:function addListener(n,r){var i=t.get(n);e[i]||(e[i]=[]),e[i].push(r)},removeListener:function removeListener(t,e){for(var n=getListeners(t),r=0,i=n.length;r<i;++r)if(n[r]===e){n.splice(r,1);break}},removeAllListeners:function removeAllListeners(t){var e=getListeners(t);e&&(e.length=0)}}}(e),l=function(t){var e=t.stateHandler.getState;return{isDetectable:function isDetectable(t){var n=e(t);return n&&!!n.isDetectable},markAsDetectable:function markAsDetectable(t){e(t).isDetectable=!0},isBusy:function isBusy(t){return!!e(t).busy},markBusy:function markBusy(t,n){e(t).busy=!!n}}}({stateHandler:Yu}),c=getOption(t,"strategy","object"),h={reporter:i,batchProcessor:o,stateHandler:Yu,idHandler:e};if("scroll"===c&&(qu.isLegacyOpera()?(i.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),c="object"):qu.isIE(9)&&(i.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),c="object")),"scroll"===c)s=scroll(h);else{if("object"!==c)throw new Error("Invalid strategy name: "+c);s=function(t){var e=(t=t||{}).reporter,n=t.batchProcessor,r=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function getObject(t){return r(t).object}return{makeDetectable:function makeDetectable(t,i,o){o||(o=i,i=t,t=null),(t=t||{}).debug,qu.isIE(8)?o(i):function injectObject(t,i){var o="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",a=!1,s=window.getComputedStyle(t),u=t.offsetWidth,l=t.offsetHeight;function mutateDom(){function alterPositionStyles(){if("static"===s.position){t.style.position="relative";var removeRelativeStyles=function(t,e,n,r){var i=n[r];"auto"!==i&&"0"!==function getNumericalValue(t){return t.replace(/[^-\d\.]/g,"")}(i)&&(t.warn("An element that is positioned static has style."+r+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",e),e.style[r]=0)};removeRelativeStyles(e,t,s,"top"),removeRelativeStyles(e,t,s,"right"),removeRelativeStyles(e,t,s,"bottom"),removeRelativeStyles(e,t,s,"left")}}""!==s.position&&(alterPositionStyles(),a=!0);var n=document.createElement("object");n.style.cssText=o,n.tabIndex=-1,n.type="text/html",n.setAttribute("aria-hidden","true"),n.onload=function onObjectLoad(){a||alterPositionStyles(),function getDocument(t,e){t.contentDocument?e(t.contentDocument):setTimeout((function checkForObjectDocument(){getDocument(t,e)}),100)}(this,(function onObjectDocumentReady(e){i(t)}))},qu.isIE()||(n.data="about:blank"),t.appendChild(n),r(t).object=n,qu.isIE()&&(n.data="about:blank")}r(t).startSize={width:u,height:l},n?n.add(mutateDom):mutateDom()}(i,o)},addListener:function addListener(t,e){if(!getObject(t))throw new Error("Element is not detectable by this strategy.");function listenerProxy(){e(t)}qu.isIE(8)?(r(t).object={proxy:listenerProxy},t.attachEvent("onresize",listenerProxy)):getObject(t).contentDocument.defaultView.addEventListener("resize",listenerProxy)},uninstall:function uninstall(t){qu.isIE(8)?t.detachEvent("onresize",r(t).object.proxy):t.removeChild(getObject(t)),delete r(t).object}}}(h)}var f={};return{listenTo:function listenTo(t,n,r){function onResizeCallback(t){var e=u.get(t);Hu(e,(function callListenerProxy(e){e(t)}))}function addListener(t,e,n){u.add(e,n),t&&n(e)}if(r||(r=n,n=t,t={}),!n)throw new Error("At least one element required.");if(!r)throw new Error("Listener required.");if(isElement(n))n=[n];else{if(!isCollection(n))return i.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=toArray(n)}var o=0,c=getOption(t,"callOnAdd",a.callOnAdd),h=getOption(t,"onReady",(function noop(){})),d=getOption(t,"debug",a.debug);Hu(n,(function attachListenerToElement(t){Yu.getState(t)||(Yu.initState(t),e.set(t));var a=e.get(t);if(d&&i.log("Attaching listener to element",a,t),!l.isDetectable(t))return d&&i.log(a,"Not detectable."),l.isBusy(t)?(d&&i.log(a,"System busy making it detectable"),addListener(c,t,r),f[a]=f[a]||[],void f[a].push((function onReady(){++o===n.length&&h()}))):(d&&i.log(a,"Making detectable..."),l.markBusy(t,!0),s.makeDetectable({debug:d},t,(function onElementDetectable(t){if(d&&i.log(a,"onElementDetectable"),Yu.getState(t)){l.markAsDetectable(t),l.markBusy(t,!1),s.addListener(t,onResizeCallback),addListener(c,t,r);var e=Yu.getState(t);if(e&&e.startSize){var u=t.offsetWidth,p=t.offsetHeight;e.startSize.width===u&&e.startSize.height===p||onResizeCallback(t)}f[a]&&Hu(f[a],(function(t){t()}))}else d&&i.log(a,"Element uninstalled before being detectable.");delete f[a],++o===n.length&&h()})));d&&i.log(a,"Already detecable, adding listener."),addListener(c,t,r),o++})),o===n.length&&h()},removeListener:u.removeListener,removeAllListeners:u.removeAllListeners,uninstall:function uninstall(t){if(!t)return i.error("At least one element is required.");if(isElement(t))t=[t];else{if(!isCollection(t))return i.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=toArray(t)}Hu(t,(function(t){u.removeAllListeners(t),s.uninstall(t),Yu.cleanState(t)}))}}};function getOption(t,e,n){var r=t[e];return null==r&&void 0!==n?n:r}var Xu=function TimeFrame(t){_classCallCheck(this,TimeFrame),this.beginTime=t.beginTime,this.endTime=t.endTime,this.useDateFormat=!1,this.element=document.createElement("div"),this.element.style["flex-grow"]=t.weight,this.element.classList.add("fmi-metoclient-timeslider-frame"),this.element.classList.add(t.type),this.element.dataset.time=this.endTime,this.dragListenerElement=document.createElement("div"),this.dragListenerElement.classList.add("fmi-metoclient-timeslider-drag-listener"),this.dragListenerElement.style.pointerEvents="none",this.element.appendChild(this.dragListenerElement),this.keyboardAccessibleElement=document.createElement("button"),this.keyboardAccessibleElement.classList.add("fmi-metoclient-timeslider-keyboard-accessible"),this.keyboardAccessibleElement.style.pointerEvents="none",this.element.appendChild(this.keyboardAccessibleElement)},$u=2147483647,Qu=1e3,Ju="fmi-metoclient-timeslider-frames-container",tl="fmi-metoclient-timeslider-frame-tick",el="fmi-metoclient-timeslider-frame-text-wrapper",nl="fmi-metoclient-timeslider-frame-text",rl="fmi-metoclient-timeslider-indicator",il="fmi-metoclient-timeslider-hidden",ol=9e5,al={sources:{},time:null,timeZone:"Europe/Helsinki",timeZoneLabel:"",container:"map",resolutions:[2048,1024,512,256,128,64],metadata:{refreshInterval:"map"},delay:Qu,periodDelay:2*Qu,texts:{"Zoom In":"Zoom In","Zoom Out":"Zoom Out"}},sl="postrender",ul="movestart",ll="moveend";
/**
	 * @fileoverview Constant definitions for the animator.
	 * @author Finnish Meteorological Institute
	 * @license MIT
	 */function createCanvasContext2D(t,e){var n=document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function replaceNode(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function removeNode(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var cl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),hl=function(t){function Control(e){var n=t.call(this)||this;return n.element=e.element?e.element:null,n.target_=null,n.map_=null,n.listenerKeys=[],n.render=e.render?e.render:VOID,e.target&&n.setTarget(e.target),n}return cl(Control,t),Control.prototype.disposeInternal=function(){removeNode(this.element),t.prototype.disposeInternal.call(this)},Control.prototype.getMap=function(){return this.map_},Control.prototype.setMap=function(t){this.map_&&removeNode(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)unlistenByKey(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(t,sl,this.render,this)),t.render())},Control.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},Control}(Cu),fl=function(t){function TimeSlider(t){var e;_classCallCheck(this,TimeSlider);var n=t||{},r=document.createElement("div");return r.className="ol-unselectable ol-control fmi-metoclient-timeslider",(e=_possibleConstructorReturn(this,_getPrototypeOf(TimeSlider).call(this,{element:r,target:n.target}))).container_=r,e.config_=n,e.callbacks_=n.callbacks,e.visualPointer_=null,e.playButton_=null,e.animationPlay_=!1,e.frames_=[],e.locale_=n.locale,e.timeZone_=n.timeZone,e.timeZoneLabel_=n.timeZoneLabel,e.previousTickTextTop_=Number.POSITIVE_INFINITY,e.previousTickTextRight_=Number.NEGATIVE_INFINITY,e.previousTickTextBottom_=Number.NEGATIVE_INFINITY,e.previousTickTextLeft_=Number.POSITIVE_INFINITY,e.previousTickIndex_=-1,e.mouseListeners_=[],e.dragging_=!1,e.resizeDetector=elementResizeDetector(),e.timeListener=null,e.playingListener=null,e}return _inherits(TimeSlider,t),_createClass(TimeSlider,[{key:"createTimeSlider",value:function createTimeSlider(t){var e=this;this.clear(),this.createContainers(t),this.createFrames(t),this.createIndicators(),this.createTicks(),this.createPointer(),null!=this.getMap().get("time")&&this.updatePointer(this.getMap().get("time")),null!=this.callbacks_&&"function"==typeof this.callbacks_.timeSliderCreated&&this.callbacks_.timeSliderCreated(t),this.timeListener=this.getMap().on("change:time",(function(t){e.setAnimationTime(t.target.get("time"))})),this.playingListener=this.getMap().on("change:playing",(function(t){e.setAnimationPlay(t.target.get("playing"))}))}},{key:"step",value:function step(t){t>0?this.getMap().dispatchEvent("next"):t<0&&this.getMap().dispatchEvent("previous")}},{key:"createContainers",value:function createContainers(t){var e=this,n=document.createElement("div");n.classList.add("fmi-metoclient-timeslider-clickable-container"),n.appendChild(this.createPreMargin()),n.appendChild(this.createPreTools());var r=document.createElement("div");r.classList.add(Ju),n.appendChild(r),n.appendChild(this.createPostTools(t));var i=document.createElement("div");i.classList.add("fmi-metoclient-timeslider-post-margin"),this.mouseListeners_.push(zu(i,"click",(function(t){e.step(1)}))),n.appendChild(i),n.appendChild(this.createTimeZoneLabel()),this.container_.appendChild(n),this.container_.classList.add("noselect"),this.mouseListeners_.push(zu(this.container_,"mouseup",(function(t){e.setDragging(!1),document.activeElement.blur()}))),this.mouseListeners_.push(zu(this.container_,"touchend",(function(t){e.setDragging(!1),document.activeElement.blur()}))),this.resizeDetector.listenTo(this.container_.getElementsByClassName(Ju)[0],(function(t){e.createTicks()}))}},{key:"createPreMargin",value:function createPreMargin(){var t=this,e=document.createElement("div");return e.classList.add("fmi-metoclient-timeslider-pre-margin"),this.mouseListeners_.push(zu(e,"click",(function(){t.step(-1)}))),e}},{key:"createPreTools",value:function createPreTools(){var t=this,e=document.createElement("div");e.classList.add("fmi-metoclient-timeslider-pre-tools");var n=document.createElement("button");return n.classList.add("fmi-metoclient-timeslider-play-button"),n.tabIndex=100,this.animationPlay_&&n.classList.add("playing"),this.mouseListeners_.push(zu(n,"click",(function(){event.preventDefault();var e=t.getMap();e.set("playing",!e.get("playing"))}))),this.playButton_=n,e.appendChild(n),e}},{key:"createPostTools",value:function createPostTools(t){var e=this,n=this,r=document.createElement("div");r.classList.add("fmi-metoclient-timeslider-post-tools");var i=document.createElement("button");return i.classList.add("fmi-metoclient-timeslider-step-button"),i.tabIndex=110+t.length,r.appendChild(i),this.mouseListeners_.push(zu(i,"click",(function(){e.config_.showTimeSliderMenu||null!=n.callbacks_&&"function"==typeof n.callbacks_.toolClicked&&e.callbacks_.toolClicked("timeslider-right-button")}))),this.config_.showTimeSliderMenu,r}},{key:"createTimeZoneLabel",value:function createTimeZoneLabel(){var t=document.createElement("div");return t.innerHTML=this.timeZoneLabel_,t.classList.add("fmi-metoclient-timeslider-timezone"),t}},{key:"createFrames",value:function createFrames(t){var e,n,r,i,o,a,s=t.length,u=Date.now(),l=this.container_.getElementsByClassName(Ju)[0];if(ju(l),!(s<2)){var c=t[s-1]-t[0];for(e=0;e<s;e++)n=0===e?2*t[0]-t[1]:t[e-1],r=t[e],i=t[e]<=u?"history":"future",o=100*(r-n)/c,(a=this.createFrame(n,r,i,o)).element.getElementsByClassName("fmi-metoclient-timeslider-keyboard-accessible")[0].tabIndex=100+e,l.appendChild(a.element),this.frames_.push(a)}}},{key:"createFrame",value:function createFrame(t,e,n,r){var i,o,a=this,s=this,u=new Xu({beginTime:t,endTime:e,type:n,weight:r}),l=0,c=0;return this.mouseListeners_.push(zu(u.element,"mousedown",(function(){i=setTimeout((function(){clearTimeout(c),i=null,a.getMap().set("time",u.endTime)}),500)}))),this.mouseListeners_.push(zu(u.element,"mouseup",(function(){null==i||s.dragging_||(clearTimeout(i),1===++l?c=setTimeout((function(){clearTimeout(i),l=0,u.endTime===a.getMap().get("time")?a.getMap().set("time",u.beginTime):s.step(u.endTime-a.getMap().get("time"))}),300):2===l&&(clearTimeout(c),l=0,a.getMap().set("time",u.endTime)))}))),this.mouseListeners_.push(zu(u.element,"mouseout",(function(){null!=i&&clearTimeout(i)}))),this.mouseListeners_.push(zu(u.element,"touchstart",(function(){o=setTimeout((function(){o=null,a.getMap().set("time",u.endTime)}),500)}))),this.mouseListeners_.push(zu(u.element,"touchend",(function(){null!=o&&clearTimeout(o)}))),this.mouseListeners_.push(zu(u.element,"touchcancel",(function(){null!=o&&clearTimeout(o)}))),this.mouseListeners_.push(zu(u.dragListenerElement,"mousemove",(function(t){s.dragging_&&(document.activeElement.blur(),a.getMap().set("time",u.endTime))}))),this.mouseListeners_.push(zu(u.element,"touchmove",(function(t){if(s.dragging_&&void 0!==t.changedTouches[0]){for(var e,n,r=t.changedTouches[0].clientX,i=a.frames_.length,o=0;o<i;o++)if((n=a.frames_[o].element.getBoundingClientRect()).left<=r&&r<=n.right){e=a.frames_[o];break}document.activeElement.blur(),a.getMap().set("time",e.endTime)}}))),u}},{key:"createIndicators",value:function createIndicators(){this.frames_.forEach((function(t,e,n){var r=document.createElement("div");r.classList.add(rl),0===e?r.classList.add("first"):e===n.length-1&&r.classList.add("last"),t.element.appendChild(r)}))}},{key:"createTicks",value:function createTicks(){var t,e,n,r,i=[6e4,12e4,3e5,6e5,9e5,12e5,18e5,36e5,72e5,108e5,144e5,216e5,288e5,432e5,864e5],o=i.length,a=0,s=0,u=!0;do{if(s>10){this.configureTicks();break}if(n=a,u=this.configureTicks(n),t=0,e=-1,a=s>0?n:Number.POSITIVE_INFINITY,this.frames_.forEach((function(n,r,i){n.element.getElementsByClassName(tl).length>0&&(e>=0&&(t=n.endTime-i[e].endTime,(0===s&&t<a||0!==s&&t>a)&&(a=t)),e=r)})),a!==n&&(a<36e5&&36e5%a!=0||a>36e5&&a%36e5!=0||a<864e5&&864e5%a!=0))for(r=0;r<o;r++)if(a<i[r]){a=i[r];break}s++}while(u&&a!==n);this.showTicks()}},{key:"configureTicks",value:function configureTicks(){var t,e,n,r,i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this,s=0,u=!1,l=!1,c=!1,h=!1;this.previousTickTextTop_=null,this.previousTickTextRight_=Number.NEGATIVE_INFINITY,this.previousTickTextBottom_=null,this.previousTickTextLeft_=null,this.previousTickValue_=null,this.previousTickIndex_=null;var f=function clearFrame(t){var e=function removeChildrenByClass(e){Array.from(t.element.getElementsByClassName(e)).forEach((function(t){t.parentElement.removeChild(t)}))};e(el),e(tl)};this.frames_.forEach((function(t,e,n){f(t);var r=document.createElement("div");r.classList.add(el);var o=document.createElement("span");o.classList.add(nl),o.classList.add("noselect");var a=i.getTickText(t.endTime);o.textContent=a.content,t.useDateFormat=a.useDateFormat,r.appendChild(o),t.element.appendChild(r),t.element.style.display="none"})),this.frames_.forEach((function(t,e,r){var i,o=e+1;if(t.element.style.display="",ou.fromMillis(t.endTime).setZone(a.timeZone_).startOf("day").valueOf()===t.endTime&&(l=!0),o!==r.length){var f=t.element.querySelector("span."+nl).getBoundingClientRect();s<f.width&&(s=f.width),i=r[o].endTime-t.endTime,ou.fromMillis(t.endTime).setZone(a.timeZone_).isInDST&&i<864e5?c=!0:h=!0,null==n?(u=!0,n=i):u&&i!==n&&(u=!1)}})),c&&h&&(u=!1),u&&(n*=2),e=Math.round(s)+"px",Array.from(this.container_.getElementsByClassName(el)).forEach((function(t){t.style.width=e}));var d=function createTick(e,n,r,i){a.previousTickTextTop_=r.top,a.previousTickTextRight_=r.right,a.previousTickTextBottom_=r.bottom,a.previousTickTextLeft_=r.left,a.previousTickValue_=i,a.previousTickIndex_=n,(t=document.createElement("div")).classList.add(tl),t.classList.add(il),e.element.appendChild(t)};return(r=Array.from(this.container_.getElementsByClassName(Ju))).length>0&&(r=r[0].getBoundingClientRect()),this.frames_.forEach((function(t,e,i){var s,c,h=Array.from(t.element.getElementsByClassName(el));0!==h.length&&(c=(s=h.shift()).getBoundingClientRect(),0===r.length||r.left<=c.left&&r.right>=c.right&&r.top<=c.top&&r.bottom>=c.bottom?(a.previousTickTextRight_<c.left||a.previousTickTextLeft_>c.right||a.previousTickTextBottom_<c.top||a.previousTickTextTop_>c.bottom)&&(null==a.previousTickIndex_||t.endTime-i[a.previousTickIndex_].endTime>=o)?d(t,e,c,t.endTime):e>0&&a.previousTickIndex_>=0&&null!=i[a.previousTickIndex_]&&(0===o&&(t.endTime%36e5==0&&i[a.previousTickIndex_].endTime%36e5!=0||u&&t.endTime%36e5%n==0&&i[a.previousTickIndex_].endTime%36e5%n!=0||t.endTime%36e5==0&&i[a.previousTickIndex_].endTime%36e5==0&&ou.fromMillis(t.endTime).setZone(a.timeZone_).hour%2==0&&ou.fromMillis(i[a.previousTickIndex_].endTime).setZone(a.timeZone_).hour%2!=0)&&!i[a.previousTickIndex_].useDateFormat||t.useDateFormat||o>0&&(o>=36e5&&i[a.previousTickIndex_].endTime%36e5!=0||i[a.previousTickIndex_].endTime%36e5%o!=0||l&&ou.fromMillis(i[a.previousTickIndex_].endTime).setZone(a.timeZone_).hour%(o/36e5)!=0))?(f(i[a.previousTickIndex_]),d(t,e,c,t.endTime)):t.element.removeChild(s):t.element.removeChild(s))})),u}},{key:"showTicks",value:function showTicks(){Array.from(this.container_.getElementsByClassName(tl)).forEach((function(t){t.classList.remove(il)}))}},{key:"createPointer",value:function createPointer(){var t=this,e=document.createElement("div");e.classList.add("fmi-metoclient-timeslider-pointer");var n=document.createElement("div");n.classList.add("fmi-metoclient-timeslider-pointer-wrapper");var r=document.createElement("span");r.classList.add("fmi-metoclient-timeslider-pointer-text"),r.classList.add("noselect"),r.innerHTML="",n.appendChild(r),e.appendChild(n);var i=document.createElement("div");i.classList.add("fmi-metoclient-timeslider-pointer-handle"),e.appendChild(i);var o=document.createElement("div");o.classList.add("fmi-metoclient-timeslider-pointer-infotip"),o.style.display="none",e.appendChild(o),this.mouseListeners_.push(zu(e,"mousedown",(function(e){t.setDragging(!0)}))),this.mouseListeners_.push(zu(e,"touchstart",(function(e){t.setDragging(!0)}))),this.visualPointer_=e}},{key:"setAnimationTime",value:function setAnimationTime(t){if(t!==this.getMap().get("time")){var e,n,r,i=this.frames_.length,o=!0;if(this.animationPlay_){for(e=0;e<i;e++)if(this.getMap().get("time")<=this.frames_[e].endTime){n=e;break}null==n&&(n=i-1),r=(n+1)%i,Array.from(this.frames_[n].element.getElementsByClassName(rl)).forEach((function(t){"working"===t.getAttribute("data-status")&&(o=!1)})),o&&Array.from(this.frames_[r].element.getElementsByClassName(rl)).forEach((function(t){"working"===t.getAttribute("data-status")&&(o=!1)}))}o&&(this.getMap().set("time",t),this.updatePointer(t))}else this.updatePointer(t)}},{key:"updatePointer",value:function updatePointer(t){if(null!=this.visualPointer_){var e,n,r,i,o=this.frames_.length;for(e=0;e<o;e++)if(t<=this.frames_[e].endTime){n=e;break}null!=n&&(null==this.visualPointer_.parentElement?r=!0:Number.parseInt(this.visualPointer_.parentElement.dataset.time)!==t&&(this.visualPointer_.parentElement.removeChild(this.visualPointer_),r=!0),r&&(this.frames_[n].element.appendChild(this.visualPointer_),i=this.getTickText(this.frames_[n].endTime,!1).content,Array.from(this.visualPointer_.getElementsByClassName("fmi-metoclient-timeslider-pointer-text")).forEach((function(t){t.innerHTML=i})),Array.from(this.container_.getElementsByClassName("fmi-metoclient-timeslider-pointer-infotip")).forEach((function(t){t.innerHTML=i}))))}}},{key:"updateTimeLoaderVis",value:function updateTimeLoaderVis(t){if(this.config_.showTimeSlider){var e,n=t.length,r=n!==this.frames_.length,i=[];if(!r)for(e=0;e<n;e++)if(t[e].endTime!==this.frames_[e].endTime){r=!0;break}if(r){for(e=0;e<n;e++)i.push(t[e].endTime);this.createTimeSlider(i)}this.frames_.forEach((function(e,n){Array.from(e.element.getElementsByClassName(rl)).forEach((function(e){var n,r,i,o,a;if(null!=e.parentElement&&null!=e.parentElement.dataset&&(o=e.parentElement.dataset.time),null!=o&&null!=(i=parseInt(o)))for(n=t.length,r=0;r<n;r++)if(null!=(a=t[r].endTime)&&a===i){e.setAttribute("data-status",t[r].status);break}}))}))}}},{key:"setDragging",value:function setDragging(t){this.dragging_=t;var e=t?"auto":"none";Array.from(this.container_.getElementsByClassName("fmi-metoclient-timeslider-drag-listener")).forEach((function(t){t.style.pointerEvents=e})),Array.from(this.container_.getElementsByClassName("fmi-metoclient-timeslider-pointer")).forEach((function(e){t?e.classList.add("dragging"):e.classList.remove("dragging")}));var n=t?"block":"none";Array.from(this.container_.getElementsByClassName("fmi-metoclient-timeslider-pointer-infotip")).forEach((function(t){t.style.display=n}))}},{key:"setAnimationPlay",value:function setAnimationPlay(t){this.animationPlay_=t,this.animationPlay_?this.playButton_.classList.add("playing"):this.playButton_.classList.remove("playing")}},{key:"setTimeZone",value:function setTimeZone(t){var e=this;this.timeZone_=t,this.frames_.forEach((function(t){var n=e.getTickText(t.endTime),r=t.element.getElementsByClassName(nl);r.length>0&&(r[0].textContent=n.content)}))}},{key:"setTimeZoneLabel",value:function setTimeZoneLabel(t){var e=this;this.timeZoneLabel_=t,Array.from(this.container_.getElementsByClassName("fmi-metoclient-timeslider-timezone")).forEach((function(t){t.innerHTML=e.timeZoneLabel_}))}},{key:"setCallbacks",value:function setCallbacks(t){this.callbacks_=t}},{key:"getTickText",value:function getTickText(t){var e,n,r,i,o,a,s,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l="HH:mm",c=" d.M.",h=!1,f=this.frames_.length>0?this.frames_[0].endTime:Number.NEGATIVE_INFINITY;if(null==f)return"";t<f&&(t=f);var d=(e=ou.fromMillis(t).setZone(this.timeZone_).setLocale(this.locale_)).ordinal,p=e.year;if(u){for(n=this.frames_.length,r=0;r<n&&!((i=this.frames_[r].endTime)>=t);r++)Array.from(this.frames_[r].element.getElementsByClassName(el)).length>0&&(o=i);s=ou.local().setZone(this.timeZone_),null!=o?d===(a=ou.fromMillis(o).setZone(this.timeZone_)).ordinal&&p===a.year||(h=!0):t!==f||d===s.ordinal&&p===s.year||(h=!0)}return{content:h?e.weekdayShort+e.toFormat(c):e.toFormat(l),useDateFormat:h}}},{key:"clear",value:function clear(){null!=this.timeListener&&unByKey(this.timeListener),null!=this.playingListener&&unByKey(this.playingListener),this.mouseListeners_.forEach((function(t){t.destroy()})),this.resizeDetector.removeAllListeners(this.container_),ju(this.container_),this.frames_=[]}},{key:"destroy",value:function destroy(){this.clear()}}]),TimeSlider}(hl),dl={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"},pl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),yl=function(t){function BaseLayer(e){var n=t.call(this)||this,r=Ur({},e);return r[dl.OPACITY]=void 0!==e.opacity?e.opacity:1,assert("number"==typeof r[dl.OPACITY],64),r[dl.VISIBLE]=void 0===e.visible||e.visible,r[dl.Z_INDEX]=e.zIndex,r[dl.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,r[dl.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,r[dl.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,r[dl.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==r.className?e.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return pl(BaseLayer,t),BaseLayer.prototype.getClassName=function(){return this.className_},BaseLayer.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=clamp(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n?n:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},BaseLayer.prototype.getLayersArray=function(t){return abstract()},BaseLayer.prototype.getLayerStatesArray=function(t){return abstract()},BaseLayer.prototype.getExtent=function(){return this.get(dl.EXTENT)},BaseLayer.prototype.getMaxResolution=function(){return this.get(dl.MAX_RESOLUTION)},BaseLayer.prototype.getMinResolution=function(){return this.get(dl.MIN_RESOLUTION)},BaseLayer.prototype.getMinZoom=function(){return this.get(dl.MIN_ZOOM)},BaseLayer.prototype.getMaxZoom=function(){return this.get(dl.MAX_ZOOM)},BaseLayer.prototype.getOpacity=function(){return this.get(dl.OPACITY)},BaseLayer.prototype.getSourceState=function(){return abstract()},BaseLayer.prototype.getVisible=function(){return this.get(dl.VISIBLE)},BaseLayer.prototype.getZIndex=function(){return this.get(dl.Z_INDEX)},BaseLayer.prototype.setExtent=function(t){this.set(dl.EXTENT,t)},BaseLayer.prototype.setMaxResolution=function(t){this.set(dl.MAX_RESOLUTION,t)},BaseLayer.prototype.setMinResolution=function(t){this.set(dl.MIN_RESOLUTION,t)},BaseLayer.prototype.setMaxZoom=function(t){this.set(dl.MAX_ZOOM,t)},BaseLayer.prototype.setMinZoom=function(t){this.set(dl.MIN_ZOOM,t)},BaseLayer.prototype.setOpacity=function(t){assert("number"==typeof t,64),this.set(dl.OPACITY,t)},BaseLayer.prototype.setVisible=function(t){this.set(dl.VISIBLE,t)},BaseLayer.prototype.setZIndex=function(t){this.set(dl.Z_INDEX,t)},BaseLayer.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},BaseLayer}(Cu),ml="prerender",gl="postrender",vl="precompose",_l="postcompose",bl="rendercomplete",wl={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},Tl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Sl=function(t){function Layer(e){var n=this,r=Ur({},e);delete r.source,(n=t.call(this,r)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addEventListener(getChangeEventType(dl.SOURCE),n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return Tl(Layer,t),Layer.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},Layer.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},Layer.prototype.getSource=function(){return this.get(dl.SOURCE)||null},Layer.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():wl.UNDEFINED},Layer.prototype.handleSourceChange_=function(){this.changed()},Layer.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=listen(t,Eu.CHANGE,this.handleSourceChange_,this)),this.changed()},Layer.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},Layer.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},Layer.prototype.setMap=function(t){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=listen(t,vl,(function(t){t.frameState.layerStatesArray.push(this.getLayerState(!1))}),this),this.mapRenderKey_=listen(this,Eu.CHANGE,t.render,t),this.changed())},Layer.prototype.setSource=function(t){this.set(dl.SOURCE,t)},Layer.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},Layer.prototype.hasRenderer=function(){return!!this.renderer_},Layer.prototype.createRenderer=function(){return null},Layer.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},Layer}(yl);function inView(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}var El="preload",Ml="useInterimTilesOnError",Ol=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),xl=function(t){function BaseTileLayer(e){var n=this,r=e||{},i=Ur({},r);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return Ol(BaseTileLayer,t),BaseTileLayer.prototype.getPreload=function(){return this.get(El)},BaseTileLayer.prototype.setPreload=function(t){this.set(El,t)},BaseTileLayer.prototype.getUseInterimTilesOnError=function(){return this.get(Ml)},BaseTileLayer.prototype.setUseInterimTilesOnError=function(t){this.set(Ml,t)},BaseTileLayer}(Sl),kl=function(){function TileRange(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return TileRange.prototype.contains=function(t){return this.containsXY(t[1],t[2])},TileRange.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},TileRange.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},TileRange.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},TileRange.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},TileRange.prototype.getHeight=function(){return this.maxY-this.minY+1},TileRange.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},TileRange.prototype.getWidth=function(){return this.maxX-this.minX+1},TileRange.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},TileRange}();function createOrUpdate$1(t,e,n,r,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new kl(t,e,n,r)}var Cl={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5},Pl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Il=function(t){function RenderEvent(e,n,r,i){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=r,o.context=i,o}return Pl(RenderEvent,t),RenderEvent}(wu),Rl="ol-hidden",Ll="ol-unselectable",Al="ol-control",jl="ol-collapsed";new Array(6);function apply(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function compose(t,e,n,r,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=r*l,t[1]=i*u,t[2]=-r*u,t[3]=i*l,t[4]=a*r*l-s*r*u+e,t[5]=a*i*u+s*i*l+n,t}function makeInverse(t,e){var n=function determinant(t){return t[0]*t[3]-t[1]*t[2]}(e);assert(0!==n,32);var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5];return t[0]=a/n,t[1]=-i/n,t[2]=-o/n,t[3]=r/n,t[4]=(o*u-a*s)/n,t[5]=-(r*u-i*s)/n,t}var Dl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Nl=function(t){function LRUCache(e){var n=t.call(this)||this;return n.highWaterMark=void 0!==e?e:2048,n.count_=0,n.entries_={},n.oldest_=null,n.newest_=null,n}return Dl(LRUCache,t),LRUCache.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},LRUCache.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(Eu.CLEAR)},LRUCache.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},LRUCache.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},LRUCache.prototype.get=function(t,e){var n=this.entries_[t];return assert(void 0!==n,15),n===this.newest_?n.value_:(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n,n.value_)},LRUCache.prototype.remove=function(t){var e=this.entries_[t];return assert(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},LRUCache.prototype.getCount=function(){return this.count_},LRUCache.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},LRUCache.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},LRUCache.prototype.peekLast=function(){return this.oldest_.value_},LRUCache.prototype.peekLastKey=function(){return this.oldest_.key_},LRUCache.prototype.peekFirstKey=function(){return this.newest_.key_},LRUCache.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},LRUCache.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},LRUCache.prototype.set=function(t,e){assert(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},LRUCache.prototype.setSize=function(t){this.highWaterMark=t},LRUCache}(Su),Fl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Ul=new(function(t){function LabelCache(e){var n=t.call(this,e)||this;return n.consumers={},n}return Fl(LabelCache,t),LabelCache.prototype.clear=function(){this.consumers={},t.prototype.clear.call(this)},LabelCache.prototype.get=function(e,n){var r=t.prototype.get.call(this,e),i=getUid(n);return i in this.consumers||(this.consumers[i]={}),this.consumers[i][e]=!0,r},LabelCache.prototype.prune=function(){t:for(;this.canExpireCache();){var t=this.peekLastKey();for(var e in this.consumers)if(t in this.consumers[e])break t;var n=this.pop();for(var e in n.width=0,n.height=0,this.consumers)delete this.consumers[e][t]}},LabelCache.prototype.release=function(t){delete this.consumers[getUid(t)]},LabelCache}(Nl));function rotateAtOffset(t,e,n,r){0!==e&&(t.translate(n,r),t.rotate(e),t.translate(-n,-r))}var Vl={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},zl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Gl=function(t){function LayerRenderer(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n}return zl(LayerRenderer,t),LayerRenderer.prototype.getFeatures=function(t){return abstract()},LayerRenderer.prototype.prepareFrame=function(t){return abstract()},LayerRenderer.prototype.renderFrame=function(t,e){return abstract()},LayerRenderer.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},LayerRenderer.prototype.createLoadedTileFinder=function(t,e,n){return function(r,i){var o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,i,o)}.bind(this)},LayerRenderer.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){},LayerRenderer.prototype.getDataAtPixel=function(t,e,n){return abstract()},LayerRenderer.prototype.getLayer=function(){return this.layer_},LayerRenderer.prototype.handleFontsChanged=function(){},LayerRenderer.prototype.handleImageChange_=function(t){t.target.getState()===Vl.LOADED&&this.renderIfReadyAndVisible()},LayerRenderer.prototype.loadImage=function(t){var e=t.getState();return e!=Vl.LOADED&&e!=Vl.ERROR&&t.addEventListener(Eu.CHANGE,this.boundHandleImageChange_),e==Vl.IDLE&&(t.load(),e=t.getState()),e==Vl.LOADED},LayerRenderer.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==wl.READY&&t.changed()},LayerRenderer}(Ou),ql=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Wl=function(t){function CanvasLayerRenderer(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform_=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.createTransformStringCanvas_=createCanvasContext2D(1,1).canvas,n}return ql(CanvasLayerRenderer,t),CanvasLayerRenderer.prototype.useContainer=function(t,e,n){var r,i,o=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===o&&((s=t.firstElementChild)instanceof HTMLCanvasElement&&(i=s.getContext("2d")));if(i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var a=r.style;a.position="absolute",a.width="100%",a.height="100%";var s=(i=createCanvasContext2D()).canvas;r.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=i}},CanvasLayerRenderer.prototype.clip=function(t,e,n){var r=e.pixelRatio,i=e.size[0]*r/2,o=e.size[1]*r/2,a=e.viewState.rotation,s=getTopLeft(n),u=getTopRight(n),l=getBottomRight(n),c=getBottomLeft(n);apply(e.coordinateToPixelTransform,s),apply(e.coordinateToPixelTransform,u),apply(e.coordinateToPixelTransform,l),apply(e.coordinateToPixelTransform,c),t.save(),rotateAtOffset(t,-a,i,o),t.beginPath(),t.moveTo(s[0]*r,s[1]*r),t.lineTo(u[0]*r,u[1]*r),t.lineTo(l[0]*r,l[1]*r),t.lineTo(c[0]*r,c[1]*r),t.clip(),rotateAtOffset(t,a,i,o)},CanvasLayerRenderer.prototype.clipUnrotated=function(t,e,n){var r=getTopLeft(n),i=getTopRight(n),o=getBottomRight(n),a=getBottomLeft(n);apply(e.coordinateToPixelTransform,r),apply(e.coordinateToPixelTransform,i),apply(e.coordinateToPixelTransform,o),apply(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;apply(s,r),apply(s,i),apply(s,o),apply(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},CanvasLayerRenderer.prototype.dispatchRenderEvent_=function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){var i=new Il(t,this.inversePixelTransform,n,e);r.dispatchEvent(i)}},CanvasLayerRenderer.prototype.preRender=function(t,e){this.dispatchRenderEvent_(ml,t,e)},CanvasLayerRenderer.prototype.postRender=function(t,e){this.dispatchRenderEvent_(gl,t,e)},CanvasLayerRenderer.prototype.getRenderTransform=function(t,e,n,r,i,o,a){var s=i/2,u=o/2,l=r/e,c=-l,h=-t[0]+a,f=-t[1];return compose(this.tempTransform_,s,u,l,c,-n,h,f)},CanvasLayerRenderer.prototype.getDataAtPixel=function(t,e,n){var r,i=apply(this.inversePixelTransform,t.slice()),o=this.context;try{r=o.getImageData(Math.round(i[0]),Math.round(i[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},CanvasLayerRenderer.prototype.createTransformString=function(t){return this.createTransformStringCanvas_.style.transform=function toString$2(t){return"matrix("+t.join(", ")+")"}(t),this.createTransformStringCanvas_.style.transform},CanvasLayerRenderer}(Gl),Kl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Bl=function(t){function CanvasTileLayerRenderer(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new kl(0,0,0,0),n}return Kl(CanvasTileLayerRenderer,t),CanvasTileLayerRenderer.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==Cl.LOADED||n==Cl.EMPTY||n==Cl.ERROR&&!r},CanvasTileLayerRenderer.prototype.getTile=function(t,e,n,r){var i=r.pixelRatio,o=r.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,n,i,o);return s.getState()==Cl.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(Cl.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},CanvasTileLayerRenderer.prototype.loadedTileCallback=function(e,n,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,e,n,r)},CanvasTileLayerRenderer.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},CanvasTileLayerRenderer.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],r=t.viewState,i=r.projection,o=r.resolution,a=r.center,s=r.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),h=c.getRevision(),f=c.getTileGridForProjection(i),d=f.getZForResolution(o,c.zDirection),p=f.getResolution(d),y=t.extent,m=n.extent&&fromUserExtent(n.extent,i);m&&(y=getIntersection(y,fromUserExtent(n.extent,i)));var g=c.getTilePixelRatio(u),v=Math.round(t.size[0]*g),_=Math.round(t.size[1]*g);if(s){var b=Math.round(Math.sqrt(v*v+_*_));v=b,_=b}var w=p*v/2/g,T=p*_/2/g,S=[a[0]-w,a[1]-T,a[0]+w,a[1]+T],E=f.getTileRangeForExtentAndZ(y,d),M={};M[d]={};var O=this.createLoadedTileFinder(c,i,M),x=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;for(var C=E.minX;C<=E.maxX;++C)for(var P=E.minY;P<=E.maxY;++P){var I=this.getTile(d,C,P,t);if(this.isDrawableTile(I)){var R=getUid(this);if(I.getState()==Cl.LOADED){M[d][I.tileCoord.toString()]=I;var L=I.inTransition(R);this.newTiles_||!L&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(R,t.time))continue}var A=f.getTileCoordChildTileRange(I.tileCoord,k,x),j=!1;A&&(j=O(d+1,A)),j||f.forEachTileCoordParentTileRange(I.tileCoord,O,k,x)}var D=p/o;compose(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/g,1/g,s,-v/2,-_/2);var N=this.createTransformString(this.pixelTransform);this.useContainer(e,N,n.opacity);var F=this.context,U=F.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform_,v/2,_/2,D,D,0,-v/2,-_/2),U.width!=v||U.height!=_?(U.width=v,U.height=_):this.containerReused||F.clearRect(0,0,v,_),m&&this.clipUnrotated(F,t,m),this.preRender(F,t),this.renderedTiles.length=0;var V,z,G,q=Object.keys(M).map(Number);q.sort(numberSafeCompareFunction),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(V=[],z=[]):q=q.reverse();for(var W=q.length-1;W>=0;--W){var K=q[W],B=c.getTilePixelSize(K,u,i),Y=f.getResolution(K)/p,Z=B[0]*Y*D,H=B[1]*Y*D,X=f.getTileCoordForCoordAndZ(getTopLeft(S),K),$=f.getTileCoordExtent(X),Q=apply(this.tempTransform_,[g*($[0]-S[0])/p,g*(S[3]-$[3])/p]),J=g*c.getGutterForProjection(i),tt=M[K];for(var et in tt){var nt=(I=tt[et]).tileCoord,rt=Q[0]-(X[1]-nt[1])*Z,it=Math.round(rt+Z),ot=Q[1]-(X[2]-nt[2])*H,at=Math.round(ot+H),st=it-(C=Math.round(rt)),ut=at-(P=Math.round(ot)),lt=d===K;if(!(L=lt&&1!==I.getAlpha(getUid(this),t.time)))if(V){F.save(),G=[C,P,C+st,P,C+st,P+ut,C,P+ut];for(var ct=0,ht=V.length;ct<ht;++ct)if(d!==K&&K<z[ct]){var ft=V[ct];F.beginPath(),F.moveTo(G[0],G[1]),F.lineTo(G[2],G[3]),F.lineTo(G[4],G[5]),F.lineTo(G[6],G[7]),F.moveTo(ft[6],ft[7]),F.lineTo(ft[4],ft[5]),F.lineTo(ft[2],ft[3]),F.lineTo(ft[0],ft[1]),F.clip()}V.push(G),z.push(K)}else F.clearRect(C,P,st,ut);this.drawTileImage(I,t,C,P,st,ut,J,lt,n.opacity),V&&!L&&F.restore(),this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,c,I)}}return this.renderedRevision=h,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!equals(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=u,this.renderedProjection=i,this.manageTilePyramid(t,c,f,u,i,y,d,l.getPreload()),this.updateCacheSize_(t,c),this.scheduleExpireCache(t,c),this.postRender(F,t),n.extent&&F.restore(),N!==U.style.transform&&(U.style.transform=N),this.container},CanvasTileLayerRenderer.prototype.drawTileImage=function(t,e,n,r,i,o,a,s,u){var l=this.getTileImage(t);if(l){var c=getUid(this),h=s?t.getAlpha(c,e.time):1,f=u*h,d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,n,r,i,o),d&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(c)}},CanvasTileLayerRenderer.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},CanvasTileLayerRenderer.prototype.getTileImage=function(t){return t.getImage()},CanvasTileLayerRenderer.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=getUid(t);r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},CanvasTileLayerRenderer.prototype.updateUsedTiles=function(t,e,n){var r=getUid(e);r in t||(t[r]={}),t[r][n.getKey()]=!0},CanvasTileLayerRenderer.prototype.updateCacheSize_=function(t,e){var n=getUid(e),r=0;n in t.usedTiles&&(r+=Object.keys(t.usedTiles[n]).length),n in t.wantedTiles&&(r+=Object.keys(t.wantedTiles[n]).length);var i=e.tileCache;i.highWaterMark<r&&(i.highWaterMark=r)},CanvasTileLayerRenderer.prototype.manageTilePyramid=function(t,e,n,r,i,o,a,s,u){var l=getUid(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,h,f,d,p,y,m=t.wantedTiles[l],g=t.tileQueue;for(y=n.getMinZoom();y<=a;++y)for(h=n.getTileRangeForExtentAndZ(o,y,h),f=n.getResolution(y),d=h.minX;d<=h.maxX;++d)for(p=h.minY;p<=h.maxY;++p)a-y<=s?((c=e.getTile(y,d,p,r,i)).getState()==Cl.IDLE&&(m[c.getKey()]=!0,g.isKeyQueued(c.getKey())||g.enqueue([c,l,n.getTileCoordCenter(c.tileCoord),f])),void 0!==u&&u(c)):e.useTile(y,d,p,i)},CanvasTileLayerRenderer}(Wl);Bl.prototype.getLayer;var Yl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Zl=function(t){function TileLayer(e){return t.call(this,e)||this}return Yl(TileLayer,t),TileLayer.prototype.createRenderer=function(){return new Bl(this)},TileLayer}(xl),Hl=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Xl=function(t){function BaseImageLayer(e){var n=e||{};return t.call(this,n)||this}return Hl(BaseImageLayer,t),BaseImageLayer}(Sl),$l=.5,Ql=0,Jl=1,tc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ec=function(t){function CanvasImageLayerRenderer(e){var n=t.call(this,e)||this;return n.image_=null,n}return tc(CanvasImageLayerRenderer,t),CanvasImageLayerRenderer.prototype.getImage=function(){return this.image_?this.image_.getImage():null},CanvasImageLayerRenderer.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,r=t.viewState,i=r.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=getIntersection(s,fromUserExtent(e.extent,r.projection))),!a[Ql]&&!a[Jl]&&!isEmpty(s)){var u=r.projection,l=o.getImage(s,i,n,u);l&&this.loadImage(l)&&(this.image_=l)}return!!this.image_},CanvasImageLayerRenderer.prototype.renderFrame=function(t,e){var n=this.image_,r=n.getExtent(),i=n.getResolution(),o=n.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,u=t.viewState,l=u.center,c=u.resolution,h=t.size,f=s*i/(c*o),d=Math.round(h[0]*s),p=Math.round(h[1]*s),y=u.rotation;if(y){var m=Math.round(Math.sqrt(d*d+p*p));d=m,p=m}compose(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,y,-d/2,-p/2),makeInverse(this.inversePixelTransform,this.pixelTransform);var g=this.createTransformString(this.pixelTransform);this.useContainer(e,g,a.opacity);var v=this.context,_=v.canvas;_.width!=d||_.height!=p?(_.width=d,_.height=p):this.containerReused||v.clearRect(0,0,d,p);var b=!1;if(a.extent){var w=fromUserExtent(a.extent,u.projection);(b=!containsExtent(w,t.extent)&&intersects(w,t.extent))&&this.clipUnrotated(v,t,w)}var T=n.getImage(),S=compose(this.tempTransform_,d/2,p/2,f,f,0,o*(r[0]-l[0])/i,o*(l[1]-r[3])/i);this.renderedResolution=i*s/o;var E=S[4],M=S[5],O=T.width*S[0],x=T.height*S[3];if(this.preRender(v,t),O>=.5&&x>=.5){var k=a.opacity,C=void 0;1!==k&&(C=this.context.globalAlpha,this.context.globalAlpha=k),this.context.drawImage(T,0,0,+T.width,+T.height,Math.round(E),Math.round(M),Math.round(O),Math.round(x)),1!==k&&(this.context.globalAlpha=C)}return this.postRender(v,t),b&&v.restore(),g!==_.style.transform&&(_.style.transform=g),this.container},CanvasImageLayerRenderer}(Wl),nc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),rc=function(t){function ImageLayer(e){return t.call(this,e)||this}return nc(ImageLayer,t),ImageLayer.prototype.createRenderer=function(){return new ec(this)},ImageLayer}(Xl),ic="1.3.0",oc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ac=function(t){function ImageBase(e,n,r,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=r,o.resolution=n,o.state=i,o}return oc(ImageBase,t),ImageBase.prototype.changed=function(){this.dispatchEvent(Eu.CHANGE)},ImageBase.prototype.getExtent=function(){return this.extent},ImageBase.prototype.getImage=function(){return abstract()},ImageBase.prototype.getPixelRatio=function(){return this.pixelRatio_},ImageBase.prototype.getResolution=function(){return this.resolution},ImageBase.prototype.getState=function(){return this.state},ImageBase.prototype.load=function(){abstract()},ImageBase}(Su),sc="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",uc=-1!==sc.indexOf("firefox"),lc=(-1!==sc.indexOf("safari")&&sc.indexOf("chrom"),-1!==sc.indexOf("webkit")&&-1==sc.indexOf("edge")),cc=-1!==sc.indexOf("macintosh"),hc=window.devicePixelRatio||1,fc="undefined"!=typeof Image&&Image.prototype.decode,dc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),pc=function(t){function ImageWrapper(e,n,r,i,o,a){var s=t.call(this,e,n,r,Vl.IDLE)||this;return s.src_=i,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=Vl.IDLE,s.imageLoadFunction_=a,s}return dc(ImageWrapper,t),ImageWrapper.prototype.getImage=function(){return this.image_},ImageWrapper.prototype.handleImageError_=function(){this.state=Vl.ERROR,this.unlistenImage_(),this.changed()},ImageWrapper.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=getHeight(this.extent)/this.image_.height),this.state=Vl.LOADED,this.unlistenImage_(),this.changed()},ImageWrapper.prototype.load=function(){this.state!=Vl.IDLE&&this.state!=Vl.ERROR||(this.state=Vl.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},ImageWrapper.prototype.setImage=function(t){this.image_=t},ImageWrapper.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},ImageWrapper}(ac);function listenImage(t,e,n){var r=t;if(r.src&&fc){var i=r.decode(),o=!0;return i.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){o=!1}}var a=[listenOnce(r,Eu.LOAD,e),listenOnce(r,Eu.ERROR,n)];return function unlisten(){a.forEach(unlistenByKey)}}function calculateSourceResolution(t,e,n,r){var i=transform(n,e,t),o=getPointResolution(e,r,n),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||containsCoordinate(u,i)){var l=getPointResolution(t,o,i)/o;isFinite(l)&&l>0&&(o/=l)}return o}function enlargeClipPoint(t,e,n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);return[Math.round(n+i/a),Math.round(r+o/a)]}function render(t,e,n,r,i,o,a,s,u,l,c){var h=createCanvasContext2D(Math.round(n*t),Math.round(n*e));if(0===u.length)return h.canvas;h.scale(n,n);var f=[1/0,1/0,-1/0,-1/0];u.forEach((function(t,e,n){!function extend(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}(f,t.extent)}));var d=getWidth(f),p=getHeight(f),y=createCanvasContext2D(Math.round(n*d/r),Math.round(n*p/r)),m=n/r;u.forEach((function(t,e,n){var r=t.extent[0]-f[0],i=-(t.extent[3]-f[3]),o=getWidth(t.extent),a=getHeight(t.extent);y.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,r*m,i*m,o*m,a*m)}));var g=getTopLeft(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,u=a[0][0],l=a[0][1],c=a[1][0],d=a[1][1],p=a[2][0],m=a[2][1],v=(s[0][0]-g[0])/o,_=-(s[0][1]-g[1])/o,b=(s[1][0]-g[0])/o,w=-(s[1][1]-g[1])/o,T=(s[2][0]-g[0])/o,S=-(s[2][1]-g[1])/o,E=u,M=l;u=0,l=0;var O=function solveLinearSystem(t){for(var e=t.length,n=0;n<e;n++){for(var r=n,i=Math.abs(t[n][n]),o=n+1;o<e;o++){var a=Math.abs(t[o][n]);a>i&&(i=a,r=o)}if(0===i)return null;var s=t[r];t[r]=t[n],t[n]=s;for(var u=n+1;u<e;u++)for(var l=-t[u][n]/t[n][n],c=n;c<e+1;c++)n==c?t[u][c]=0:t[u][c]+=l*t[n][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var d=f-1;d>=0;d--)t[d][e]-=t[d][f]*h[f]}return h}([[c-=E,d-=M,0,0,b-v],[p-=E,m-=M,0,0,T-v],[0,0,c,d,w-_],[0,0,p,m,S-_]]);if(O){h.save(),h.beginPath();var x=(v+b+T)/3,k=(_+w+S)/3,C=enlargeClipPoint(x,k,v,_),P=enlargeClipPoint(x,k,b,w),I=enlargeClipPoint(x,k,T,S);h.moveTo(P[0],P[1]),h.lineTo(C[0],C[1]),h.lineTo(I[0],I[1]),h.clip(),h.transform(O[0],O[2],O[1],O[3],v,_),h.translate(f[0]-E,f[3]-M),h.scale(r/n,-r/n),h.drawImage(y.canvas,0,0),h.restore()}})),c&&(h.save(),h.strokeStyle="black",h.lineWidth=1,s.getTriangles().forEach((function(t,e,n){var r=t.target,i=(r[0][0]-g[0])/o,a=-(r[0][1]-g[1])/o,s=(r[1][0]-g[0])/o,u=-(r[1][1]-g[1])/o,l=(r[2][0]-g[0])/o,c=-(r[2][1]-g[1])/o;h.beginPath(),h.moveTo(s,u),h.lineTo(i,a),h.lineTo(l,c),h.closePath(),h.stroke()})),h.restore()),h.canvas}var yc=10,mc=function(){function Triangulation(t,e,n,r,i){this.sourceProj_=t,this.targetProj_=e;var o={},a=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&getWidth(r)==getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;var s=getTopLeft(n),u=getTopRight(n),l=getBottomRight(n),c=getBottomLeft(n),h=this.transformInv_(s),f=this.transformInv_(u),d=this.transformInv_(l),p=this.transformInv_(c);if(this.addQuad_(s,u,l,c,h,f,d,p,yc),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach((function(t,e,n){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-y>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-y>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-y>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}}return Triangulation.prototype.addTriangle_=function(t,e,n,r,i,o){this.triangles_.push({source:[r,i,o],target:[t,e,n]})},Triangulation.prototype.addQuad_=function(t,e,n,r,i,o,a,s,u){var l=boundingExtent([i,o,a,s]),c=this.sourceWorldWidth_?getWidth(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)d=getWidth(boundingExtent([t,e,n,r]))/this.targetWorldWidth_>.25||d;!f&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)}if(d||!this.maxSourceExtent_||intersects(l,this.maxSourceExtent_)){if(!(d||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(u>0))return;d=!0}if(u>0){if(!d){var p=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(p),m=void 0;if(f)m=(modulo(i[0],h)+modulo(a[0],h))/2-modulo(y[0],h);else m=(i[0]+a[0])/2-y[0];var g=(i[1]+a[1])/2-y[1];d=m*m+g*g>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var v=[(e[0]+n[0])/2,(e[1]+n[1])/2],_=this.transformInv_(v),b=[(r[0]+t[0])/2,(r[1]+t[1])/2],w=this.transformInv_(b);this.addQuad_(t,e,v,b,i,o,_,w,u-1),this.addQuad_(b,v,n,r,w,_,a,s,u-1)}else{var T=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(T),E=[(n[0]+r[0])/2,(n[1]+r[1])/2],M=this.transformInv_(E);this.addQuad_(t,T,E,r,i,S,M,s,u-1),this.addQuad_(T,e,n,E,S,o,a,M,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,r,i,a,s),this.addTriangle_(t,e,n,i,o,a)}},Triangulation.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,r){var i=e.source;extendCoordinate(t,i[0]),extendCoordinate(t,i[1]),extendCoordinate(t,i[2])})),t},Triangulation.prototype.getTriangles=function(){return this.triangles_},Triangulation}(),gc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),vc=function(t){function ReprojImage(e,n,r,i,o,a){var s=this,u=e.getExtent(),l=n.getExtent(),c=l?getIntersection(r,l):r,h=calculateSourceResolution(e,n,getCenter(c),i),f=new mc(e,n,c,u,h*$l),d=a(f.calculateSourceExtent(),h,o),p=d?Vl.IDLE:Vl.EMPTY,y=d?d.getPixelRatio():1;return(s=t.call(this,r,i,y,p)||this).targetProj_=n,s.maxSourceExtent_=u,s.triangulation_=f,s.targetResolution_=i,s.targetExtent_=r,s.sourceImage_=d,s.sourcePixelRatio_=y,s.canvas_=null,s.sourceListenerKey_=null,s}return gc(ReprojImage,t),ReprojImage.prototype.disposeInternal=function(){this.state==Vl.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},ReprojImage.prototype.getImage=function(){return this.canvas_},ReprojImage.prototype.getProjection=function(){return this.targetProj_},ReprojImage.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==Vl.LOADED){var e=getWidth(this.targetExtent_)/this.targetResolution_,n=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render(e,n,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},ReprojImage.prototype.load=function(){if(this.state==Vl.IDLE){this.state=Vl.LOADING,this.changed();var t=this.sourceImage_.getState();t==Vl.LOADED||t==Vl.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,Eu.CHANGE,(function(t){var e=this.sourceImage_.getState();e!=Vl.LOADED&&e!=Vl.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},ReprojImage.prototype.unlistenSource_=function(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null},ReprojImage}(ac),_c=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),bc=function(t){function Source(e){var n=t.call(this)||this;return n.projection_=get$4(e.projection),n.attributions_=adaptAttributions(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:wl.READY,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n}return _c(Source,t),Source.prototype.getAttributions=function(){return this.attributions_},Source.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},Source.prototype.getProjection=function(){return this.projection_},Source.prototype.getResolutions=function(){return abstract()},Source.prototype.getState=function(){return this.state_},Source.prototype.getWrapX=function(){return this.wrapX_},Source.prototype.refresh=function(){this.changed()},Source.prototype.setAttributions=function(t){this.attributions_=adaptAttributions(t),this.changed()},Source.prototype.setState=function(t){this.state_=t,this.changed()},Source}(Cu);function adaptAttributions(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var wc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Tc="imageloadstart",Sc="imageloadend",Ec="imageloaderror",Mc=function(t){function ImageSourceEvent(e,n){var r=t.call(this,e)||this;return r.image=n,r}return wc(ImageSourceEvent,t),ImageSourceEvent}(wu),Oc=function(t){function ImageSource(e){var n=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return n.resolutions_=void 0!==e.resolutions?e.resolutions:null,n.reprojectedImage_=null,n.reprojectedRevision_=0,n}return wc(ImageSource,t),ImageSource.prototype.getResolutions=function(){return this.resolutions_},ImageSource.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=linearFindNearest(this.resolutions_,t,0);t=this.resolutions_[e]}return t},ImageSource.prototype.getImage=function(t,e,n,r){var i=this.getProjection();if(i&&r&&!equivalent(i,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&equals(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new vc(i,r,t,e,n,function(t,e,n){return this.getImageInternal(t,e,n,i)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(r=i),this.getImageInternal(t,e,n,r)},ImageSource.prototype.getImageInternal=function(t,e,n,r){return abstract()},ImageSource.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case Vl.LOADING:this.loading=!0,this.dispatchEvent(new Mc(Tc,e));break;case Vl.LOADED:this.loading=!1,this.dispatchEvent(new Mc(Sc,e));break;case Vl.ERROR:this.loading=!1,this.dispatchEvent(new Mc(Ec,e))}},ImageSource}(bc);function defaultImageLoadFunction(t,e){t.getImage().src=e}var xc="carmentaserver",kc="geoserver",Cc="mapserver",Pc="qgis";function compareVersions(t,e){for(var n=(""+t).split("."),r=(""+e).split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),a=parseInt(r[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function appendParams(t,e){var n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));var r=n.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var Ic=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Rc=[101,101],Lc=function(t){function ImageWMS(e){var n=this,r=e||{};return(n=t.call(this,{attributions:r.attributions,projection:r.projection,resolutions:r.resolutions})||this).crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null,n.url_=r.url,n.imageLoadFunction_=void 0!==r.imageLoadFunction?r.imageLoadFunction:defaultImageLoadFunction,n.params_=r.params||{},n.v13_=!0,n.updateV13_(),n.serverType_=r.serverType,n.hidpi_=void 0===r.hidpi||r.hidpi,n.image_=null,n.imageSize_=[0,0],n.renderedRevision_=0,n.ratio_=void 0!==r.ratio?r.ratio:1.5,n}return Ic(ImageWMS,t),ImageWMS.prototype.getFeatureInfoUrl=function(t,e,n,r){if(void 0!==this.url_){var i=get$4(n),o=this.getProjection();o&&o!==i&&(e=calculateSourceResolution(o,i,t,e),t=transform(t,i,o));var a=getForViewAndSize(t,e,0,Rc),s={SERVICE:"WMS",VERSION:ic,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Ur(s,this.params_,r);var u=Math.floor((t[0]-a[0])/e),l=Math.floor((a[3]-t[1])/e);return s[this.v13_?"I":"X"]=u,s[this.v13_?"J":"Y"]=l,this.getRequestUrl_(a,Rc,1,o||i,s)}},ImageWMS.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var n={SERVICE:"WMS",VERSION:ic,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var r=this.params_.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;n.LAYER=r}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*i*39.37*(25.4/.28)}return Ur(n,e),appendParams(this.url_,n)}},ImageWMS.prototype.getParams=function(){return this.params_},ImageWMS.prototype.getImageInternal=function(t,e,n,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==n||this.hidpi_&&void 0!==this.serverType_||(n=1);var i=e/n,o=getCenter(t),a=getForViewAndSize(o,i,0,[Math.ceil(getWidth(t)/i),Math.ceil(getHeight(t)/i)]),s=getForViewAndSize(o,i,0,[Math.ceil(this.ratio_*getWidth(t)/i),Math.ceil(this.ratio_*getHeight(t)/i)]),u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==n&&containsExtent(u.getExtent(),a))return u;var l={SERVICE:"WMS",VERSION:ic,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Ur(l,this.params_),this.imageSize_[0]=Math.round(getWidth(s)/i),this.imageSize_[1]=Math.round(getHeight(s)/i);var c=this.getRequestUrl_(s,this.imageSize_,n,r,l);return this.image_=new pc(s,e,n,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(Eu.CHANGE,this.handleImageChange.bind(this)),this.image_},ImageWMS.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},ImageWMS.prototype.getRequestUrl_=function(t,e,n,r,i){if(assert(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=n)switch(this.serverType_){case kc:var o=90*n+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case Cc:i.MAP_RESOLUTION=90*n;break;case xc:case Pc:i.DPI=90*n;break;default:assert(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=r.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),appendParams(this.url_,i)},ImageWMS.prototype.getUrl=function(){return this.url_},ImageWMS.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},ImageWMS.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},ImageWMS.prototype.updateParams=function(t){Ur(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},ImageWMS.prototype.updateV13_=function(){var t=this.params_.VERSION||ic;this.v13_=compareVersions(t,"1.3")>=0},ImageWMS}(Oc);function buffer$1(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]+2*e,n[1]=t[1]+2*e,n}function scale(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function toSize(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function easeIn(t){return Math.pow(t,3)}function easeOut(t){return 1-easeIn(1-t)}function inAndOut(t){return 3*t*t-2*t*t*t}function linear(t){return t}var Ac=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),jc=function(t){function Tile(e,n,r){var i=t.call(this)||this,o=r||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.hifi=!0,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return Ac(Tile,t),Tile.prototype.changed=function(){this.dispatchEvent(Eu.CHANGE)},Tile.prototype.disposeInternal=function(){this.setState(Cl.ABORT)},Tile.prototype.getKey=function(){return this.key+"/"+this.tileCoord},Tile.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Cl.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},Tile.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==Cl.LOADED){t.interimTile=null;break}t.getState()==Cl.LOADING?e=t:t.getState()==Cl.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},Tile.prototype.getTileCoord=function(){return this.tileCoord},Tile.prototype.getState=function(){return this.state},Tile.prototype.setState=function(t){if(this.state!==Cl.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},Tile.prototype.load=function(){abstract()},Tile.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var r=e-n+1e3/60;return r>=this.transition_?1:easeIn(r/this.transition_)},Tile.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},Tile.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},Tile}(Su),Dc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Nc=function(t){function ImageTile(e,n,r,i,o,a){var s=t.call(this,e,n,a)||this;return s.crossOrigin_=i,s.src_=r,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return Dc(ImageTile,t),ImageTile.prototype.disposeInternal=function(){this.state==Cl.LOADING&&(this.unlistenImage_(),this.image_=getBlankImage()),this.interimTile&&this.interimTile.dispose(),t.prototype.disposeInternal.call(this)},ImageTile.prototype.getImage=function(){return this.image_},ImageTile.prototype.getKey=function(){return this.src_},ImageTile.prototype.handleImageError_=function(){this.state=Cl.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()},ImageTile.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Cl.LOADED:this.state=Cl.EMPTY,this.unlistenImage_(),this.changed()},ImageTile.prototype.load=function(){this.state==Cl.ERROR&&(this.state=Cl.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Cl.IDLE&&(this.state=Cl.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},ImageTile.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},ImageTile}(jc);function getBlankImage(){var t=createCanvasContext2D(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}function createOrUpdate$2(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function getKeyZXY(t,e,n){return t+"/"+e+"/"+n}function getKey(t){return getKeyZXY(t[0],t[1],t[2])}function hash(t){return(t[1]<<t[0])+t[2]}var Fc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Uc=function(t){function TileCache(e){return t.call(this,e)||this}return Fc(TileCache,t),TileCache.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().dispose()}},TileCache.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function fromKey(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(getKey(e.tileCoord)),e.dispose())}.bind(this))}},TileCache}(Nl),Vc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),zc=function(t){function ReprojTile(e,n,r,i,o,a,s,u,l,c,h){var f=t.call(this,o,Cl.IDLE)||this;f.renderEdges_=void 0!==h&&h,f.pixelRatio_=s,f.gutter_=u,f.canvas_=null,f.sourceTileGrid_=n,f.targetTileGrid_=i,f.wrappedTileCoord_=a||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var d=i.getTileCoordExtent(f.wrappedTileCoord_),p=f.targetTileGrid_.getExtent(),y=f.sourceTileGrid_.getExtent(),m=p?getIntersection(d,p):d;if(0===getArea(m))return f.state=Cl.EMPTY,f;var g=e.getExtent();g&&(y=y?getIntersection(y,g):g);var v=i.getResolution(f.wrappedTileCoord_[0]),_=calculateSourceResolution(e,r,getCenter(m),v);if(!isFinite(_)||_<=0)return f.state=Cl.EMPTY,f;var b=void 0!==c?c:$l;if(f.triangulation_=new mc(e,r,m,y,_*b),0===f.triangulation_.getTriangles().length)return f.state=Cl.EMPTY,f;f.sourceZ_=n.getZForResolution(_);var w=f.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(w[1]=clamp(w[1],y[1],y[3]),w[3]=clamp(w[3],y[1],y[3])):w=getIntersection(w,y)),getArea(w)){for(var T=n.getTileRangeForExtentAndZ(w,f.sourceZ_),S=T.minX;S<=T.maxX;S++)for(var E=T.minY;E<=T.maxY;E++){var M=l(f.sourceZ_,S,E,s);M&&f.sourceTiles_.push(M)}0===f.sourceTiles_.length&&(f.state=Cl.EMPTY)}else f.state=Cl.EMPTY;return f}return Vc(ReprojTile,t),ReprojTile.prototype.disposeInternal=function(){this.state==Cl.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},ReprojTile.prototype.getImage=function(){return this.canvas_},ReprojTile.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,r){e&&e.getState()==Cl.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Cl.ERROR;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(r,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=Cl.LOADED}this.changed()},ReprojTile.prototype.load=function(){if(this.state==Cl.IDLE){this.state=Cl.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,r){var i=e.getState();if(i==Cl.IDLE||i==Cl.LOADING){t++;var o=listen(e,Eu.CHANGE,(function(n){var r=e.getState();r!=Cl.LOADED&&r!=Cl.ERROR&&r!=Cl.EMPTY||(unlistenByKey(o),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,n){t.getState()==Cl.IDLE&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},ReprojTile.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null},ReprojTile}(jc);function createFromTemplate(t,e){var n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){return a?t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],n=e.getFullTileRange(t);return assert(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function createFromTileUrlFunctions(t){return 1===t.length?t[0]:function(e,n,r){if(e){var i=modulo(hash(e),t.length);return t[i](e,n,r)}}}function nullTileUrlFunction(t,e,n){}function expandUrl(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r=n[1].charCodeAt(0),i=n[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}var Gc=42,qc=256,Wc=[0,0,0],Kc=function(){function TileGrid(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,assert(function isSorted(t,e,n){var r=e||numberSafeCompareFunction;return t.every((function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(o>0||n&&0===o)}))}(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var n=0,r=this.resolutions_.length-1;n<r;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,assert(this.origins_.length==this.resolutions_.length,20));var i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=getTopLeft(i)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:qc,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new kl(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):i&&this.calculateTileRanges_(i)}return TileGrid.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var a=r.minY,s=r.maxY;a<=s;++a)n([e,i,a])},TileGrid.prototype.forEachTileCoordParentTileRange=function(t,e,n,r){var i,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,r);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?createOrUpdate$1(i=Math.floor(i/2),i,o=Math.floor(o/2),o,n):this.getTileRangeForExtentAndZ(a,s,n)))return!0;--s}return!1},TileGrid.prototype.getExtent=function(){return this.extent_},TileGrid.prototype.getMaxZoom=function(){return this.maxZoom},TileGrid.prototype.getMinZoom=function(){return this.minZoom},TileGrid.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},TileGrid.prototype.getResolution=function(t){return this.resolutions_[t]},TileGrid.prototype.getResolutions=function(){return this.resolutions_},TileGrid.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],i=2*t[2];return createOrUpdate$1(r,r+1,i,i+1,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},TileGrid.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),i=this.getResolution(t),o=toSize(this.getTileSize(t),this.tmpSize_),a=r[0]+e.minX*o[0]*i,s=r[0]+(e.maxX+1)*o[0]*i;return createOrUpdate(a,r[1]+e.minY*o[1]*i,s,r[1]+(e.maxY+1)*o[1]*i,n)},TileGrid.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=Wc;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);var i=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),createOrUpdate$1(i,r[1],o,r[2],n)},TileGrid.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=toSize(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},TileGrid.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=toSize(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*i[0]*r,a=n[1]-(t[2]+1)*i[1]*r;return createOrUpdate(o,a,o+i[0]*r,a+i[1]*r,e)},TileGrid.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},TileGrid.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,i){var o=this.getZForResolution(n),a=n/this.getResolution(o),s=this.getOrigin(o),u=toSize(this.getTileSize(o),this.tmpSize_),l=r?.5:0,c=r?.5:0,h=Math.floor((t-s[0])/n+l),f=Math.floor((s[1]-e)/n+c),d=a*h/u[0],p=a*f/u[1];return r?(d=Math.ceil(d)-1,p=Math.ceil(p)-1):(d=Math.floor(d),p=Math.floor(p)),createOrUpdate$2(o,d,p,i)},TileGrid.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,i){var o=this.getOrigin(n),a=this.getResolution(n),s=toSize(this.getTileSize(n),this.tmpSize_),u=r?.5:0,l=r?.5:0,c=Math.floor((t-o[0])/a+u),h=Math.floor((o[1]-e)/a+l),f=c/s[0],d=h/s[1];return r?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),createOrUpdate$2(n,f,d,i)},TileGrid.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},TileGrid.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},TileGrid.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},TileGrid.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},TileGrid.prototype.getZForResolution=function(t,e){return clamp(linearFindNearest(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},TileGrid.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},TileGrid}();function getForProjection(t){var e=t.getDefaultTileGrid();return e||(e=function createForProjection(t,e,n,r){return function createForExtent(t,e,n,r){var i=void 0!==r?r:Qr.TOP_LEFT,o=function resolutionsFromExtent(t,e,n){for(var r=void 0!==e?e:Gc,i=getHeight(t),o=getWidth(t),a=toSize(void 0!==n?n:qc),s=Math.max(o/a[0],i/a[1]),u=r+1,l=new Array(u),c=0;c<u;++c)l[c]=s/Math.pow(2,c);return l}(t,e,n);return new Kc({extent:t,origin:getCorner(t,i),resolutions:o,tileSize:n})}(extentFromProjection(t),e,n,r)}(t),t.setDefaultTileGrid(e)),e}function extentFromProjection(t){var e=(t=get$4(t)).getExtent();if(!e){var n=180*ei[ti.DEGREES]/t.getMetersPerUnit();e=createOrUpdate(-n,-n,n,n)}return e}var Bc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Yc=function(t){function TileSource(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var r=e.cacheSize;if(void 0===r){var i=[256,256],o=e.tileGrid;o&&toSize(o.getTileSize(o.getMinZoom()),i);var a="undefined"!=typeof screen,s=a?screen.availWidth||screen.width:1920,u=a?screen.availHeight||screen.height:1080;r=4*Math.ceil(s/i[0])*Math.ceil(u/i[1])}return n.tileCache=new Uc(r),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return Bc(TileSource,t),TileSource.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},TileSource.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},TileSource.prototype.forEachLoadedTile=function(t,e,n,r){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,u=!0,l=n.minX;l<=n.maxX;++l)for(var c=n.minY;c<=n.maxY;++c)a=getKeyZXY(e,l,c),s=!1,i.containsKey(a)&&(s=(o=i.get(a)).getState()===Cl.LOADED)&&(s=!1!==r(o)),s||(u=!1);return u},TileSource.prototype.getGutterForProjection=function(t){return 0},TileSource.prototype.getKey=function(){return this.key_},TileSource.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},TileSource.prototype.getOpaque=function(t){return this.opaque_},TileSource.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},TileSource.prototype.getTile=function(t,e,n,r,i){return abstract()},TileSource.prototype.getTileGrid=function(){return this.tileGrid},TileSource.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:getForProjection(t)},TileSource.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!equivalent(e,t)?null:this.tileCache},TileSource.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},TileSource.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=this.getTilePixelRatio(e),o=toSize(r.getTileSize(t),this.tmpSize);return 1==i?o:scale(o,i,this.tmpSize)},TileSource.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function wrapX(t,e,n){var r=e[0],i=t.getTileCoordCenter(e),o=extentFromProjection(n);if(containsCoordinate(o,i))return e;var a=getWidth(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,r)}(r,t,n)),function withinExtentAndZ(t,e){var n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,n):e.getFullTileRange(n))||o.containsXY(r,i)}(t,r)?t:null},TileSource.prototype.clear=function(){this.tileCache.clear()},TileSource.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},TileSource.prototype.useTile=function(t,e,n,r){},TileSource}(bc),Zc=function(t){function TileSourceEvent(e,n){var r=t.call(this,e)||this;return r.tile=n,r}return Bc(TileSourceEvent,t),TileSourceEvent}(wu),Hc="tileloadstart",Xc="tileloadend",$c="tileloaderror",Qc=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Jc=function(t){function UrlTile(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.generateTileUrlFunction_=!e.tileUrlFunction,n.tileLoadFunction=e.tileLoadFunction,n.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(n):nullTileUrlFunction,n.urls=null,e.urls?n.setUrls(e.urls):e.url&&n.setUrl(e.url),n.tileLoadingKeys_={},n}return Qc(UrlTile,t),UrlTile.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},UrlTile.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},UrlTile.prototype.getUrls=function(){return this.urls},UrlTile.prototype.handleTileChange=function(t){var e,n=t.target,r=getUid(n),i=n.getState();i==Cl.LOADING?(this.tileLoadingKeys_[r]=!0,e=Hc):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=i==Cl.ERROR?$c:i==Cl.LOADED||i==Cl.ABORT?Xc:void 0),null!=e&&this.dispatchEvent(new Zc(e,n))},UrlTile.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},UrlTile.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},UrlTile.prototype.setUrl=function(t){var e=expandUrl(t);this.urls=e,this.setUrls(e)},UrlTile.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function createFromTemplates(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=createFromTemplate(t[i],e);return createFromTileUrlFunctions(r)}(t,this.tileGrid),e):this.setKey(e)},UrlTile.prototype.useTile=function(t,e,n){var r=getKeyZXY(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},UrlTile}(Yc),th=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),eh=function(t){function TileImage(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:Nc,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return th(TileImage,t),TileImage.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},TileImage.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?e:{})}},TileImage.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!equivalent(this.getProjection(),t)?0:this.getGutter()},TileImage.prototype.getGutter=function(){return 0},TileImage.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!equivalent(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},TileImage.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!equivalent(e,t)){var n=getUid(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=getForProjection(t)),this.tileGridForProjection[n]}return this.tileGrid},TileImage.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||equivalent(e,t))return this.tileCache;var n=getUid(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Uc(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},TileImage.prototype.createTile_=function(t,e,n,r,i,o){var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,i),u=s?this.tileUrlFunction(s,r,i):void 0,l=new this.tileClass(a,void 0!==u?Cl.IDLE:Cl.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(Eu.CHANGE,this.handleTileChange.bind(this)),l},TileImage.prototype.getTile=function(t,e,n,r,i){var o=this.getProjection();if(o&&i&&!equivalent(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,n],u=void 0,l=getKey(s);a.containsKey(l)&&(u=a.get(l));var c=this.getKey();if(u&&u.key==c)return u;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(s,i),p=new zc(o,h,i,f,s,d,this.getTilePixelRatio(r),this.getGutter(),function(t,e,n,r){return this.getTileInternal(t,e,n,r,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return p.key=c,u?(p.interimTile=u,p.refreshInterimChain(),a.replace(l,p)):a.set(l,p),p}return this.getTileInternal(t,e,n,r,o||i)},TileImage.prototype.getTileInternal=function(t,e,n,r,i){var o=null,a=getKeyZXY(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,n,r,i,s),u.getState()==Cl.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,n,r,i,s),this.tileCache.set(a,o);return o},TileImage.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},TileImage.prototype.setTileGridForProjection=function(t,e){var n=get$4(t);if(n){var r=getUid(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}},TileImage}(Jc);function defaultTileLoadFunction(t,e){t.getImage().src=e}var nh=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),rh=function(t){function TileWMS(e){var n=this,r=e||{},i=r.params||{},o=!("TRANSPARENT"in i)||i.TRANSPARENT;return(n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:!o,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,tileUrlFunction:tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition})||this).gutter_=void 0!==r.gutter?r.gutter:0,n.params_=i,n.v13_=!0,n.serverType_=r.serverType,n.hidpi_=void 0===r.hidpi||r.hidpi,n.tmpExtent_=[1/0,1/0,-1/0,-1/0],n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return nh(TileWMS,t),TileWMS.prototype.getFeatureInfoUrl=function(t,e,n,r){var i=get$4(n),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),u=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=u[0])){var l=a.getResolution(u[0]),c=a.getTileCoordExtent(u,this.tmpExtent_),h=toSize(a.getTileSize(u[0]),this.tmpSize),f=this.gutter_;0!==f&&(h=buffer$1(h,f,this.tmpSize),c=buffer(c,l*f,c)),o&&o!==i&&(l=calculateSourceResolution(o,i,t,l),c=transformExtent(c,i,o),t=transform(t,i,o));var d={SERVICE:"WMS",VERSION:ic,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Ur(d,this.params_,r);var p=Math.floor((t[0]-c[0])/l),y=Math.floor((c[3]-t[1])/l);return d[this.v13_?"I":"X"]=p,d[this.v13_?"J":"Y"]=y,this.getRequestUrl_(u,h,c,1,o||i,d)}},TileWMS.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var n={SERVICE:"WMS",VERSION:ic,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var r=this.params_.LAYERS;if(!(!Array.isArray(r)||1===r.length))return;n.LAYER=r}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=t*i*39.37*(25.4/.28)}return Ur(n,e),appendParams(this.urls[0],n)}},TileWMS.prototype.getGutter=function(){return this.gutter_},TileWMS.prototype.getParams=function(){return this.params_},TileWMS.prototype.getRequestUrl_=function(t,e,n,r,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=r)switch(this.serverType_){case kc:var s=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case Cc:o.MAP_RESOLUTION=90*r;break;case xc:case Pc:o.DPI=90*r;break;default:assert(!1,52)}var u,l=i.getAxisOrientation(),c=n;if(this.v13_&&"ne"==l.substr(0,2)){var h=void 0;h=n[0],c[0]=n[1],c[1]=h,h=n[2],c[2]=n[3],c[3]=h}if(o.BBOX=c.join(","),1==a.length)u=a[0];else u=a[modulo(hash(t),a.length)];return appendParams(u,o)}},TileWMS.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},TileWMS.prototype.getKeyForParams_=function(){var t=0,e=[];for(var n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")},TileWMS.prototype.updateParams=function(t){Ur(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},TileWMS.prototype.updateV13_=function(){var t=this.params_.VERSION||ic;this.v13_=compareVersions(t,"1.3")>=0},TileWMS}(eh);function tileUrlFunction(t,e,n){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),!(r.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.tmpExtent_),a=toSize(r.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=buffer$1(a,s,this.tmpSize),o=buffer(o,i*s,o)),1!=e&&(a=scale(a,e,this.tmpSize));var u={SERVICE:"WMS",VERSION:ic,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Ur(u,this.params_),this.getRequestUrl_(t,a,o,e,n,u)}}var ih={KVP:"KVP",REST:"REST"},oh=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ah=function(t){function WMTSTileGrid(e){var n=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return n.matrixIds_=e.matrixIds,n}return oh(WMTSTileGrid,t),WMTSTileGrid.prototype.getMatrixId=function(t){return this.matrixIds_[t]},WMTSTileGrid.prototype.getMatrixIds=function(){return this.matrixIds_},WMTSTileGrid}(Kc);var sh=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),uh=function(t){function WMTS(e){var n=this,r=void 0!==e.requestEncoding?e.requestEncoding:ih.KVP,i=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=expandUrl(e.url)),(n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:nullTileUrlFunction,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",n.format_=void 0!==e.format?e.format:"image/jpeg",n.dimensions_=void 0!==e.dimensions?e.dimensions:{},n.layer_=e.layer,n.matrixSet_=e.matrixSet,n.style_=e.style,n.requestEncoding_=r,n.setKey(n.getKeyForDimensions_()),o&&o.length>0&&(n.tileUrlFunction=createFromTileUrlFunctions(o.map(createFromWMTSTemplate.bind(n)))),n}return sh(WMTS,t),WMTS.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(createFromTileUrlFunctions(t.map(createFromWMTSTemplate.bind(this))),e)},WMTS.prototype.getDimensions=function(){return this.dimensions_},WMTS.prototype.getFormat=function(){return this.format_},WMTS.prototype.getLayer=function(){return this.layer_},WMTS.prototype.getMatrixSet=function(){return this.matrixSet_},WMTS.prototype.getRequestEncoding=function(){return this.requestEncoding_},WMTS.prototype.getStyle=function(){return this.style_},WMTS.prototype.getVersion=function(){return this.version_},WMTS.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var n in this.dimensions_)e[t++]=n+"-"+this.dimensions_[n];return e.join("/")},WMTS.prototype.updateDimensions=function(t){Ur(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},WMTS}(eh);function optionsFromCapabilities(t,e){var n=find(t.Contents.Layer,(function(t,n,r){return t.Identifier==e.layer}));if(null===n)return null;var r,i=t.Contents.TileMatrixSet;(r=n.TileMatrixSetLink.length>1?findIndex(n.TileMatrixSetLink,"projection"in e?function(t,n,r){var o=find(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=get$4(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||get$4(o),s=get$4(e.projection);return a&&s?equivalent(a,s):o==e.projection}:function(t,n,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(r=0);var o=n.TileMatrixSetLink[r].TileMatrixSet,a=n.TileMatrixSetLink[r].TileMatrixSetLimits,s=n.Format[0];"format"in e&&(s=e.format),(r=findIndex(n.Style,(function(t,n,r){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(r=0);var u=n.Style[r].Identifier,l={};"Dimension"in n&&n.Dimension.forEach((function(t,e,n){var r=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[r]=i}));var c,h=find(t.Contents.TileMatrixSet,(function(t,e,n){return t.Identifier==o})),f=h.SupportedCRS;if(f&&(c=get$4(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||get$4(f)),"projection"in e){var d=get$4(e.projection);d&&(c&&!equivalent(d,c)||(c=d))}var p,y,m=n.WGS84BoundingBox;if(void 0!==m){var g=get$4("EPSG:4326").getExtent();y=m[0]==g[0]&&m[2]==g[2],p=transformExtent(m,"EPSG:4326",c);var v=c.getExtent();v&&(containsExtent(v,p)||(p=void 0))}var _=function createFromCapabilitiesMatrixSet(t,e,n){var r=[],i=[],o=[],a=[],s=[],u=void 0!==n?n:[],l=t.SupportedCRS,c=get$4(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||get$4(l),h=c.getMetersPerUnit(),f="ne"==c.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(u.length>0)||find(u,(function(n){return e.Identifier==n.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===n.TileMatrix}))){i.push(e.Identifier);var n=28e-5*e.ScaleDenominator/h,l=e.TileWidth,c=e.TileHeight;f?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),r.push(n),a.push(l==c?l:[l,c]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new ah({extent:e,origins:o,resolutions:r,matrixIds:i,tileSizes:a,sizes:s})}(h,p,a),b=[],w=e.requestEncoding;if(w=void 0!==w?w:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var T=t.OperationsMetadata.GetTile.DCP.HTTP.Get,S=0,E=T.length;S<E;++S)if(T[S].Constraint){var M=find(T[S].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===w&&(w=M[0]),w!==ih.KVP)break;includes(M,ih.KVP)&&b.push(T[S].href)}else T[S].href&&(w=ih.KVP,b.push(T[S].href));return 0===b.length&&(w=ih.REST,n.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,b.push(t.template))}))),{urls:b,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:w,tileGrid:_,style:u,dimensions:l,wrapX:y,crossOrigin:e.crossOrigin}}function createFromWMTSTemplate(t){var e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==ih.KVP&&Ur(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==ih.KVP?appendParams(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}));var r=this.tileGrid,i=this.dimensions_;return function(n,o,a){if(n){var s={TileMatrix:r.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};Ur(s,i);var u=t;return u=e==ih.KVP?appendParams(u,s):u.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}}var lh=function(){function SourceCreator(){_classCallCheck(this,SourceCreator)}return _createClass(SourceCreator,null,[{key:"wms",value:function wms(t,e){var n=e.sources[t.source];if(null==n)return null;var r=n.tiles[0],i=new Mi(r),o=Object.keys(i.query).reduce((function(t,e){return t["string"==typeof e?e.toUpperCase():e]=i.query[e],t}),{});Object.keys(t.url).forEach((function(e){o[e.toUpperCase()]=t.url[e].toString()}));var a=null!=t.time&&t.time.data.includes(e.time);a&&(o.TIME=new Date(e.time).toISOString());var s=new rh({url:getBaseUrl(r),params:o,tileGrid:new Kc({extent:null!=n.bounds?n.bounds:get(e.projection).getExtent(),resolutions:e.resolutions,tileSize:null!=n.tileSize?n.tileSize:1024}),transition:0});return a&&s.set("metoclient:time",e.time),s}},{key:"wmts",value:function wmts(t,e,n){if(null==e.sources[t.source]||"wmts"!==n.type)return null;var r=optionsFromCapabilities(n.data,{layer:t.url.layer,matrixSet:t.url.tilematrixset});if(null==r)return null;var i=null!=t.time&&t.time.data.includes(e.time);i&&(r.tileLoadFunction=function(t,n){t.getImage().src=n+"&Time="+new Date(e.time).toISOString()}),r.transition=0;var o=new uh(r);return null!=i&&o.set("metoclient:time",e.time),o}}]),SourceCreator}(),ch=function(){function LayerCreator(){_classCallCheck(this,LayerCreator)}return _createClass(LayerCreator,null,[{key:"tiled",value:function tiled(t,e,n){if(null==e.sources[t.source])return null;var r=t.url.service.toLowerCase();if("function"==typeof lh[r]){var i=lh[r](t,e,n);return null!=i?new Zl({source:i,preload:0,opacity:0,type:t.metadata&&t.metadata.type?t.metadata.type:"",title:t.metadata&&t.metadata.title?t.metadata.title:"",previous:null!=t.previous?t.previous:e.layers.find((function(t){return t.next===t.id})),next:null!=t.next?t.next:e.layers.find((function(t){return t.previous===t.id})),id:t.id}):null}}},{key:"image",value:function image(t,e,n){var r=e.sources[t.source];if(null==r||null==r.tiles[0]||0===r.tiles[0].length)return null;var i=getBaseUrl(r.tiles[0]),o=null!=t.time&&t.time.data.includes(e.time);if(o){var a=new Date(e.time).toISOString();t.url.TIME=a}var s=new Lc({url:i,params:t.url});return null==s?null:(o&&s.set("metoclient:time",e.time),new rc({source:s,preload:0,opacity:0,type:t.metadata&&t.metadata.type?t.metadata.type:"",title:t.metadata&&t.metadata.title?t.metadata.title:"",previous:null!=t.previous?t.previous:e.layers.find((function(t){return t.next===t.id})),next:null!=t.next?t.next:e.layers.find((function(t){return t.previous===t.id})),id:t.id}))}}]),LayerCreator}(),hh=function(){function SourceUpdater(){_classCallCheck(this,SourceUpdater)}return _createClass(SourceUpdater,null,[{key:"TileWMS",value:function TileWMS(t,e){var n=new Date(e).toISOString();t.set("metoclient:time",e),t.updateParams({TIME:n}),t.refresh()}},{key:"WMTS",value:function WMTS(t,e){var n=new Date(e).toISOString();t.set("metoclient:time",e),t.setTileLoadFunction((function(t,e){t.getImage().src=e+"&Time="+n}))}}]),SourceUpdater}(),fh="http://www.w3.org/1999/xlink";function readHref(t){return t.getAttributeNS(fh,"href")}document.implementation.createDocument("","",null);function getAllTextContent(t,e){return function getAllTextContent_(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{var r=void 0;for(r=t.firstChild;r;r=r.nextSibling)getAllTextContent_(r,e,n)}return n}(t,e,[]).join("")}function makeArrayPusher(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&r[r.length-1].push(i)}}function makeObjectPropertyPusher(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:r.localName,u=void 0;s in a?u=a[s]:(u=[],a[s]=u),u.push(o)}}}function makeObjectPropertySetter(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);void 0!==o&&(i[i.length-1][void 0!==e?e:r.localName]=o)}}function makeStructureNS(t,e,n){var r,i,o=void 0!==n?n:{};for(r=0,i=t.length;r<i;++r)o[t[r]]=e;return o}function pushParseAndPop(t,e,n,r,i){return r.push(t),function parseNode(t,e,n,r){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(r,i,n)}}}(e,n,r,i),r.pop()}var dh=function(){function XML(){}return XML.prototype.read=function(t){if(t){if("string"==typeof t){var e=function parse$1(t){return(new DOMParser).parseFromString(t,"application/xml")}(t);return this.readFromDocument(e)}return function isDocument(t){return"documentElement"in t}(t)?this.readFromDocument(t):this.readFromNode(t)}return null},XML.prototype.readFromDocument=function(t){},XML.prototype.readFromNode=function(t){},XML}();function readBooleanString(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function readDecimal(t){return readDecimalString(getAllTextContent(t,!1))}function readDecimalString(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function readNonNegativeInteger(t){return readNonNegativeIntegerString(getAllTextContent(t,!1))}function readNonNegativeIntegerString(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function readString(t){return getAllTextContent(t,!1).trim()}var ph=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),yh=[null,"http://www.opengis.net/wms"],mh=makeStructureNS(yh,{Service:makeObjectPropertySetter((function readService(t,e){return pushParseAndPop({},_h,t,e)})),Capability:makeObjectPropertySetter((function readCapability(t,e){return pushParseAndPop({},gh,t,e)}))}),gh=makeStructureNS(yh,{Request:makeObjectPropertySetter((function readRequest(t,e){return pushParseAndPop({},xh,t,e)})),Exception:makeObjectPropertySetter((function readException(t,e){return pushParseAndPop([],Sh,t,e)})),Layer:makeObjectPropertySetter((function readCapabilityLayer(t,e){return pushParseAndPop({},Eh,t,e)}))}),vh=function(t){function WMSCapabilities(){var e=t.call(this)||this;return e.version=void 0,e}return ph(WMSCapabilities,t),WMSCapabilities.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},WMSCapabilities.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=pushParseAndPop({version:this.version},mh,t,[]);return e||null},WMSCapabilities}(dh),_h=makeStructureNS(yh,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter((function readContactInformation(t,e){return pushParseAndPop({},bh,t,e)})),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),LayerLimit:makeObjectPropertySetter(readNonNegativeInteger),MaxWidth:makeObjectPropertySetter(readNonNegativeInteger),MaxHeight:makeObjectPropertySetter(readNonNegativeInteger)}),bh=makeStructureNS(yh,{ContactPersonPrimary:makeObjectPropertySetter((function readContactPersonPrimary(t,e){return pushParseAndPop({},wh,t,e)})),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter((function readContactAddress(t,e){return pushParseAndPop({},Th,t,e)})),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),wh=makeStructureNS(yh,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),Th=makeStructureNS(yh,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),Sh=makeStructureNS(yh,{Format:makeArrayPusher(readString)}),Eh=makeStructureNS(yh,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter((function readEXGeographicBoundingBox(t,e){var n=pushParseAndPop({},Oh,t,e);if(!n)return;var r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,a=n.northBoundLatitude;if(void 0===r||void 0===i||void 0===o||void 0===a)return;return[r,i,o,a]})),BoundingBox:makeObjectPropertyPusher((function readBoundingBox(t,e){var n=[readDecimalString(t.getAttribute("minx")),readDecimalString(t.getAttribute("miny")),readDecimalString(t.getAttribute("maxx")),readDecimalString(t.getAttribute("maxy"))],r=[readDecimalString(t.getAttribute("resx")),readDecimalString(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:r}})),Dimension:makeObjectPropertyPusher((function readDimension(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:readBooleanString(t.getAttribute("multipleValues")),nearestValue:readBooleanString(t.getAttribute("nearestValue")),current:readBooleanString(t.getAttribute("current")),values:readString(t)}})),Attribution:makeObjectPropertySetter((function readAttribution(t,e){return pushParseAndPop({},Mh,t,e)})),AuthorityURL:makeObjectPropertyPusher((function readAuthorityURL(t,e){var n=readFormatOnlineresource(t,e);if(n)return n.name=t.getAttribute("name"),n;return})),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher((function readMetadataURL(t,e){var n=readFormatOnlineresource(t,e);if(n)return n.type=t.getAttribute("type"),n;return})),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher((function readStyle(t,e){return pushParseAndPop({},Ih,t,e)})),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher((function readLayer(t,e){var n=e[e.length-1],r=pushParseAndPop({},Eh,t,e);if(!r)return;var i=readBooleanString(t.getAttribute("queryable"));void 0===i&&(i=n.queryable);r.queryable=void 0!==i&&i;var o=readNonNegativeIntegerString(t.getAttribute("cascaded"));void 0===o&&(o=n.cascaded);r.cascaded=o;var a=readBooleanString(t.getAttribute("opaque"));void 0===a&&(a=n.opaque);r.opaque=void 0!==a&&a;var s=readBooleanString(t.getAttribute("noSubsets"));void 0===s&&(s=n.noSubsets);r.noSubsets=void 0!==s&&s;var u=readDecimalString(t.getAttribute("fixedWidth"));u||(u=n.fixedWidth);r.fixedWidth=u;var l=readDecimalString(t.getAttribute("fixedHeight"));l||(l=n.fixedHeight);r.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach((function(t){if(t in n){var e=r[t]||[];r[t]=e.concat(n[t])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in r)){var e=n[t];r[t]=e}})),r}))}),Mh=makeStructureNS(yh,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),Oh=makeStructureNS(yh,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),xh=makeStructureNS(yh,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),kh=makeStructureNS(yh,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher((function readDCPType(t,e){return pushParseAndPop({},Ch,t,e)}))}),Ch=makeStructureNS(yh,{HTTP:makeObjectPropertySetter((function readHTTP(t,e){return pushParseAndPop({},Ph,t,e)}))}),Ph=makeStructureNS(yh,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),Ih=makeStructureNS(yh,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),Rh=makeStructureNS(yh,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),Lh=makeStructureNS(yh,{Keyword:makeArrayPusher(readString)});function readFormatOnlineresource(t,e){return pushParseAndPop({},Rh,t,e)}function readOperationType(t,e){return pushParseAndPop({},kh,t,e)}function readSizedFormatOnlineresource(t,e){var n=readFormatOnlineresource(t,e);if(n){var r=[readNonNegativeIntegerString(t.getAttribute("width")),readNonNegativeIntegerString(t.getAttribute("height"))];return n.size=r,n}}function readKeywordList(t,e){return pushParseAndPop([],Lh,t,e)}var Ah=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),jh=[null,"http://www.opengis.net/ows/1.1"],Dh=makeStructureNS(jh,{ServiceIdentification:makeObjectPropertySetter((function readServiceIdentification(t,e){return pushParseAndPop({},Hh,t,e)})),ServiceProvider:makeObjectPropertySetter((function readServiceProvider(t,e){return pushParseAndPop({},Xh,t,e)})),OperationsMetadata:makeObjectPropertySetter((function readOperationsMetadata(t,e){return pushParseAndPop({},Kh,t,e)}))}),Nh=function(t){function OWS(){return t.call(this)||this}return Ah(OWS,t),OWS.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},OWS.prototype.readFromNode=function(t){var e=pushParseAndPop({},Dh,t,[]);return e||null},OWS}(dh),Fh=makeStructureNS(jh,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),Uh=makeStructureNS(jh,{Value:makeObjectPropertyPusher((function readValue(t,e){return readString(t)}))}),Vh=makeStructureNS(jh,{AllowedValues:makeObjectPropertySetter((function readAllowedValues(t,e){return pushParseAndPop({},Uh,t,e)}))}),zh=makeStructureNS(jh,{Phone:makeObjectPropertySetter((function readPhone(t,e){return pushParseAndPop({},Bh,t,e)})),Address:makeObjectPropertySetter((function readAddress(t,e){return pushParseAndPop({},Fh,t,e)}))}),Gh=makeStructureNS(jh,{HTTP:makeObjectPropertySetter((function readHttp(t,e){return pushParseAndPop({},qh,t,e)}))}),qh=makeStructureNS(jh,{Get:makeObjectPropertyPusher((function readGet(t,e){var n=readHref(t);if(!n)return;return pushParseAndPop({href:n},Yh,t,e)})),Post:void 0}),Wh=makeStructureNS(jh,{DCP:makeObjectPropertySetter((function readDcp(t,e){return pushParseAndPop({},Gh,t,e)}))}),Kh=makeStructureNS(jh,{Operation:function readOperation(t,e){var n=t.getAttribute("name"),r=pushParseAndPop({},Wh,t,e);if(!r)return;e[e.length-1][n]=r}}),Bh=makeStructureNS(jh,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),Yh=makeStructureNS(jh,{Constraint:makeObjectPropertyPusher((function readConstraint(t,e){var n=t.getAttribute("name");if(!n)return;return pushParseAndPop({name:n},Vh,t,e)}))}),Zh=makeStructureNS(jh,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter((function readContactInfo(t,e){return pushParseAndPop({},zh,t,e)}))}),Hh=makeStructureNS(jh,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),Xh=makeStructureNS(jh,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter((function readServiceContact(t,e){return pushParseAndPop({},Zh,t,e)}))});var $h=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Qh=[null,"http://www.opengis.net/wmts/1.0"],Jh=[null,"http://www.opengis.net/ows/1.1"],tf=makeStructureNS(Qh,{Contents:makeObjectPropertySetter((function readContents(t,e){return pushParseAndPop({},nf,t,e)}))}),ef=function(t){function WMTSCapabilities(){var e=t.call(this)||this;return e.owsParser_=new Nh,e}return $h(WMTSCapabilities,t),WMTSCapabilities.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},WMTSCapabilities.prototype.readFromNode=function(t){var e=t.getAttribute("version").trim(),n=this.owsParser_.readFromNode(t);return n?(n.version=e,(n=pushParseAndPop(n,tf,t,[]))||null):null},WMTSCapabilities}(dh),nf=makeStructureNS(Qh,{Layer:makeObjectPropertyPusher((function readLayer$1(t,e){return pushParseAndPop({},rf,t,e)})),TileMatrixSet:makeObjectPropertyPusher((function readTileMatrixSet(t,e){return pushParseAndPop({},hf,t,e)}))}),rf=makeStructureNS(Qh,{Style:makeObjectPropertyPusher((function readStyle$1(t,e){var n=pushParseAndPop({},of,t,e);if(!n)return;var r="true"===t.getAttribute("isDefault");return n.isDefault=r,n})),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher((function readTileMatrixSetLink(t,e){return pushParseAndPop({},af,t,e)})),Dimension:makeObjectPropertyPusher((function readDimensions(t,e){return pushParseAndPop({},lf,t,e)})),ResourceURL:makeObjectPropertyPusher((function readResourceUrl(t,e){var n=t.getAttribute("format"),r=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};n&&(o.format=n);r&&(o.template=r);i&&(o.resourceType=i);return o}))},makeStructureNS(Jh,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter((function readWgs84BoundingBox(t,e){var n=pushParseAndPop([],cf,t,e);if(2!=n.length)return;return boundingExtent(n)})),Identifier:makeObjectPropertySetter(readString)})),of=makeStructureNS(Qh,{LegendURL:makeObjectPropertyPusher((function readLegendUrl(t,e){var n={};return n.format=t.getAttribute("format"),n.href=readHref(t),n}))},makeStructureNS(Jh,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),af=makeStructureNS(Qh,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter((function readTileMatrixLimitsList(t,e){return pushParseAndPop([],sf,t,e)}))}),sf=makeStructureNS(Qh,{TileMatrixLimits:makeArrayPusher((function readTileMatrixLimits(t,e){return pushParseAndPop({},uf,t,e)}))}),uf=makeStructureNS(Qh,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readNonNegativeInteger),MaxTileRow:makeObjectPropertySetter(readNonNegativeInteger),MinTileCol:makeObjectPropertySetter(readNonNegativeInteger),MaxTileCol:makeObjectPropertySetter(readNonNegativeInteger)}),lf=makeStructureNS(Qh,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(Jh,{Identifier:makeObjectPropertySetter(readString)})),cf=makeStructureNS(Jh,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),hf=makeStructureNS(Qh,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher((function readTileMatrix(t,e){return pushParseAndPop({},ff,t,e)}))},makeStructureNS(Jh,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),ff=makeStructureNS(Qh,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readNonNegativeInteger),TileHeight:makeObjectPropertySetter(readNonNegativeInteger),MatrixWidth:makeObjectPropertySetter(readNonNegativeInteger),MatrixHeight:makeObjectPropertySetter(readNonNegativeInteger)},makeStructureNS(Jh,{Identifier:makeObjectPropertySetter(readString)}));function readCoordinates(t,e){var n=readString(t).split(/\s+/);if(n&&2==n.length){var r=+n[0],i=+n[1];if(!isNaN(r)&&!isNaN(i))return[r,i]}}var df,pf=function(){function CapabilitiesReader(){_classCallCheck(this,CapabilitiesReader)}return _createClass(CapabilitiesReader,null,[{key:"wms",value:function wms(t){return(new vh).read(t)}},{key:"wmts",value:function wmts(t){return(new ef).read(t)}}]),CapabilitiesReader}(),yf={};if("undefined"!=typeof Symbol&&"function"==typeof Symbol.for&&"symbol"==typeof Symbol("a symbol for testing symbols"))df=Symbol;else{var mf=0,gf={},vf={};(df=function CanSymbolPolyfill(t){var e="@@symbol"+mf+++t,n={};return Object.defineProperties(n,{toString:{value:function(){return e}}}),n}).for=function(t){var e=gf[t];return e||(e=gf[t]=df(t),vf[e]=t),e},df.keyFor=function(t){return vf[t]},["hasInstance","isConcatSpreadable","iterator","match","prototype","replace","search","species","split","toPrimitive","toStringTag","unscopables"].forEach((function(t){df[t]=df("Symbol."+t)}))}["isMapLike","isListLike","isValueLike","isFunctionLike","getOwnKeys","getOwnKeyDescriptor","proto","getOwnEnumerableKeys","hasOwnKey","hasKey","size","getName","getIdentity","assignDeep","updateDeep","getValue","setValue","getKeyValue","setKeyValue","updateValues","addValue","removeValues","apply","new","onValue","offValue","onKeyValue","offKeyValue","getKeyDependencies","getValueDependencies","keyHasDependencies","valueHasDependencies","onKeys","onKeysAdded","onKeysRemoved","onPatches"].forEach((function(t){df.for("can."+t)}));var _f=yf.Symbol=df,bf={makeGetFirstSymbolValue:function(t){var e=t.map((function(t){return _f.for(t)})),n=e.length;return function getFirstSymbol(t){for(var r=-1;++r<n;)if(void 0!==t[e[r]])return t[e[r]]}},hasLength:function(t){var e=typeof t;if("string"===e||Array.isArray(t))return!0;var n=t&&"boolean"!==e&&"number"!==e&&"length"in t&&t.length;return"function"!=typeof t&&(0===n||"number"==typeof n&&n>0&&n-1 in t)}},wf=Object.getOwnPropertyNames(function(){}.prototype),Tf=Object.getPrototypeOf(function(){}.prototype);var Sf=bf.makeGetFirstSymbolValue(["can.new","can.apply"]);function isPrimitive(t){var e=typeof t;return null==t||"function"!==e&&"object"!==e}var Ef=Object.prototype.hasOwnProperty,Mf=Function.prototype.toString,Of=Mf.call(Object);function isPlainObject(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(e===Object.prototype||null===e)return!0;var n=Ef.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mf.call(n)===Of}var xf,kf=_f.for("can.onValue"),Cf=_f.for("can.onKeyValue"),Pf=_f.for("can.onPatches");if("undefined"!=typeof Symbol&&"function"==typeof Symbol.for&&"symbol"==typeof Symbol("a symbol for testing symbols"))xf=function(t){return"symbol"==typeof t};else{xf=function(t){return"object"==typeof t&&!Array.isArray(t)&&"@@symbol"===t.toString().substr(0,"@@symbol".length)}}var If={isConstructorLike:function isConstructorLike(t){var e=t[_f.for("can.new")];if(void 0!==e)return e;if("function"!=typeof t)return!1;var n=t.prototype;if(!n)return!1;if(Tf!==Object.getPrototypeOf(n))return!0;var r=Object.getOwnPropertyNames(n);if(r.length===wf.length){for(var i=0,o=r.length;i<o;i++)if(r[i]!==wf[i])return!0;return!1}return!0},isFunctionLike:function isFunctionLike(t){var e,n=!!t&&t[_f.for("can.isFunctionLike")];return void 0!==n?n:void 0!==(e=Sf(t))?!!e:"function"==typeof t},isListLike:function isListLike(t){var e;if("string"===typeof t)return!0;if(isPrimitive(t))return!1;if(void 0!==(e=t[_f.for("can.isListLike")]))return e;var n=t[_f.iterator];return void 0!==n?!!n:!!Array.isArray(t)||bf.hasLength(t)},isMapLike:function isMapLike(t){if(isPrimitive(t))return!1;var e=t[_f.for("can.isMapLike")];if(void 0!==e)return!!e;var n=t[_f.for("can.getKeyValue")];return void 0===n||!!n},isObservableLike:function isObservableLike(t){return!isPrimitive(t)&&Boolean(t[kf]||t[Cf]||t[Pf])},isPrimitive:isPrimitive,isBuiltIn:function isBuiltIn(t){return!!(isPrimitive(t)||Array.isArray(t)||isPlainObject(t)||"[object Object]"!==Object.prototype.toString.call(t)&&-1!==Object.prototype.toString.call(t).indexOf("[object "))},isValueLike:function isValueLike(t){var e;if(isPrimitive(t))return!0;if(void 0!==(e=t[_f.for("can.isValueLike")]))return e;var n=t[_f.for("can.getValue")];return void 0!==n?!!n:void 0},isSymbolLike:xf,isMoreListLikeThanMapLike:function(t){if(Array.isArray(t))return!0;if(t instanceof Array)return!0;if(null==t)return!1;var e=t[_f.for("can.isMoreListLikeThanMapLike")];if(void 0!==e)return e;var n=this.isListLike(t),r=this.isMapLike(t);return!(!n||r)||!(!n&&r)&&void 0},isIteratorLike:function(t){return t&&"object"==typeof t&&"function"==typeof t.next&&0===t.next.length},isPromise:function(t){return t instanceof Promise||"[object Promise]"===Object.prototype.toString.call(t)},isPlainObject:isPlainObject},Rf={call:function(t,e){var n=[].slice.call(arguments,2),r=t[_f.for("can.apply")];return r?r.call(t,e,n):t.apply(e,n)},apply:function(t,e,n){var r=t[_f.for("can.apply")];return r?r.call(t,e,n):t.apply(e,n)},new:function(t){var e=[].slice.call(arguments,1),n=t[_f.for("can.new")];if(n)return n.apply(t,e);var r=Object.create(t.prototype),i=t.apply(r,e);return If.isPrimitive(i)?r:i}},Lf=_f.for("can.setKeyValue"),Af=_f.for("can.getKeyValue"),jf=_f.for("can.getValue"),Df=_f.for("can.setValue"),Nf={setKeyValue:function(t,e,n){if(If.isSymbolLike(e))"symbol"==typeof e?t[e]=n:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,value:n,writable:!0});else{var r=t[Lf];if(void 0!==r)return r.call(t,e,n);t[e]=n}},getKeyValue:function(t,e){var n=t[Af];return n?n.call(t,e):t[e]},deleteKeyValue:function(t,e){var n=t[_f.for("can.deleteKeyValue")];if(n)return n.call(t,e);delete t[e]},getValue:function(t){if(If.isPrimitive(t))return t;var e=t[jf];return e?e.call(t):t},setValue:function(t,e){var n=t&&t[Df];if(n)return n.call(t,e);throw new Error("can-reflect.setValue - Can not set value.")},splice:function(t,e,n,r){var i;if("number"!=typeof n){var o=t[_f.for("can.updateValues")];if(o)return o.call(t,e,n,r);i=n.length}else i=n;arguments.length<=3&&(r=[]);var a=t[_f.for("can.splice")];return a?a.call(t,e,i,r):[].splice.apply(t,[e,i].concat(r))},addValues:function(t,e,n){var r=t[_f.for("can.addValues")];return r?r.call(t,e,n):Array.isArray(t)&&void 0===n?t.push.apply(t,e):Nf.splice(t,n,[],e)},removeValues:function(t,e,n){var r=t[_f.for("can.removeValues")];return r?r.call(t,e,n):Array.isArray(t)&&void 0===n?void e.forEach((function(e){var n=t.indexOf(e);n>=0&&t.splice(n,1)})):Nf.splice(t,n,e,[])}};Nf.get=Nf.getKeyValue,Nf.set=Nf.setKeyValue,Nf.delete=Nf.deleteKeyValue;var Ff=Nf,Uf=[].slice;function makeFallback(t,e){return function(n,r,i,o){var a=n[_f.for(t)];return void 0!==a?a.call(n,r,i,o):this[e].apply(this,arguments)}}function makeErrorIfMissing(t,e){return function(n){var r=n[_f.for(t)];if(void 0!==r){var i=Uf.call(arguments,1);return r.apply(n,i)}throw new Error(e)}}var Vf,zf={onKeyValue:makeFallback("can.onKeyValue","onEvent"),offKeyValue:makeFallback("can.offKeyValue","offEvent"),onKeys:makeErrorIfMissing("can.onKeys","can-reflect: can not observe an onKeys event"),onKeysAdded:makeErrorIfMissing("can.onKeysAdded","can-reflect: can not observe an onKeysAdded event"),onKeysRemoved:makeErrorIfMissing("can.onKeysRemoved","can-reflect: can not unobserve an onKeysRemoved event"),getKeyDependencies:makeErrorIfMissing("can.getKeyDependencies","can-reflect: can not determine dependencies"),getWhatIChange:makeErrorIfMissing("can.getWhatIChange","can-reflect: can not determine dependencies"),getChangesDependencyRecord:function getChangesDependencyRecord(t){var e=t[_f.for("can.getChangesDependencyRecord")];if("function"==typeof e)return e()},keyHasDependencies:makeErrorIfMissing("can.keyHasDependencies","can-reflect: can not determine if this has key dependencies"),onValue:makeErrorIfMissing("can.onValue","can-reflect: can not observe value change"),offValue:makeErrorIfMissing("can.offValue","can-reflect: can not unobserve value change"),getValueDependencies:makeErrorIfMissing("can.getValueDependencies","can-reflect: can not determine dependencies"),valueHasDependencies:makeErrorIfMissing("can.valueHasDependencies","can-reflect: can not determine if value has dependencies"),onPatches:makeErrorIfMissing("can.onPatches","can-reflect: can not observe patches on object"),offPatches:makeErrorIfMissing("can.offPatches","can-reflect: can not unobserve patches on object"),onInstancePatches:makeErrorIfMissing("can.onInstancePatches","can-reflect: can not observe onInstancePatches on Type"),offInstancePatches:makeErrorIfMissing("can.offInstancePatches","can-reflect: can not unobserve onInstancePatches on Type"),onInstanceBoundChange:makeErrorIfMissing("can.onInstanceBoundChange","can-reflect: can not observe bound state change in instances."),offInstanceBoundChange:makeErrorIfMissing("can.offInstanceBoundChange","can-reflect: can not unobserve bound state change"),isBound:makeErrorIfMissing("can.isBound","can-reflect: cannot determine if object is bound"),onEvent:function(t,e,n,r){if(t){var i=t[_f.for("can.onEvent")];if(void 0!==i)return i.call(t,e,n,r);t.addEventListener&&t.addEventListener(e,n,r)}},offEvent:function(t,e,n,r){if(t){var i=t[_f.for("can.offEvent")];if(void 0!==i)return i.call(t,e,n,r);t.removeEventListener&&t.removeEventListener(e,n,r)}},setPriority:function(t,e){if(t){var n=t[_f.for("can.setPriority")];if(void 0!==n)return n.call(t,e),!0}return!1},getPriority:function(t){if(t){var e=t[_f.for("can.getPriority")];if(void 0!==e)return e.call(t)}}},Gf=!0;try{Object.getPrototypeOf(1)}catch(t){Gf=!1}if("function"==typeof Map)Vf=Map;else{var qf=function isEven(t){return t%2==0};(Vf=function(){this.contents=[]}).prototype={_getIndex:function(t){var e;do{e=this.contents.indexOf(t,e)}while(-1!==e&&!qf(e));return e},has:function(t){return-1!==this._getIndex(t)},get:function(t){var e=this._getIndex(t);if(-1!==e)return this.contents[e+1]},set:function(t,e){var n=this._getIndex(t);-1!==n?this.contents[n+1]=e:(this.contents.push(t),this.contents.push(e))},delete:function(t){var e=this._getIndex(t);-1!==e&&this.contents.splice(e,2)}}}var Wf,Kf,Bf,Yf=Object.prototype.hasOwnProperty,shiftFirstArgumentToThis=function(t){return function(){var e=[this];return e.push.apply(e,arguments),t.apply(null,e)}},Zf=_f.for("can.getKeyValue"),Hf=shiftFirstArgumentToThis(Ff.getKeyValue),Xf=_f.for("can.setKeyValue"),$f=shiftFirstArgumentToThis(Ff.setKeyValue),Qf=_f.for("can.size"),Jf=bf.makeGetFirstSymbolValue(["can.updateDeep","can.assignDeep","can.setKeyValue"]),shouldUpdateOrAssign=function(t){return If.isPlainObject(t)||Array.isArray(t)||!!Jf(t)};function isSerializedHelper(t){return!!If.isPrimitive(t)||!Jf(t)&&(If.isBuiltIn(t)&&!If.isPlainObject(t)&&!Array.isArray(t)&&!If.isObservableLike(t))}try{Object.keys(1),Kf=Object.keys}catch(t){Kf=function(t){return If.isPrimitive(t)?[]:Object.keys(t)}}function makeSerializer(t,e){var n=null;function SerializeOperation(t){this.first=!n,this.first&&(n=function createSerializeMap(t){var e=t||Vf;return{unwrap:new e,serialize:new e,isSerializing:{unwrap:new e,serialize:new e},circularReferenceIsSerializing:{unwrap:new e,serialize:new e}}}(t)),this.map=n,this.result=null}return SerializeOperation.prototype.end=function(){return this.first&&(n=null),this.result},function serializer(n,r){if(isSerializedHelper(n))return n;var i=new SerializeOperation(r);if(If.isValueLike(n))i.result=this[t](Ff.getValue(n));else{var o=If.isIteratorLike(n)||If.isMoreListLikeThanMapLike(n);if(i.result=o?[]:{},i.map[t].has(n))return i.map.isSerializing[t].has(n)&&i.map.circularReferenceIsSerializing[t].set(n,!0),i.map[t].get(n);i.map[t].set(n,i.result);for(var a=0,s=e.length;a<s;a++){var serializer=n[e[a]];if(serializer){i.map.isSerializing[t].set(n,!0);var u=i.result;if(i.result=serializer.call(n,u),i.map.isSerializing[t].delete(n),i.result!==u){if(i.map.circularReferenceIsSerializing[t].has(n))throw i.end(),new Error("Cannot serialize cirular reference!");i.map[t].set(n,i.result)}return i.end()}}"function"==typeof obj?(i.map[t].set(n,n),i.result=n):o?this.eachIndex(n,(function(e,n){i.result[n]=this[t](e)}),this):this.eachKey(n,(function(e,n){i.result[n]=this[t](e)}),this)}return i.end()}}Bf="undefined"!=typeof Map?function(t){var e=new Map;return Wf.eachIndex(t,(function(t){e.set(t,!0)})),e}:function(t){var e={};return t.forEach((function(t){e[t]=!0})),{get:function(t){return e[t]},set:function(t,n){e[t]=n},keys:function(){return t}}};var fastHasOwnKey=function(t){var e=t[_f.for("can.hasOwnKey")];if(e)return e.bind(t);var n=Bf(Wf.getOwnEnumerableKeys(t));return function(t){return n.get(t)}};function addPatch(t,e){var n=t[t.length-1];if(n&&n.deleteCount===n.insert.length&&e.index-n.index===n.deleteCount)return n.insert.push.apply(n.insert,e.insert),void(n.deleteCount+=e.deleteCount);t.push(e)}function updateDeepList(t,e,n){var r=this.toArray(e),i=[],o=-1;this.eachIndex(t,(function(e,a){if(o=a,a>=r.length)return n||addPatch(i,{index:a,deleteCount:t.length-a+1,insert:[]}),!1;var s=r[a];If.isPrimitive(e)||If.isPrimitive(s)||!1===shouldUpdateOrAssign(e)?addPatch(i,{index:a,deleteCount:1,insert:[s]}):!0===n?this.assignDeep(e,s):this.updateDeep(e,s)}),this),r.length>o&&addPatch(i,{index:o+1,deleteCount:0,insert:r.slice(o+1)});for(var a=0,s=i.length;a<s;a++){var u=i[a];Ff.splice(t,u.index,u.deleteCount,u.insert)}return t}(Wf={each:function(t,e,n){return If.isIteratorLike(t)||If.isMoreListLikeThanMapLike(t)?Wf.eachIndex(t,e,n):Wf.eachKey(t,e,n)},eachIndex:function(t,e,n){if(Array.isArray(t))return Wf.eachListLike(t,e,n);var r,i=t[_f.iterator];if(If.isIteratorLike(t)?r=t:i&&(r=i.call(t)),r)for(var o,a=0;!(o=r.next()).done&&!1!==e.call(n||t,o.value,a++,t););else Wf.eachListLike(t,e,n);return t},eachListLike:function(t,e,n){var r=-1,i=t.length;if(void 0===i){var o=t[Qf];if(!o)throw new Error("can-reflect: unable to iterate.");i=o.call(t)}for(;++r<i;){var a=t[r];if(!1===e.call(n||a,a,r,t))break}return t},toArray:function(t){var e=[];return Wf.each(t,(function(t){e.push(t)})),e},eachKey:function(t,e,n){if(t){var r=Wf.getOwnEnumerableKeys(t),i=t[Zf]||Hf;return Wf.eachIndex(r,(function(r){var o=i.call(t,r);return e.call(n||t,o,r,t)}))}return t},hasOwnKey:function(t,e){var n=t[_f.for("can.hasOwnKey")];if(n)return n.call(t,e);var r=t[_f.for("can.getOwnKeys")];if(r){var i=!1;return Wf.eachIndex(r.call(t),(function(t){if(t===e)return i=!0,!1})),i}return Yf.call(t,e)},getOwnEnumerableKeys:function(t){var e=t[_f.for("can.getOwnEnumerableKeys")];if(e)return e.call(t);if(t[_f.for("can.getOwnKeys")]&&t[_f.for("can.getOwnKeyDescriptor")]){var n=[];return Wf.eachIndex(Wf.getOwnKeys(t),(function(e){Wf.getOwnKeyDescriptor(t,e).enumerable&&n.push(e)}),this),n}return Kf(t)},getOwnKeys:function(t){var e=t[_f.for("can.getOwnKeys")];return e?e.call(t):Object.getOwnPropertyNames(t)},getOwnKeyDescriptor:function(t,e){var n=t[_f.for("can.getOwnKeyDescriptor")];return n?n.call(t,e):Object.getOwnPropertyDescriptor(t,e)},unwrap:makeSerializer("unwrap",[_f.for("can.unwrap")]),serialize:makeSerializer("serialize",[_f.for("can.serialize"),_f.for("can.unwrap")]),assignMap:function(t,e){var n=fastHasOwnKey(t),r=t[Zf]||Hf,i=t[Xf]||$f;return Wf.eachKey(e,(function(e,o){n(o)&&r.call(t,o)===e||i.call(t,o,e)})),t},assignList:function(t,e){var n=Wf.toArray(e);return Ff.splice(t,0,n,n),t},assign:function(t,e){return If.isIteratorLike(e)||If.isMoreListLikeThanMapLike(e)?Wf.assignList(t,e):Wf.assignMap(t,e),t},assignDeepMap:function(t,e){var n=fastHasOwnKey(t),r=t[Zf]||Hf,i=t[Xf]||$f;return Wf.eachKey(e,(function(e,o){if(n(o)){var a=r.call(t,o);e===a||(If.isPrimitive(a)||If.isPrimitive(e)||!1===shouldUpdateOrAssign(a)?i.call(t,o,e):Wf.assignDeep(a,e))}else Ff.setKeyValue(t,o,e)}),this),t},assignDeepList:function(t,e){return updateDeepList.call(this,t,e,!0)},assignDeep:function(t,e){var n=t[_f.for("can.assignDeep")];return n?n.call(t,e):If.isMoreListLikeThanMapLike(e)?Wf.assignDeepList(t,e):Wf.assignDeepMap(t,e),t},updateMap:function(t,e){var n=Bf(Wf.getOwnEnumerableKeys(e)),r=e[Zf]||Hf,i=t[Xf]||$f;return Wf.eachKey(t,(function(o,a){if(n.get(a)){n.set(a,!1);var s=r.call(e,a);s!==o&&i.call(t,a,s)}else Ff.deleteKeyValue(t,a)}),this),Wf.eachIndex(n.keys(),(function(o){n.get(o)&&i.call(t,o,r.call(e,o))})),t},updateList:function(t,e){var n=Wf.toArray(e);return Ff.splice(t,0,t,n),t},update:function(t,e){return If.isIteratorLike(e)||If.isMoreListLikeThanMapLike(e)?Wf.updateList(t,e):Wf.updateMap(t,e),t},updateDeepMap:function(t,e){var n=Bf(Wf.getOwnEnumerableKeys(e)),r=e[Zf]||Hf,i=t[Xf]||$f;return Wf.eachKey(t,(function(o,a){if(n.get(a)){n.set(a,!1);var s=r.call(e,a);If.isPrimitive(o)||If.isPrimitive(s)||!1===shouldUpdateOrAssign(o)?i.call(t,a,s):Wf.updateDeep(o,s)}else Ff.deleteKeyValue(t,a)}),this),Wf.eachIndex(n.keys(),(function(o){n.get(o)&&i.call(t,o,r.call(e,o))})),t},updateDeepList:function(t,e){return updateDeepList.call(this,t,e)},updateDeep:function(t,e){var n=t[_f.for("can.updateDeep")];return n?n.call(t,e):If.isMoreListLikeThanMapLike(e)?Wf.updateDeepList(t,e):Wf.updateDeepMap(t,e),t},hasKey:function(t,e){if(null==t)return!1;var n;if(If.isPrimitive(t))return!!Yf.call(t,e)||(void 0!==(n=Gf?Object.getPrototypeOf(t):t.__proto__)?e in n:void 0!==t[e]);var r=t[_f.for("can.hasKey")];return r?r.call(t,e):Wf.hasOwnKey(t,e)||e in t},getAllEnumerableKeys:function(){},getAllKeys:function(){},assignSymbols:function(t,e){return Wf.eachKey(e,(function(e,n){var r=If.isSymbolLike(_f[n])?_f[n]:_f.for(n);Ff.setKeyValue(t,r,e)})),t},isSerialized:isSerializedHelper,size:function(t){if(null==t)return 0;var e=t[Qf],n=0;return e?e.call(t):bf.hasLength(t)?t.length:If.isListLike(t)?(Wf.eachIndex(t,(function(){n++})),n):t?Wf.getOwnEnumerableKeys(t).length:void 0},defineInstanceKey:function(t,e,n){var r=t[_f.for("can.defineInstanceKey")];if(r)return r.call(t,e,n);var i=t.prototype;(r=i[_f.for("can.defineInstanceKey")])?r.call(i,e,n):Object.defineProperty(i,e,Wf.assign({configurable:!0,enumerable:!If.isSymbolLike(e),writable:!0},n))}}).isSerializable=Wf.isSerialized,Wf.keys=Wf.getOwnEnumerableKeys;var td=Wf,ed=_f.for("can.getSchema"),nd=_f.for("can.isMember"),rd=_f.for("can.new");function comparator(t,e){return t.localeCompare(e)}var id={getSchema:function(t){if(void 0!==t){var e=t[ed];return void 0===e&&(e=(t=t.constructor)&&t[ed]),void 0!==e?e.call(t):void 0}},getIdentity:function(t,e){if(void 0===(e=e||id.getSchema(t)))throw new Error("can-reflect.getIdentity - Unable to find a schema for the given value.");var n=e.identity;if(n&&0!==n.length){if(1===n.length)return Ff.getKeyValue(t,n[0]);var r={};return n.forEach((function(e){r[e]=Ff.getKeyValue(t,e)})),JSON.stringify(id.cloneKeySort(r))}throw new Error("can-reflect.getIdentity - Provided schema lacks an identity property.")},cloneKeySort:function(t){return function sort(t){return If.isPrimitive(t)||t instanceof Date?t:If.isListLike(t)?(e=[],td.eachKey(t,(function(t){e.push(sort(t))})),e):If.isMapLike(t)?(e={},td.getOwnKeys(t).sort(comparator).forEach((function(n){e[n]=sort(Ff.getKeyValue(t,n))})),e):t;var e}(t)},convert:function(t,e){if(function isPrimitiveConverter(t){return t===Number||t===String||t===Boolean}(e))return e(t);var n=e[nd],r=!1,i=typeof e,o=e[rd];if(void 0!==n?r=n.call(e,t):"function"===i&&If.isConstructorLike(e)&&(r=t instanceof e),r)return t;if(void 0!==o)return o.call(e,t);if("function"===i)return If.isConstructorLike(e)?new e(t):e(t);throw new Error("can-reflect: Can not convert values into type. Type must provide `can.new` symbol.")}},od=id,ad=_f.for("can.getName");var sd=0;var ud={setName:function setName(t,e){if("function"!=typeof e){var n=e;e=function(){return n}}Object.defineProperty(t,ad,{value:e})},getName:function getName(t){var e=typeof t;if(null===t||"object"!==e&&"function"!==e)return""+t;var n=t[ad];if(n)return n.call(t);if("function"===e)return"name"in t||(t.name="functionIE"+sd++),t.name;if(t.constructor&&t!==t.constructor){var r=getName(t.constructor);if(r){if(If.isValueLike(t))return r+"<>";if(If.isMoreListLikeThanMapLike(t))return r+"[]";if(If.isMapLike(t))return r+"{}"}}}};"undefined"!=typeof Map&&(td.assignSymbols(Map.prototype,{"can.getOwnEnumerableKeys":Map.prototype.keys,"can.setKeyValue":Map.prototype.set,"can.getKeyValue":Map.prototype.get,"can.deleteKeyValue":Map.prototype.delete,"can.hasOwnKey":Map.prototype.has}),"function"!=typeof Map.prototype.keys&&(Map.prototype.keys=Map.prototype[_f.for("can.getOwnEnumerableKeys")]=function keysPolyfill(){var t=[],e=0;return this.forEach((function(e,n){t.push(n)})),{next:function(){return{value:t[e],done:e++===t.length}}}})),"undefined"!=typeof WeakMap&&td.assignSymbols(WeakMap.prototype,{"can.getOwnEnumerableKeys":function(){throw new Error("can-reflect: WeakMaps do not have enumerable keys.")},"can.setKeyValue":WeakMap.prototype.set,"can.getKeyValue":WeakMap.prototype.get,"can.deleteKeyValue":WeakMap.prototype.delete,"can.hasOwnKey":WeakMap.prototype.has}),"undefined"!=typeof Set&&(td.assignSymbols(Set.prototype,{"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(t,e,n){e!==n&&td.each(e,(function(t){this.delete(t)}),this),td.each(n,(function(t){this.add(t)}),this)},"can.size":function(){return this.size}}),"function"!=typeof Set.prototype[_f.iterator]&&(Set.prototype[_f.iterator]=function(){var t=[],e=0;return this.forEach((function(e){t.push(e)})),{next:function(){return{value:t[e],done:e++===t.length}}}})),"undefined"!=typeof WeakSet&&td.assignSymbols(WeakSet.prototype,{"can.isListLike":!0,"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(t,e,n){e!==n&&td.each(e,(function(t){this.delete(t)}),this),td.each(n,(function(t){this.add(t)}),this)},"can.size":function(){throw new Error("can-reflect: WeakSets do not have enumerable keys.")}});var ld={};[Rf,Ff,zf,td,If,ud,od].forEach((function(t){for(var e in t)ld[e]=t[e]}));var cd=yf.Reflect=ld;function dispatch(t){var e=this.eventHandlers[t];if(e)for(var n=e.slice(),r=this.getKeyValue(t),i=0;i<n.length;i++)n[i](r)}function Globals(){this.eventHandlers={},this.properties={}}Globals.prototype.define=function(t,e,n){return void 0===n&&(n=!0),this.properties[t]||(this.properties[t]={default:e,value:e,enableCache:n}),this},Globals.prototype.getKeyValue=function(t){var e=this.properties[t];if(e)return"function"==typeof e.value?e.cachedValue?e.cachedValue:e.enableCache?(e.cachedValue=e.value(),e.cachedValue):e.value():e.value},Globals.prototype.makeExport=function(t){return function(e){return 0===arguments.length?this.getKeyValue(t):null!=e?("function"==typeof e?this.setKeyValue(t,(function(){return e})):this.setKeyValue(t,e),e):void this.deleteKeyValue(t)}.bind(this)},Globals.prototype.offKeyValue=function(t,e){if(this.properties[t]){var n=this.eventHandlers[t];if(n){var r=n.indexOf(e);n.splice(r,1)}}return this},Globals.prototype.onKeyValue=function(t,e){return this.properties[t]&&(this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)),this},Globals.prototype.deleteKeyValue=function(t){var e=this.properties[t];return void 0!==e&&(e.value=e.default,e.cachedValue=void 0,dispatch.call(this,t)),this},Globals.prototype.setKeyValue=function(t,e){if(!this.properties[t])return this.define(t,e);var n=this.properties[t];return n.value=e,n.cachedValue=void 0,dispatch.call(this,t),this},Globals.prototype.reset=function(){for(var t in this.properties)this.properties.hasOwnProperty(t)&&(this.properties[t].value=this.properties[t].default,this.properties[t].cachedValue=void 0,dispatch.call(this,t));return this},cd.assignSymbols(Globals.prototype,{"can.getKeyValue":Globals.prototype.getKeyValue,"can.setKeyValue":Globals.prototype.setKeyValue,"can.deleteKeyValue":Globals.prototype.deleteKeyValue,"can.onKeyValue":Globals.prototype.onKeyValue,"can.offKeyValue":Globals.prototype.offKeyValue});var hd=Globals,fd=createCommonjsModule((function(t){var e=new hd;if(yf.globals)throw new Error("You can't have two versions of can-globals, check your dependencies");t.exports=yf.globals=e}));fd.define("global",(function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:"object"==typeof process&&"[object process]"==={}.toString.call(process)?e:window}));var dd=fd.makeExport("global"),pd=yf.parseURI=function(t){var e=String(t).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return e?{href:e[0]||"",protocol:e[1]||"",authority:e[2]||"",host:e[3]||"",hostname:e[4]||"",port:e[5]||"",pathname:e[6]||"",search:e[7]||"",hash:e[8]||""}:null};function buildParam(t,e,n){if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r){var o=e[r];buildParam(t+("object"==typeof o?"["+r+"]":"[]"),o,n)}else if(e&&"object"==typeof e)for(var a in e)buildParam(t+"["+a+"]",e[a],n);else n(t,e)}var yd=yf.param=function param(t){var e=[],add=function(t,n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))};for(var n in t)buildParam(n,t[n],add);return e.join("&").replace(/%20/g,"+")},md=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],gd=null,vd=pd(dd().location.href),_d={},makeXhr=function(){if(null!=gd)return gd();for(var t=0,e=md.length;t<e;t++)try{var n=md[t],r=n();if(null!=r)return gd=n,r}catch(t){continue}return function(){}},bd={json:"application/json",form:"application/x-www-form-urlencoded"},_xhrResp=function(t,e){try{var n=e.dataType||t.getResponseHeader("Content-Type").split(";")[0];if(!n||!t.responseText&&!t.responseXML)return t;switch(n){case"text/xml":case"xml":return t.responseXML;case"text/json":case"application/json":case"text/javascript":case"application/javascript":case"application/x-javascript":case"json":return t.responseText&&JSON.parse(t.responseText);default:return t.responseText}}catch(e){return t}};var wd=yf.ajax=function ajax(t){var e,n,r,i=makeXhr(),o=0,a={},s=new Promise((function(t,e){a.resolve=t,a.reject=e})),u=!1;s.abort=function(){u=!0,i.abort()};var l=!1!==(t=[{userAgent:"XMLHttpRequest",lang:"en",type:"GET",data:null,dataType:"json"},_d,t].reduce((function(t,e,n){return cd.assignDeep(t,e)}))).async;if(t.contentType||(t.contentType="GET"===t.type.toUpperCase()?bd.form:bd.json),null==t.crossDomain)try{r=pd(t.url),t.crossDomain=!!(r.protocol&&r.protocol!==vd.protocol||r.host&&r.host!==vd.host)}catch(e){t.crossDomain=!0}t.timeout&&(e=setTimeout((function(){i.abort(),t.timeoutFn&&t.timeoutFn(t.url)}),t.timeout)),i.onreadystatechange=function(){try{4===i.readyState?(e&&clearTimeout(e),i.status<300?t.success&&t.success(_xhrResp(i,t)):t.error&&t.error(i,i.status,i.statusText),t.complete&&t.complete(i,i.statusText),i.status>=200&&i.status<300?a.resolve(_xhrResp(i,t)):a.reject(_xhrResp(i,t))):t.progress&&t.progress(++o)}catch(t){a.reject(t)}};var c=t.url,h=null,f=t.type.toUpperCase(),d=t.contentType===bd.json,p="POST"===f||"PUT"===f;!p&&t.data&&(c+="?"+(d?JSON.stringify(t.data):yd(t.data))),i.open(f,c,l);var y=t.crossDomain&&-1!==["GET","POST","HEAD"].indexOf(f);if(n="undefined"!=typeof FormData&&t.data instanceof FormData,p?n?h=t.data:d&&!y?(h="object"==typeof t.data?JSON.stringify(t.data):t.data,i.setRequestHeader("Content-Type","application/json")):(h=yd(t.data),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):i.setRequestHeader("Content-Type",t.contentType),y||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.xhrFields)for(var m in t.xhrFields)i[m]=t.xhrFields[m];function send(){u||i.send(h)}if(t.beforeSend){var g=t.beforeSend.call(t,i,t);if(cd.isPromise(g))return g.then(send).catch(a.reject),s}return send(),s};wd.ajaxSetup=function(t){_d=t||{}};var Td={ADD:"add",REMOVE:"remove"},Sd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Ed="length",Md=function(t){function CollectionEvent(e,n,r){var i=t.call(this,e)||this;return i.element=n,i.index=r,i}return Sd(CollectionEvent,t),CollectionEvent}(wu),Od=function(t){function Collection(e,n){var r=t.call(this)||this,i=n||{};if(r.unique_=!!i.unique,r.array_=e||[],r.unique_)for(var o=0,a=r.array_.length;o<a;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return Sd(Collection,t),Collection.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},Collection.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},Collection.prototype.forEach=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)t(e[n],n,e)},Collection.prototype.getArray=function(){return this.array_},Collection.prototype.item=function(t){return this.array_[t]},Collection.prototype.getLength=function(){return this.get(Ed)},Collection.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Md(Td.ADD,e,t))},Collection.prototype.pop=function(){return this.removeAt(this.getLength()-1)},Collection.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},Collection.prototype.remove=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)},Collection.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Md(Td.REMOVE,e,t)),e},Collection.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Md(Td.REMOVE,r,t)),this.dispatchEvent(new Md(Td.ADD,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},Collection.prototype.updateLength_=function(){this.set(Ed,this.array_.length)},Collection.prototype.assertUnique_=function(t,e){for(var n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new $r(58)},Collection}(Cu),xd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),kd=function(t){function MapEvent(e,n,r){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==r?r:null,i}return xd(MapEvent,t),MapEvent}(wu),Cd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Pd=function(t){function MapBrowserEvent(e,n,r,i,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=r,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return Cd(MapBrowserEvent,t),Object.defineProperty(MapBrowserEvent.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(MapBrowserEvent.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),MapBrowserEvent.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},MapBrowserEvent.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},MapBrowserEvent}(kd),Id=(createCommonjsModule((function(t,e){
/*!
	 * PEP v0.5.3 | https://github.com/jquery/PEP
	 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
	 */
t.exports=function(){var t=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function PointerEvent(n,r){r=r||Object.create(null);var i=document.createEvent("Event");i.initEvent(n,r.bubbles||!1,r.cancelable||!1);for(var o,a=2;a<t.length;a++)i[o=t[a]]=r[o]||e[a];i.buttons=r.buttons||0;var s=0;return s=void 0!==r.pressure&&i.buttons?r.pressure:i.buttons?.5:0,i.x=i.clientX,i.y=i.clientY,i.pointerId=r.pointerId||0,i.width=r.width||1,i.height=r.height||1,i.pressure=s,i.tiltX=r.tiltX||0,i.tiltY=r.tiltY||0,i.twist=r.twist||0,i.tangentialPressure=r.tangentialPressure||0,i.pointerType=r.pointerType||"",i.hwTimestamp=r.hwTimestamp||0,i.isPrimary=r.isPrimary||!1,i.detail=0,i}var n=window.Map&&window.Map.prototype.forEach?Map:SparseArrayMap;function SparseArrayMap(){this.array=[],this.size=0}SparseArrayMap.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach((function(n,r){t.call(e,n,r,this)}),this)}};var r=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],i=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],o={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},a="undefined"!=typeof SVGElementInstance,s={pointermap:new n,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,r=n.events;r&&(r.forEach((function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))}),this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,r=0;r<n&&(e=this.eventSourceList[r]);r++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,r=0;r<n&&(e=this.eventSourceList[r]);r++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach((function(e){this.addEvent(t,e)}),this)},unlisten:function(t,e){e.forEach((function(e){this.removeEvent(t,e)}),this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=new PointerEvent(t,e);return e.preventDefault&&(n.preventDefault=e.preventDefault),n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),o=0;o<r.length;o++)n[e=r[o]]=t[e]||i[o],!a||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in o?void 0:e:t._target},propagate:function(t,e,n){for(var r=t.target,i=[];null!=r&&r!==document&&!r.contains(t.relatedTarget);)if(i.push(r),!(r=r.parentNode))return;n&&i.reverse(),i.forEach((function(n){t.target=n,e.call(this,t)}),this)},setCapture:function(t,e,n){this.captureInfo[t]&&this.releaseCapture(t,n),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,n),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var r=new PointerEvent("gotpointercapture",{bubbles:!0});r.pointerId=t,r._target=e,n||this.asyncDispatchEvent(r)},releaseCapture:function(t,e){var n=this.captureInfo[t];if(n){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var r=new PointerEvent("lostpointercapture",{bubbles:!0});r.pointerId=t,r._target=n,e||this.asyncDispatchEvent(r)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};s.boundHandler=s.eventHandler.bind(s);var u={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var r,i,o=t.elementFromPoint(e,n);for(i=this.targetingShadow(o);i;){if(r=i.elementFromPoint(e,n)){var a=this.targetingShadow(r);return this.searchRoot(a,e,n)||r}i=this.olderShadow(i)}return o}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,r=this.owner(t.target);return r.elementFromPoint(e,n)||(r=document),this.searchRoot(r,e,n)}},l=Array.prototype.forEach.call.bind(Array.prototype.forEach),c=Array.prototype.map.call.bind(Array.prototype.map),h=Array.prototype.slice.call.bind(Array.prototype.slice),f=Array.prototype.filter.call.bind(Array.prototype.filter),d=window.MutationObserver||window.WebKitMutationObserver,p={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function Installer(t,e,n,r){this.addCallback=t.bind(r),this.removeCallback=e.bind(r),this.changedCallback=n.bind(r),d&&(this.observer=new d(this.mutationWatcher.bind(this)))}function rule(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}Installer.prototype={watchSubtree:function(t){this.observer&&u.canTarget(t)&&this.observer.observe(t,p)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){l(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(h(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=c(t,this.findElements,this);return e.push(f(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var y=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],m="",g=window.PointerEvent||window.MSPointerEvent,v=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,_=s.pointermap,b=[1,4,2,8,16],w=!1;try{w=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var T,S={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(t){s.listen(t,this.events)},unregister:function(t){s.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,r=t.clientX,i=t.clientY,o=0,a=n.length;o<a&&(e=n[o]);o++){var s=Math.abs(r-e.x),u=Math.abs(i-e.y);if(s<=25&&u<=25)return!0}},prepareEvent:function(t){var e=s.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,"webkitForce"in t&&(e.pressure=t.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),e},prepareButtonsForMove:function(t,e){var n=_.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=_.get(this.POINTER_ID),n=this.prepareEvent(t);w||(n.buttons=b[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),_.set(this.POINTER_ID,t),e&&0!==e.buttons?s.move(n):s.down(n)}},webkitmouseforcechanged:function(t){this.mousemove(t)},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);w||this.prepareButtonsForMove(e,t),e.button=-1,_.set(this.POINTER_ID,t),s.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=_.get(this.POINTER_ID),n=this.prepareEvent(t);if(!w){var r=b[n.button];n.buttons=e?e.buttons&~r:0,t.buttons=n.buttons}_.set(this.POINTER_ID,t),n.buttons&=~b[n.button],0===n.buttons?s.up(n):s.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);w||this.prepareButtonsForMove(e,t),e.button=-1,_.set(this.POINTER_ID,t),s.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);w||this.prepareButtonsForMove(e,t),e.button=-1,s.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);s.cancel(e),this.deactivateMouse()},deactivateMouse:function(){_.delete(this.POINTER_ID)}},E=s.captureInfo,M=u.findTarget.bind(u),O=u.allShadows.bind(u),x=s.pointermap,k={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(t){T.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute("touch-action"),n=this.touchActionToScrollType(e);"number"==typeof n&&(t._scrollType=n,s.listen(t,this.events),O(t).forEach((function(t){t._scrollType=n,s.listen(t,this.events)}),this))},elementRemoved:function(t){if(x.size>0){var e=this.events;t.addEventListener("touchend",(function(){t._scrollType=void 0,s.unlisten(t,e)}))}else t._scrollType=void 0,s.unlisten(t,this.events);O(t).forEach((function(t){t._scrollType=void 0,s.unlisten(t,this.events)}),this)},elementChanged:function(t,e){var n=t.getAttribute("touch-action"),r=this.touchActionToScrollType(n),i=this.touchActionToScrollType(e);"number"==typeof r&&"number"==typeof i?(t._scrollType=r,O(t).forEach((function(t){t._scrollType=r}),this)):"number"==typeof i?this.elementRemoved(t):"number"==typeof r&&this.elementAdded(t)},scrollTypes:{UP:function(t){return t.includes("pan-y")||t.includes("pan-up")?1:0},DOWN:function(t){return t.includes("pan-y")||t.includes("pan-down")?2:0},LEFT:function(t){return t.includes("pan-x")||t.includes("pan-left")?4:0},RIGHT:function(t){return t.includes("pan-x")||t.includes("pan-right")?8:0}},touchActionToScrollType:function(t){if(t){if("auto"===t)return 15;if("none"===t)return 0;var e=t.split(" "),n=this.scrollTypes;return n.UP(e)|n.DOWN(e)|n.LEFT(e)|n.RIGHT(e)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===x.size||1===x.size&&x.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1)},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"touchforcechange"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=s.cloneEvent(t),r=n.pointerId=t.identifier+2;if(n.target=E[r]||M(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=void 0!==t.force?t.force:void 0!==t.webkitForce?t.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(t),t.altitudeAngle){var i=Math.tan(t.altitudeAngle),o=180/Math.PI;n.tiltX=Math.atan(Math.cos(t.azimuthAngle)/i)*o,n.tiltY=Math.atan(Math.sin(t.azimuthAngle)/i)*o}else n.tiltX=0,n.tiltY=0;"stylus"===t.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var a=this;return n.preventDefault=function(){a.scrolling=!1,a.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var r,i=0;i<n.length;i++)r=n[i],e.call(this,this.touchToPointer(r))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if(0===n)e=!1;else if(15===n)e=!0;else{var r=t.changedTouches[0],i=r.clientY-this.firstXY.Y,o=Math.abs(i),a=r.clientX-this.firstXY.X,s=Math.abs(a),u=1&n,l=2&n,c=4&n,h=8&n;c&&h?e=s>o:c?e=s>o&&a>0:h&&(e=s>o&&a<0),e||(u&&l?e=s<o:u?e=s<o&&i>0:l&&(e=s<o&&i<0))}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,r=0,i=t.length;r<i&&(n=t[r]);r++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(x.size>=e.length){var n=[];x.forEach((function(t,r){if(1!==r&&!this.findTouch(e,r-2)){var i=t.out;n.push(i)}}),this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||this.processTouches(t,this.overDown)},overDown:function(t){x.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),s.enterOver(t),s.down(t)},touchforcechange:function(t){this.touchmove(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):("touchforcechange"!==t.type&&t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=x.get(e.pointerId);if(n){var r=n.out,i=n.outTarget;s.move(e),r&&i!==e.target&&(r.relatedTarget=e.target,e.relatedTarget=i,r.target=i,e.target?(s.leaveOut(r),s.enterOver(e)):(e.target=i,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(s.up(t),s.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){s.cancel(t),s.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){x.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=S.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var r={x:n.clientX,y:n.clientY};e.push(r);var i=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,r);setTimeout(i,2500)}}};T=new Installer(k.elementAdded,k.elementRemoved,k.elementChanged,k);var C,P,I,R=s.pointermap,L=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,A={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){s.listen(t,this.events)},unregister:function(t){s.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return L&&((e=s.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){R.delete(t)},MSPointerDown:function(t){R.set(t.pointerId,t);var e=this.prepareEvent(t);s.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);s.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);s.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);s.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);s.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);s.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=s.makeEvent("lostpointercapture",t);s.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=s.makeEvent("gotpointercapture",t);s.dispatchEvent(e)}};function assertActive(t){if(!s.pointermap.has(t)){var e=new Error("NotFoundError");throw e.name="NotFoundError",e}}function assertConnected(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function inActiveButtonState(t){return 0!==s.pointermap.get(t).buttons}return window.navigator.msPointerEnabled?(C=function(t){assertActive(t),assertConnected(this),inActiveButtonState(t)&&(s.setCapture(t,this,!0),this.msSetPointerCapture(t))},P=function(t){assertActive(t),s.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(C=function setPointerCapture(t){assertActive(t),assertConnected(this),inActiveButtonState(t)&&s.setCapture(t,this)},P=function releasePointerCapture(t){assertActive(t),s.releaseCapture(t)}),I=function hasPointerCapture(t){return!!s.captureInfo[t]},function applyAttributeStyles(){if(g){y.forEach((function(t){m+=t.selector+rule(t.value)+"\n",v&&(m+=function shadowSelector(t){return"body /shadow-deep/ "+t}(t.selector)+rule(t.value)+"\n")}));var t=document.createElement("style");t.textContent=m,document.head.appendChild(t)}}(),function applyPolyfill(){if(!window.PointerEvent){if(window.PointerEvent=PointerEvent,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),s.registerSource("ms",A)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),s.registerSource("mouse",S),void 0!==window.ontouchstart&&s.registerSource("touch",k);s.register(document)}}(),function applyPolyfill$1(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:C},releasePointerCapture:{value:P},hasPointerCapture:{value:I}})}(),{dispatcher:s,Installer:Installer,PointerEvent:PointerEvent,PointerMap:n,targetFinding:u}}()})),{SINGLECLICK:"singleclick",CLICK:Eu.CLICK,DBLCLICK:Eu.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}),Rd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Ld=function(t){function MapBrowserPointerEvent(e,n,r,i,o){var a=t.call(this,e,n,r,i,o)||this;return a.pointerEvent=r,a}return Rd(MapBrowserPointerEvent,t),MapBrowserPointerEvent}(Pd),Ad={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},jd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Dd=function(t){function MapBrowserEventHandler(e,n){var r=t.call(this,e)||this;r.map_=e,r.clickTimeoutId_,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=n?n*hc:hc,r.down_=null;var i=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=i,r.pointerdownListenerKey_=listen(i,Ad.POINTERDOWN,r.handlePointerDown_,r),r.relayedListenerKey_=listen(i,Ad.POINTERMOVE,r.relayEvent_,r),r}return jd(MapBrowserEventHandler,t),MapBrowserEventHandler.prototype.emulateClick_=function(t){var e=new Ld(Id.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Ld(Id.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Ld(Id.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},MapBrowserEventHandler.prototype.updateActivePointers_=function(t){var e=t;e.type==Id.POINTERUP||e.type==Id.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Id.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},MapBrowserEventHandler.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Ld(Id.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},MapBrowserEventHandler.prototype.isMouseActionButton_=function(t){return 0===t.button},MapBrowserEventHandler.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Ld(Id.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(listen(document,Id.POINTERMOVE,this.handlePointerMove_,this),listen(document,Id.POINTERUP,this.handlePointerUp_,this),listen(this.element_,Id.POINTERCANCEL,this.handlePointerUp_,this))},MapBrowserEventHandler.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Ld(Id.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},MapBrowserEventHandler.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Ld(t.type,this.map_,t,e))},MapBrowserEventHandler.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},MapBrowserEventHandler.prototype.disposeInternal=function(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},MapBrowserEventHandler}(Su),Nd={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Fd=function(){function PriorityQueue(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return PriorityQueue.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)},PriorityQueue.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},PriorityQueue.prototype.enqueue=function(t){assert(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},PriorityQueue.prototype.getCount=function(){return this.elements_.length},PriorityQueue.prototype.getLeftChildIndex_=function(t){return 2*t+1},PriorityQueue.prototype.getRightChildIndex_=function(t){return 2*t+2},PriorityQueue.prototype.getParentIndex_=function(t){return t-1>>1},PriorityQueue.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},PriorityQueue.prototype.isEmpty=function(){return 0===this.elements_.length},PriorityQueue.prototype.isKeyQueued=function(t){return t in this.queuedElements_},PriorityQueue.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},PriorityQueue.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,i=e[t],o=n[t],a=t;t<r>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<r&&n[u]<n[s]?u:s;e[t]=e[l],n[t]=n[l],t=l}e[t]=i,n[t]=o,this.siftDown_(a,t)},PriorityQueue.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,i=n[e],o=r[e];e>t;){var a=this.getParentIndex_(e);if(!(r[a]>o))break;n[e]=n[a],r[e]=r[a],e=a}n[e]=i,r[e]=o},PriorityQueue.prototype.reprioritize=function(){var t,e,n,r=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(n=r(t=i[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=n,i[a++]=t);i.length=a,o.length=a,this.heapify_()},PriorityQueue}(),Ud=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Vd=function(t){function TileQueue(e,n){var r=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return Ud(TileQueue,t),TileQueue.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);n&&e[0].addEventListener(Eu.CHANGE,this.boundHandleTileChange_);return n},TileQueue.prototype.getTilesLoading=function(){return this.tilesLoading_},TileQueue.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(e.hifi&&n===Cl.LOADED||n===Cl.ERROR||n===Cl.EMPTY||n===Cl.ABORT){e.removeEventListener(Eu.CHANGE,this.boundHandleTileChange_);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},TileQueue.prototype.loadMoreTiles=function(t,e){for(var n,r,i,o=0,a=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=(r=this.dequeue()[0]).getKey(),(n=r.getState())===Cl.ABORT?a=!0:n!==Cl.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,r.load());0===o&&a&&this.tileChangeCallback_()},TileQueue}(Fd);function createExtent(t,e,n){return function(r,i,o,a){if(r){var s=e?0:o[0]*i,u=e?0:o[1]*i,l=t[0]+s/2,c=t[2]-s/2,h=t[1]+u/2,f=t[3]-u/2;l>c&&(c=l=(c+l)/2),h>f&&(f=h=(f+h)/2);var d=clamp(r[0],l,c),p=clamp(r[1],h,f),y=30*i;return a&&n&&(d+=-y*Math.log(1+Math.max(0,l-r[0])/y)+y*Math.log(1+Math.max(0,r[0]-c)/y),p+=-y*Math.log(1+Math.max(0,h-r[1])/y)+y*Math.log(1+Math.max(0,r[1]-f)/y)),[d,p]}}}function none(t){return t}function getViewportClampedResolution(t,e,n){var r=getWidth(e)/n[0],i=getHeight(e)/n[1];return Math.min(t,Math.min(r,i))}function getSmoothClampedResolution(t,e,n){var r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/t-1))/50+1),clamp(r,n/2,2*e)}function createMinMaxResolution(t,e,n,r){return function(i,o,a,s){if(void 0!==i){var u=r?getViewportClampedResolution(t,r,a):t;return(void 0===n||n)&&s?getSmoothClampedResolution(i,u,e):clamp(i,e,u)}}}function disable(t){return void 0!==t?0:void 0}function none$1(t){return void 0!==t?t:void 0}var zd="center",Gd="resolution",qd="rotation";function equals$2(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function rotate(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}var Wd={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var Kd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Bd=[1,0,0,1,0,0],Yd=function(t){function Geometry(){var e=t.call(this)||this;return e.extent_=[1/0,1/0,-1/0,-1/0],e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=function memoizeOne(t){var e,n,r,i=!1;return function(){var o=Array.prototype.slice.call(arguments);return i&&this===r&&equals$1(o,n)||(i=!0,r=this,n=o,e=t.apply(this,arguments)),e}}((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})),e}return Kd(Geometry,t),Geometry.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},Geometry.prototype.clone=function(){return abstract()},Geometry.prototype.closestPointXY=function(t,e,n,r){return abstract()},Geometry.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},Geometry.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},Geometry.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},Geometry.prototype.computeExtent=function(t){return abstract()},Geometry.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function returnOrUpdate(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},Geometry.prototype.rotate=function(t,e){abstract()},Geometry.prototype.scale=function(t,e,n){abstract()},Geometry.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},Geometry.prototype.getSimplifiedGeometry=function(t){return abstract()},Geometry.prototype.getType=function(){return abstract()},Geometry.prototype.applyTransform=function(t){abstract()},Geometry.prototype.intersectsExtent=function(t){return abstract()},Geometry.prototype.translate=function(t,e){abstract()},Geometry.prototype.transform=function(t,e){var n=get$4(t),r=n.getUnits()==ti.TILE_PIXELS?function(t,r,i){var o=n.getExtent(),a=n.getWorldExtent(),s=getHeight(a)/getHeight(o);return compose(Bd,a[0],a[3],s,-s,0,0,0),function transform2D(t,e,n,r,i,o){for(var a=o||[],s=0,u=e;u<n;u+=r){var l=t[u],c=t[u+1];a[s++]=i[0]*l+i[2]*c+i[4],a[s++]=i[1]*l+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}(t,0,t.length,i,Bd,r),getTransform(n,e)(t,r,i)}:getTransform(n,e);return this.applyTransform(r),this},Geometry}(Cu),Zd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Hd=function(t){function SimpleGeometry(){var e=t.call(this)||this;return e.layout=Wd.XY,e.stride=2,e.flatCoordinates=null,e}return Zd(SimpleGeometry,t),SimpleGeometry.prototype.computeExtent=function(t){return function createOrUpdateFromFlatCoordinates(t,e,n,r,i){return extendFlatCoordinates(createOrUpdateEmpty(i),t,e,n,r)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},SimpleGeometry.prototype.getCoordinates=function(){return abstract()},SimpleGeometry.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},SimpleGeometry.prototype.getFlatCoordinates=function(){return this.flatCoordinates},SimpleGeometry.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},SimpleGeometry.prototype.getLayout=function(){return this.layout},SimpleGeometry.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},SimpleGeometry.prototype.getSimplifiedGeometryInternal=function(t){return this},SimpleGeometry.prototype.getStride=function(){return this.stride},SimpleGeometry.prototype.setFlatCoordinates=function(t,e){this.stride=getStrideForLayout(t),this.layout=t,this.flatCoordinates=e},SimpleGeometry.prototype.setCoordinates=function(t,e){abstract()},SimpleGeometry.prototype.setLayout=function(t,e,n){var r;if(t)r=getStrideForLayout(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=Wd.XY,void(this.stride=2);e=e[0]}t=function getLayoutForStride(t){var e;2==t?e=Wd.XY:3==t?e=Wd.XYZ:4==t&&(e=Wd.XYZM);return(e)}(r=e.length)}this.layout=t,this.stride=r},SimpleGeometry.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},SimpleGeometry.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();!function rotate$1(t,e,n,r,i,o,a){for(var s=a||[],u=Math.cos(i),l=Math.sin(i),c=o[0],h=o[1],f=0,d=e;d<n;d+=r){var p=t[d]-c,y=t[d+1]-h;s[f++]=c+p*u-y*l,s[f++]=h+p*l+y*u;for(var m=d+2;m<d+r;++m)s[f++]=t[m]}return a&&s.length!=f&&(s.length=f),s}(n,0,n.length,r,t,e,n),this.changed()}},SimpleGeometry.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i||(i=getCenter(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function scale$2(t,e,n,r,i,o,a,s){for(var u=s||[],l=a[0],c=a[1],h=0,f=e;f<n;f+=r){var d=t[f]-l,p=t[f+1]-c;u[h++]=l+i*d,u[h++]=c+o*p;for(var y=f+2;y<f+r;++y)u[h++]=t[y]}return s&&u.length!=h&&(u.length=h),u}(o,0,o.length,a,t,r,i,o),this.changed()}},SimpleGeometry.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();!function translate(t,e,n,r,i,o,a){for(var s=a||[],u=0,l=e;l<n;l+=r){s[u++]=t[l]+i,s[u++]=t[l+1]+o;for(var c=l+2;c<l+r;++c)s[u++]=t[c]}return a&&s.length!=u&&(s.length=u),s}(n,0,n.length,r,t,e,n),this.changed()}},SimpleGeometry}(Yd);function getStrideForLayout(t){var e;return t==Wd.XY?e=2:t==Wd.XYZ||t==Wd.XYM?e=3:t==Wd.XYZM&&(e=4),e}function linearRing(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function assignClosest(t,e,n,r,i,o,a){var s,u=t[e],l=t[e+1],c=t[n]-u,h=t[n+1]-l;if(0===c&&0===h)s=e;else{var f=((i-u)*c+(o-l)*h)/(c*c+h*h);if(f>1)s=n;else{if(f>0){for(var d=0;d<r;++d)a[d]=lerp(t[e+d],t[n+d],f);return void(a.length=r)}s=e}}for(d=0;d<r;++d)a[d]=t[s+d];a.length=r}function maxSquaredDelta(t,e,n,r,i){var o=t[e],a=t[e+1];for(e+=r;e<n;e+=r){var s=t[e],u=t[e+1],l=squaredDistance(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function assignClosestPoint(t,e,n,r,i,o,a,s,u,l,c){if(e==n)return l;var h,f;if(0===i){if((f=squaredDistance(a,s,t[e],t[e+1]))<l){for(h=0;h<r;++h)u[h]=t[e+h];return u.length=r,f}return l}for(var d=c||[NaN,NaN],p=e+r;p<n;)if(assignClosest(t,p-r,p,r,a,s,d),(f=squaredDistance(a,s,d[0],d[1]))<l){for(l=f,h=0;h<r;++h)u[h]=d[h];u.length=r,p+=r}else p+=r*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(o&&(assignClosest(t,n-r,e,r,a,s,d),(f=squaredDistance(a,s,d[0],d[1]))<l)){for(l=f,h=0;h<r;++h)u[h]=d[h];u.length=r}return l}function deflateCoordinates(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=n[i],s=0;s<r;++s)t[e++]=a[s];return e}function inflateCoordinates(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=e;s<n;s+=r)o[a++]=t.slice(s,s+r);return o.length=a,o}function snap(t,e){return e*Math.round(t/e)}function quantize(t,e,n,r,i,o,a){if(e==n)return a;var s,u,l=snap(t[e],i),c=snap(t[e+1],i);e+=r,o[a++]=l,o[a++]=c;do{if(s=snap(t[e],i),u=snap(t[e+1],i),(e+=r)==n)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<n;){var h=snap(t[e],i),f=snap(t[e+1],i);if(e+=r,h!=s||f!=u){var d=s-l,p=u-c,y=h-l,m=f-c;d*m==p*y&&(d<0&&y<d||d==y||d>0&&y>d)&&(p<0&&m<p||p==m||p>0&&m>p)?(s=h,u=f):(o[a++]=s,o[a++]=u,l=s,c=u,s=h,u=f)}}return o[a++]=s,o[a++]=u,a}var Xd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),$d=function(t){function LinearRing(e,n){var r=t.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return Xd(LinearRing,t),LinearRing.prototype.clone=function(){return new LinearRing(this.flatCoordinates.slice(),this.layout)},LinearRing.prototype.closestPointXY=function(t,e,n,r){return r<closestSquaredDistanceXY(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))},LinearRing.prototype.getArea=function(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},LinearRing.prototype.getCoordinates=function(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},LinearRing.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=function douglasPeucker(t,e,n,r,i,o,a){var s=(n-e)/r;if(s<3){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,n-r],c=0;l.length>0;){for(var h=l.pop(),f=l.pop(),d=0,p=t[f],y=t[f+1],m=t[h],g=t[h+1],v=f+r;v<h;v+=r){var _=squaredSegmentDistance(t[v],t[v+1],p,y,m,g);_>d&&(c=v,d=_)}d>i&&(u[(c-e)/r]=1,f+r<c&&l.push(f,c),c+r<h&&l.push(c,h))}for(v=0;v<s;++v)u[v]&&(o[a++]=t[e+v*r],o[a++]=t[e+v*r+1]);return a}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new LinearRing(e,Wd.XY)},LinearRing.prototype.getType=function(){return qr},LinearRing.prototype.intersectsExtent=function(t){return!1},LinearRing.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,t,this.stride),this.changed()},LinearRing}(Hd),Qd=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Jd=function(t){function Point(e,n){var r=t.call(this)||this;return r.setCoordinates(e,n),r}return Qd(Point,t),Point.prototype.clone=function(){return new Point(this.flatCoordinates.slice(),this.layout)},Point.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=squaredDistance(t,e,i[0],i[1]);if(o<r){for(var a=this.stride,s=0;s<a;++s)n[s]=i[s];return n.length=a,o}return r},Point.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},Point.prototype.computeExtent=function(t){return function createOrUpdateFromCoordinate(t,e){var n=t[0],r=t[1];return createOrUpdate(n,r,n,r,e)}(this.flatCoordinates,t)},Point.prototype.getType=function(){return Gr},Point.prototype.intersectsExtent=function(t){return containsXY(t,this.flatCoordinates[0],this.flatCoordinates[1])},Point.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function deflateCoordinate(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},Point}(Hd);function linearRingContainsExtent(t,e,n,r,i){return!function forEachCorner(t,e){var n;return(n=e(getBottomLeft(t)))?n:(n=e(getBottomRight(t)))?n:(n=e(getTopRight(t)))?n:(n=e(getTopLeft(t)))||!1}(i,(function(i){return!linearRingContainsXY(t,e,n,r,i[0],i[1])}))}function linearRingContainsXY(t,e,n,r,i,o){for(var a=0,s=t[n-r],u=t[n-r+1];e<n;e+=r){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(i-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function linearRingsContainsXY(t,e,n,r,i,o){if(0===n.length)return!1;if(!linearRingContainsXY(t,e,n[0],r,i,o))return!1;for(var a=1,s=n.length;a<s;++a)if(linearRingContainsXY(t,n[a-1],n[a],r,i,o))return!1;return!0}function intersectsLineString(t,e,n,r,i){var o=extendFlatCoordinates([1/0,1/0,-1/0,-1/0],t,e,n,r);return!!intersects(i,o)&&(!!containsExtent(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||function forEach$2(t,e,n,r,i){for(var o,a=[t[e],t[e+1]],s=[];e+r<n;e+=r){if(s[0]=t[e+r],s[1]=t[e+r+1],o=i(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}(t,e,n,r,(function(t,e){return function intersectsSegment(t,e,n){var r=!1,i=coordinateRelationship(t,e),o=coordinateRelationship(t,n);if(i===Jr.INTERSECTING||o===Jr.INTERSECTING)r=!0;else{var a=t[0],s=t[1],u=t[2],l=t[3],c=e[0],h=e[1],f=n[0],d=n[1],p=(d-h)/(f-c),y=void 0,m=void 0;o&Jr.ABOVE&&!(i&Jr.ABOVE)&&(r=(y=f-(d-l)/p)>=a&&y<=u),r||!(o&Jr.RIGHT)||i&Jr.RIGHT||(r=(m=d-(f-u)*p)>=s&&m<=l),r||!(o&Jr.BELOW)||i&Jr.BELOW||(r=(y=f-(d-s)/p)>=a&&y<=u),r||!(o&Jr.LEFT)||i&Jr.LEFT||(r=(m=d-(f-a)*p)>=s&&m<=l)}return r}(i,t,e)})))))}function intersectsLinearRingArray(t,e,n,r,i){if(!function intersectsLinearRing(t,e,n,r,i){return!!intersectsLineString(t,e,n,r,i)||(!!linearRingContainsXY(t,e,n,r,i[0],i[1])||(!!linearRingContainsXY(t,e,n,r,i[0],i[3])||(!!linearRingContainsXY(t,e,n,r,i[2],i[1])||!!linearRingContainsXY(t,e,n,r,i[2],i[3]))))}(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(linearRingContainsExtent(t,n[o-1],n[o],r,i)&&!intersectsLineString(t,n[o-1],n[o],r,i))return!1;return!0}function coordinates(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function linearRingIsClockwise(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function orientLinearRings(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var u=n[a],l=linearRingIsClockwise(t,e,u,r);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&coordinates(t,e,u,r),e=u}return e}var tp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ep=function(t){function Polygon(e,n,r){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&r?(i.setFlatCoordinates(n,e),i.ends_=r):i.setCoordinates(e,n),i}return tp(Polygon,t),Polygon.prototype.appendLinearRing=function(t){this.flatCoordinates?function extend$1(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},Polygon.prototype.clone=function(){return new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},Polygon.prototype.closestPointXY=function(t,e,n,r){return r<closestSquaredDistanceXY(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function arrayMaxSquaredDelta(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=maxSquaredDelta(t,e,s,r,i),e=s}return i}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function assignClosestArrayPoint(t,e,n,r,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,d=n.length;f<d;++f){var p=n[f];l=assignClosestPoint(t,e,p,r,i,o,a,s,u,l,h),e=p}return l}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))},Polygon.prototype.containsXY=function(t,e){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},Polygon.prototype.getArea=function(){return function linearRings(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=linearRing(t,e,s,r),e=s}return i}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},Polygon.prototype.getCoordinates=function(t){var e;return void 0!==t?orientLinearRings(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function inflateCoordinatesArray(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=0,u=n.length;s<u;++s){var l=n[s];o[a++]=inflateCoordinates(t,e,l,r,o[a]),e=l}return o.length=a,o}(e,0,this.ends_,this.stride)},Polygon.prototype.getEnds=function(){return this.ends_},Polygon.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=getCenter(this.getExtent());this.flatInteriorPoint_=function getInteriorPointOfArray(t,e,n,r,i,o,a){for(var s,u,l,c,h,f,d,p=i[o+1],y=[],m=0,g=n.length;m<g;++m){var v=n[m];for(c=t[v-r],f=t[v-r+1],s=e;s<v;s+=r)h=t[s],d=t[s+1],(p<=f&&d<=p||f<=p&&p<=d)&&(l=(p-f)/(d-f)*(h-c)+c,y.push(l)),c=h,f=d}var _=NaN,b=-1/0;for(y.sort(numberSafeCompareFunction),c=y[0],s=1,u=y.length;s<u;++s){h=y[s];var w=Math.abs(h-c);w>b&&linearRingsContainsXY(t,e,n,r,l=(c+h)/2,p)&&(_=l,b=w),c=h}return isNaN(_)&&(_=i[o]),a?(a.push(_,p,b),a):[_,p,b]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},Polygon.prototype.getInteriorPoint=function(){return new Jd(this.getFlatInteriorPoint(),Wd.XYM)},Polygon.prototype.getLinearRingCount=function(){return this.ends_.length},Polygon.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new $d(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},Polygon.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o],u=new $d(e.slice(i,s),t);r.push(u),i=s}return r},Polygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function linearRingsAreOriented(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var u=n[a],l=linearRingIsClockwise(t,e,u,r);if(0===a){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},Polygon.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];return e.length=function quantizeArray(t,e,n,r,i,o,a,s){for(var u=0,l=n.length;u<l;++u){var c=n[u];a=quantize(t,e,c,r,i,o,a),s.push(a),e=c}return a}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Polygon(e,Wd.XY,n)},Polygon.prototype.getType=function(){return Wr},Polygon.prototype.intersectsExtent=function(t){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},Polygon.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function deflateCoordinatesArray(t,e,n,r,i){for(var o=i||[],a=0,s=0,u=n.length;s<u;++s){var l=deflateCoordinates(t,e,n[s],r);o[a++]=l,e=l}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},Polygon}(Hd);function fromExtent(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new ep(o,Wd.XY,[o.length])}var np=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),rp=0,ip=function(t){function View(e){var n=t.call(this)||this,r=Ur({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=createProjection(r.projection,"EPSG:3857"),n.targetCenter_=null,n.targetResolution_,n.targetRotation_,r.center&&(r.center=fromUserCoordinate(r.center,n.projection_)),r.extent&&(r.extent=fromUserExtent(r.extent,n.projection_)),n.applyOptions_(r),n}return np(View,t),View.prototype.applyOptions_=function(t){var e=function createResolutionConstraint(t){var e,n,r,i=void 0!==t.minZoom?t.minZoom:rp,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=createProjection(t.projection,"EPSG:3857"),c=l.getExtent(),h=t.constrainOnlyCenter,f=t.extent;s||f||!l.isGlobal()||(h=!1,f=c);if(void 0!==t.resolutions){var d=t.resolutions;n=d[i],r=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function createSnapToResolutions(t,e,n){return function(r,i,o,a){if(void 0!==r){var s=t[0],u=t[t.length-1],l=n?getViewportClampedResolution(s,n,o):s;if(a)return void 0===e||e?getSmoothClampedResolution(r,l,u):clamp(r,u,l);var c=Math.min(l,r),h=Math.floor(linearFindNearest(t,c,i));return t[h]>l&&h<t.length-1?t[h+1]:t[h]}}}(d,u,!h&&f):createMinMaxResolution(n,r,u,!h&&f)}else{var p=(c?Math.max(getWidth(c),getHeight(c)):360*ei[ti.DEGREES]/l.getMetersPerUnit())/qc/Math.pow(2,rp),y=p/Math.pow(2,28-rp);void 0!==(n=t.maxResolution)?i=0:n=p/Math.pow(a,i),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,o):p/Math.pow(a,o):y),o=i+Math.floor(Math.log(n/r)/Math.log(a)),r=n/Math.pow(a,o-i),e=t.constrainResolution?function createSnapToPower(t,e,n,r,i){return function(o,a,s,u){if(void 0!==o){var l=i?getViewportClampedResolution(e,i,s):e,c=void 0!==n?n:0;if(u)return void 0===r||r?getSmoothClampedResolution(o,l,c):clamp(o,c,l);var h=Math.ceil(Math.log(e/l)/Math.log(t)-1e-9),f=-a*(.5-1e-9)+.5,d=Math.min(l,o),p=Math.floor(Math.log(e/d)/Math.log(t)+f),y=Math.max(h,p);return clamp(e/Math.pow(t,y),c,l)}}}(a,n,r,u,!h&&f):createMinMaxResolution(n,r,u,!h&&f)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var n=function createCenterConstraint(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return createExtent(t.extent,t.constrainOnlyCenter,e)}var n=createProjection(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var r=n.getExtent().slice();return r[0]=-1/0,r[2]=1/0,createExtent(r,!1,!1)}return none}(t),r=e.constraint,i=function createRotationConstraint(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?function createSnapToZero(t){var e=t||toRadians(5);return(function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0})}():!1===e?none$1:"number"==typeof e?function createSnapToN(t){var e=2*Math.PI/t;return(function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0})}(e):none$1}return disable}(t);this.constraints_={center:n,resolution:r,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.resolveConstraints(0),this.setProperties({}),this.options_=t},View.prototype.getUpdatedOptions_=function(t){var e=Ur({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Ur({},e,t)},View.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&((r=Ur({},r)).center=fromUserCoordinate(r.center,this.getProjection())),r.anchor&&((r=Ur({},r)).anchor=fromUserCoordinate(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)},View.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var r=arguments[n-1];return r.center&&this.setCenterInternal(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&animationCallback(e,!0))}for(var i=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],l=0;l<n;++l){var c=arguments[l],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||inAndOut,callback:e};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=s;var f=modulo(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+f,s=h.targetRotation}isNoopAnimation(h)?h.complete=!0:i+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Ql,1),this.updateAnimations_()},View.prototype.getAnimating=function(){return this.hints_[Ql]>0},View.prototype.getInteracting=function(){return this.hints_[Jl]>0},View.prototype.cancelAnimations=function(){this.setHint(Ql,-this.hints_[Ql]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];n[0].callback&&animationCallback(n[0].callback,!1)}this.animations_.length=0},View.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var r=this.animations_[n],i=!0,o=0,a=r.length;o<a;++o){var s=r[o];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):i=!1;var c=s.easing(l);if(s.sourceCenter){var h=s.sourceCenter[0],f=s.sourceCenter[1],d=h+c*(s.targetCenter[0]-h),p=f+c*(s.targetCenter[1]-f);this.targetCenter_=[d,p]}if(s.sourceResolution&&s.targetResolution){var y=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var m=this.getSizeFromViewport_(this.getRotation()),g=this.constraints_.resolution(y,0,m,!0);this.targetCenter_=this.calculateCenterZoom(g,s.anchor)}this.targetResolution_=y,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var v=1===c?modulo(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var _=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(_,s.anchor)}this.targetRotation_=v}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[n]=null,this.setHint(Ql,-1);var b=r[0].callback;b&&animationCallback(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},View.prototype.calculateCenterRotate=function(t,e){var n,r=this.getCenterInternal();return void 0!==r&&(rotate(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),function add$2(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}(n,e)),n},View.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenterInternal(),i=this.getResolution();void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]);return n},View.prototype.getSizeFromViewport_=function(t){var e=[100,100],n='.ol-viewport[data-view="'+getUid(this)+'"]',r=document.querySelector(n);if(r){var i=getComputedStyle(r);e[0]=parseInt(i.width,10),e[1]=parseInt(i.height,10)}if(t){var o=e[0],a=e[1];e[0]=Math.abs(o*Math.cos(t))+Math.abs(a*Math.sin(t)),e[1]=Math.abs(o*Math.sin(t))+Math.abs(a*Math.cos(t))}return e},View.prototype.getCenter=function(){var t=this.getCenterInternal();return t?toUserCoordinate(t,this.getProjection()):t},View.prototype.getCenterInternal=function(){return this.get(zd)},View.prototype.getConstraints=function(){return this.constraints_},View.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},View.prototype.calculateExtent=function(t){return function toUserExtent(t,e){return gi?transformExtent(t,e,gi):t}(this.calculateExtentInternal(t),this.getProjection())},View.prototype.calculateExtentInternal=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenterInternal();assert(n,1);var r=this.getResolution();assert(void 0!==r,2);var i=this.getRotation();return assert(void 0!==i,3),getForViewAndSize(n,r,i,e)},View.prototype.getMaxResolution=function(){return this.maxResolution_},View.prototype.getMinResolution=function(){return this.minResolution_},View.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},View.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},View.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},View.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},View.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},View.prototype.getProjection=function(){return this.projection_},View.prototype.getResolution=function(){return this.get(Gd)},View.prototype.getResolutions=function(){return this.resolutions_},View.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(fromUserExtent(t,this.getProjection()),e)},View.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getSizeFromViewport_(),r=getWidth(t)/n[0],i=getHeight(t)/n[1];return Math.max(r,i)},View.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},View.prototype.getRotation=function(){return this.get(qd)},View.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/i}},View.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),n=this.getResolution(),r=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:n,rotation:r,zoom:this.getZoom()}},View.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},View.prototype.getZoomForResolution=function(t){var e,n,r=this.minZoom_||0;if(this.resolutions_){var i=linearFindNearest(this.resolutions_,t,1);r=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)},View.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=clamp(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,clamp(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},View.prototype.fit=function(t,e){var n,r=Ur({size:this.getSizeFromViewport_()},e||{});if(assert(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))assert(!isEmpty(t),25),n=fromExtent(i=fromUserExtent(t,this.getProjection()));else if(t.getType()===Kr){var i;(n=fromExtent(i=fromUserExtent(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),getCenter(i))}else{var o=getUserProjection();n=o?n.clone().transform(o,this.getProjection()):t}this.fitInternal(n,r)},View.prototype.fitInternal=function(t,e){var n=e||{},r=n.size;r||(r=this.getSizeFromViewport_());var i,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),l=Math.cos(-u),c=Math.sin(-u),h=1/0,f=1/0,d=-1/0,p=-1/0,y=t.getStride(),m=0,g=s.length;m<g;m+=y){var v=s[m]*l-s[m+1]*c,_=s[m]*c+s[m+1]*l;h=Math.min(h,v),f=Math.min(f,_),d=Math.max(d,v),p=Math.max(p,_)}var b=this.getResolutionForExtentInternal([h,f,d,p],[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);b=isNaN(b)?i:Math.max(b,i),b=this.getConstrainedResolution(b,a?0:1),c=-c;var w=(h+d)/2,T=(f+p)/2,S=[(w+=(o[1]-o[3])/2*b)*l-(T+=(o[0]-o[2])/2*b)*c,T*l+w*c],E=n.callback?n.callback:VOID;void 0!==n.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(S,b),duration:n.duration,easing:n.easing},E):(this.targetResolution_=b,this.targetCenter_=S,this.applyTargetState_(!1,!0),animationCallback(E,!0))},View.prototype.centerOn=function(t,e,n){this.centerOnInternal(fromUserCoordinate(t,this.getProjection()),e,n)},View.prototype.centerOnInternal=function(t,e,n){var r=this.getRotation(),i=Math.cos(-r),o=Math.sin(-r),a=t[0]*i-t[1]*o,s=t[1]*i+t[0]*o,u=this.getResolution(),l=(a+=(e[0]/2-n[0])*u)*i-(s+=(n[1]-e[1]/2)*u)*(o=-o),c=s*i+a*o;this.setCenterInternal([l,c])},View.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},View.prototype.adjustCenter=function(t){var e=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},View.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},View.prototype.adjustResolution=function(t,e){var n=e&&fromUserCoordinate(e,this.getProjection());this.adjustResolutionInternal(t,n)},View.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.getSizeFromViewport_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,r,n);void 0!==e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},View.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},View.prototype.adjustRotation=function(t,e){e&&(e=fromUserCoordinate(e,this.getProjection())),this.adjustRotationInternal(t,e)},View.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);void 0!==e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()},View.prototype.setCenter=function(t){this.setCenterInternal(fromUserCoordinate(t,this.getProjection()))},View.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},View.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},View.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},View.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},View.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},View.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getSizeFromViewport_(r),o=this.constraints_.resolution(this.targetResolution_,0,i,n),a=this.constraints_.center(this.targetCenter_,o,i,n);this.get(qd)!==r&&this.set(qd,r),this.get(Gd)!==o&&this.set(Gd,o),this.get(zd)&&equals$2(this.get(zd),a)||this.set(zd,a),this.getAnimating()&&!t&&this.cancelAnimations()},View.prototype.resolveConstraints=function(t,e,n){var r=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getSizeFromViewport_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===r)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&equals$2(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:r,easing:easeOut,anchor:n}))},View.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Jl,1)},View.prototype.endInteraction=function(t,e,n){var r=n&&fromUserCoordinate(n,this.getProjection());this.endInteractionInternal(t,e,r)},View.prototype.endInteractionInternal=function(t,e,n){this.setHint(Jl,-1),this.resolveConstraints(t,e,n)},View.prototype.getConstrainedCenter=function(t,e){var n=this.getSizeFromViewport_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},View.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},View.prototype.getConstrainedResolution=function(t,e){var n=e||0,r=this.getSizeFromViewport_(this.getRotation());return this.constraints_.resolution(t,n,r)},View}(Cu);function animationCallback(t,e){setTimeout((function(){t(e)}),0)}function isNoopAnimation(t){return!(t.sourceCenter&&t.targetCenter&&!equals$2(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var op=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ap={LAYERS:"layers"},sp=function(t){function LayerGroup(e){var n=this,r=e||{},i=Ur({},r);delete i.layers;var o=r.layers;return(n=t.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener(getChangeEventType(ap.LAYERS),n.handleLayersChanged_),o?Array.isArray(o)?o=new Od(o.slice(),{unique:!0}):assert("function"==typeof o.getArray,43):o=new Od(void 0,{unique:!0}),n.setLayers(o),n}return op(LayerGroup,t),LayerGroup.prototype.handleLayerChange_=function(){this.changed()},LayerGroup.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(listen(t,Td.ADD,this.handleLayersAdd_,this),listen(t,Td.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(unlistenByKey);clear$1(this.listenerKeys_);for(var n=t.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.listenerKeys_[getUid(o)]=[listen(o,_u,this.handleLayerChange_,this),listen(o,Eu.CHANGE,this.handleLayerChange_,this)]}this.changed()},LayerGroup.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[getUid(e)]=[listen(e,_u,this.handleLayerChange_,this),listen(e,Eu.CHANGE,this.handleLayerChange_,this)],this.changed()},LayerGroup.prototype.handleLayersRemove_=function(t){var e=getUid(t.element);this.listenerKeys_[e].forEach(unlistenByKey),delete this.listenerKeys_[e],this.changed()},LayerGroup.prototype.getLayers=function(){return this.get(ap.LAYERS)},LayerGroup.prototype.setLayers=function(t){this.set(ap.LAYERS,t)},LayerGroup.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},LayerGroup.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var r=this.getLayerState(),i=n,o=e.length;i<o;i++){var a=e[i];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),a.minZoom=Math.max(a.minZoom,r.minZoom),a.maxZoom=Math.min(a.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==a.extent?a.extent=getIntersection(a.extent,r.extent):a.extent=r.extent)}return e},LayerGroup.prototype.getSourceState=function(){return wl.READY},LayerGroup}(yl),up=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}();function setTouchAction(t,e){t.style.msTouchAction=e,t.style.touchAction=e,t.setAttribute("touch-action",e)}var lp=function(t){function PluggableMap(e){var n=t.call(this)||this,r=function createOptionsInternal(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new sp({layers:t.layers});o[Nd.LAYERGROUP]=a,o[Nd.TARGET]=t.target,o[Nd.VIEW]=void 0!==t.view?t.view:new ip,void 0!==t.controls&&(Array.isArray(t.controls)?n=new Od(t.controls.slice()):(assert("function"==typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new Od(t.interactions.slice()):(assert("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?i=new Od(t.overlays.slice()):(assert("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new Od;return{controls:n,interactions:r,keyboardEventTarget:e,overlays:i,values:o}}(e);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:hc,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=new Dd(n,e.moveTolerance);var i=n.handleMapBrowserEvent.bind(n);for(var o in Id)n.mapBrowserEventHandler_.addEventListener(Id[o],i);n.keyboardEventTarget_=r.keyboardEventTarget,n.keyHandlerKeys_=null,n.focusHandlerKeys_=null;var a=n.handleBrowserEvent.bind(n);return n.viewport_.addEventListener(Eu.CONTEXTMENU,a,!1),n.viewport_.addEventListener(Eu.WHEEL,a,!1),n.controls=r.controls||new Od,n.interactions=r.interactions||new Od,n.overlays_=r.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new Vd(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addEventListener(getChangeEventType(Nd.LAYERGROUP),n.handleLayerGroupChanged_),n.addEventListener(getChangeEventType(Nd.VIEW),n.handleViewChanged_),n.addEventListener(getChangeEventType(Nd.SIZE),n.handleSizeChanged_),n.addEventListener(getChangeEventType(Nd.TARGET),n.handleTargetChanged_),n.setProperties(r.values),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.controls.addEventListener(Td.ADD,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(Td.REMOVE,function(t){t.element.setMap(null)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.addEventListener(Td.ADD,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Td.REMOVE,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(Td.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(Td.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n}return up(PluggableMap,t),PluggableMap.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},PluggableMap.prototype.addControl=function(t){this.getControls().push(t)},PluggableMap.prototype.addInteraction=function(t){this.getInteractions().push(t)},PluggableMap.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},PluggableMap.prototype.addOverlay=function(t){this.getOverlays().push(t)},PluggableMap.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},PluggableMap.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(Eu.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Eu.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Eu.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},PluggableMap.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var r=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==n.layerFilter?n.layerFilter:TRUE,a=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,i,a,e,null,o,null)}},PluggableMap.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},PluggableMap.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var r=n||{},i=void 0!==r.hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=r.layerFilter||TRUE;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},PluggableMap.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:TRUE,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,o,r,null)},PluggableMap.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},PluggableMap.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},PluggableMap.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},PluggableMap.prototype.getTarget=function(){return this.get(Nd.TARGET)},PluggableMap.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},PluggableMap.prototype.getCoordinateFromPixel=function(t){return toUserCoordinate(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},PluggableMap.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?apply(e.pixelToCoordinateTransform,t.slice()):null},PluggableMap.prototype.getControls=function(){return this.controls},PluggableMap.prototype.getOverlays=function(){return this.overlays_},PluggableMap.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},PluggableMap.prototype.getInteractions=function(){return this.interactions},PluggableMap.prototype.getLayerGroup=function(){return this.get(Nd.LAYERGROUP)},PluggableMap.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},PluggableMap.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer.getSource();if(r&&r.loading)return!0}return!1},PluggableMap.prototype.getPixelFromCoordinate=function(t){var e=fromUserCoordinate(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},PluggableMap.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?apply(e.coordinateToPixelTransform,t.slice(0,2)):null},PluggableMap.prototype.getRenderer=function(){return this.renderer_},PluggableMap.prototype.getSize=function(){return this.get(Nd.SIZE)},PluggableMap.prototype.getView=function(){return this.get(Nd.VIEW)},PluggableMap.prototype.getViewport=function(){return this.viewport_},PluggableMap.prototype.getOverlayContainer=function(){return this.overlayContainer_},PluggableMap.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},PluggableMap.prototype.getTilePriority=function(t,e,n,r){var i=this.frameState_;if(!(i&&e in i.wantedTiles))return 1/0;if(!i.wantedTiles[e][t.getKey()])return 1/0;var o=i.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+s*s)/r},PluggableMap.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new Pd(n,this,t);this.handleMapBrowserEvent(r)},PluggableMap.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){for(var e=t.originalEvent.target;e instanceof HTMLElement;){if(e.parentElement===this.overlayContainerStopEvent_)return;e=e.parentElement}t.frameState=this.frameState_;var n=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var r=n.length-1;r>=0;r--){var i=n[r];if(i.getActive())if(!i.handleEvent(t))break}}},PluggableMap.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,r=n;if(t){var i=t.viewHints;if(i[Ql]||i[Jl]){var o=!fc&&Date.now()-t.time>8;n=o?0:8,r=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}!t||!this.hasListener(bl)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(bl,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},PluggableMap.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},PluggableMap.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.focusHandlerKeys_){for(var e=0,n=this.focusHandlerKeys_.length;e<n;++e)unlistenByKey(this.focusHandlerKeys_[e]);this.focusHandlerKeys_=null}if(this.keyHandlerKeys_){for(e=0,n=this.keyHandlerKeys_.length;e<n;++e)unlistenByKey(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var r=!0;t.hasAttribute("tabindex")&&(r=document.activeElement===t,this.focusHandlerKeys_=[listen(t,Eu.FOCUS,setTouchAction.bind(this,this.viewport_,"none")),listen(t,Eu.BLUR,setTouchAction.bind(this,this.viewport_,"auto"))]),setTouchAction(this.viewport_,r?"none":"auto");var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[listen(i,Eu.KEYDOWN,this.handleBrowserEvent,this),listen(i,Eu.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Eu.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),removeNode(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Eu.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},PluggableMap.prototype.handleTileChange_=function(){this.render()},PluggableMap.prototype.handleViewPropertyChanged_=function(){this.render()},PluggableMap.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",getUid(t)),this.viewPropertyListenerKey_=listen(t,_u,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(t,Eu.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},PluggableMap.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[listen(t,_u,this.render,this),listen(t,Eu.CHANGE,this.render,this)]),this.render()},PluggableMap.prototype.isRendered=function(){return!!this.frameState_},PluggableMap.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},PluggableMap.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},PluggableMap.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},PluggableMap.prototype.removeControl=function(t){return this.getControls().remove(t)},PluggableMap.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},PluggableMap.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},PluggableMap.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},PluggableMap.prototype.renderFrame_=function(t){var e=this.getSize(),n=this.getView(),r=this.frameState_,i=null;if(void 0!==e&&function hasArea(t){return t[0]>0&&t[1]>0}(e)&&n&&n.isDef()){var o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:r?r.declutterItems:[],extent:getForViewAndSize(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),r)(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals(i.extent,this.previousExtent_))&&(this.dispatchEvent(new kd(ul,this,r)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_));this.previousExtent_&&!i.viewHints[Ql]&&!i.viewHints[Jl]&&!equals(i.extent,this.previousExtent_)&&(this.dispatchEvent(new kd(ll,this,i)),function clone(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}(i.extent,this.previousExtent_))}this.dispatchEvent(new kd(sl,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},PluggableMap.prototype.setLayerGroup=function(t){this.set(Nd.LAYERGROUP,t)},PluggableMap.prototype.setSize=function(t){this.set(Nd.SIZE,t)},PluggableMap.prototype.setTarget=function(t){this.set(Nd.TARGET,t)},PluggableMap.prototype.setView=function(t){this.set(Nd.VIEW,t)},PluggableMap.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},PluggableMap}(Cu);var cp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),hp=function(t){function Attribution(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render||render$1,target:r.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===r.collapsed||r.collapsed,n.overrideCollapsible_=void 0!==r.collapsible,n.collapsible_=void 0===r.collapsible||r.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.collapseLabel?r.collapseLabel:"»";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a):n.collapseLabel_=a;var s=void 0!==r.label?r.label:"i";"string"==typeof s?(n.label_=document.createElement("span"),n.label_.textContent=s):n.label_=s;var u=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(Eu.CLICK,n.handleClick_.bind(n),!1);var c=i+" "+Ll+" "+Al+(n.collapsed_&&n.collapsible_?" "+jl:"")+(n.collapsible_?"":" ol-uncollapsible"),h=n.element;return h.className=c,h.appendChild(n.ulElement_),h.appendChild(l),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return cp(Attribution,t),Attribution.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],r=t.layerStatesArray,i=0,o=r.length;i<o;++i){var a=r[i];if(inView(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var l=u(t);if(l)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(l))for(var c=0,h=l.length;c<h;++c)l[c]in e||(n.push(l[c]),e[l[c]]=!0);else l in e||(n.push(l),e[l]=!0)}}}}return n},Attribution.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!equals$1(e,this.renderedAttributions_)){!function removeChildren(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var r=0,i=e.length;r<i;++r){var o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},Attribution.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},Attribution.prototype.handleToggle_=function(){this.element.classList.toggle(jl),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},Attribution.prototype.getCollapsible=function(){return this.collapsible_},Attribution.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},Attribution.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},Attribution.prototype.getCollapsed=function(){return this.collapsed_},Attribution}(hl);function render$1(t){this.updateElement_(t.frameState)}var fp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),dp=function(t){function Rotate(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),render:r.render||render$2,target:r.target})||this;var i=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧";n.label_=null,"string"==typeof o?(n.label_=document.createElement("span"),n.label_.className="ol-compass",n.label_.textContent=o):(n.label_=o,n.label_.classList.add("ol-compass"));var a=r.tipLabel?r.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(n.label_),s.addEventListener(Eu.CLICK,n.handleClick_.bind(n),!1);var u=i+" "+Ll+" "+Al,l=n.element;return l.className=u,l.appendChild(s),n.callResetNorth_=r.resetNorth?r.resetNorth:void 0,n.duration_=void 0!==r.duration?r.duration:250,n.autoHide_=void 0===r.autoHide||r.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(Rl),n}return fp(Rotate,t),Rotate.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},Rotate.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))},Rotate}(hl);function render$2(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var r="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(Rl);i||0!==n?i&&0!==n&&this.element.classList.remove(Rl):this.element.classList.add(Rl)}this.label_.style.transform=r}this.rotation_=n}}var pp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),yp=function(t){function Zoom(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),target:r.target})||this;var i=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,a=void 0!==r.zoomInLabel?r.zoomInLabel:"+",s=void 0!==r.zoomOutLabel?r.zoomOutLabel:"−",u=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",l=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i+"-in",c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(Eu.CLICK,n.handleClick_.bind(n,o),!1);var h=document.createElement("button");h.className=i+"-out",h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(Eu.CLICK,n.handleClick_.bind(n,-o),!1);var f=i+" "+Ll+" "+Al,d=n.element;return d.className=f,d.appendChild(c),d.appendChild(h),n.duration_=void 0!==r.duration?r.duration:250,n}return pp(Zoom,t),Zoom.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},Zoom.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var r=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.duration_,easing:easeOut})):e.setZoom(r)}}},Zoom}(hl);function asString(t){return"string"==typeof t?t:function toString$3(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];r!=(0|r)&&(r=r+.5|0);var i=void 0===t[3]?1:t[3];return"rgba("+e+","+n+","+r+","+i+")"}(t)}function getKey$1(t,e,n){return e+":"+t+":"+(n?asString(n):"null")}var mp=new(function(){function IconImageCache(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return IconImageCache.prototype.clear=function(){this.cache_={},this.cacheSize_=0},IconImageCache.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},IconImageCache.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},IconImageCache.prototype.get=function(t,e,n){var r=getKey$1(t,e,n);return r in this.cache_?this.cache_[r]:null},IconImageCache.prototype.set=function(t,e,n,r){var i=getKey$1(t,e,n);this.cache_[i]=r,++this.cacheSize_},IconImageCache.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},IconImageCache}());var gp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),vp=function(t){function MapRenderer(e){var n=t.call(this)||this;return n.map_=e,n.declutterTree_=null,n}return gp(MapRenderer,t),MapRenderer.prototype.dispatchRenderEvent=function(t,e){abstract()},MapRenderer.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;compose(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),makeInverse(r,n)},MapRenderer.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o,a,s){var u,l=e.viewState;function forEachFeatureAtCoordinate(t,e,n){return i.call(o,e,t?n:null)}var c=l.projection,h=t,f=[[0,0]];if(c.canWrapX()){var d=c.getExtent(),p=getWidth(d),y=t[0];if(y<d[0]||y>d[2])h=[y+p*Math.ceil((d[0]-y)/p),t[1]];r&&f.push([-p,0],[p,0])}var m,g=e.layerStatesArray,v=g.length;this.declutterTree_&&(m=this.declutterTree_.all().map((function(t){return t.value})));for(var _=[],b=0;b<f.length;b++)for(var w=v-1;w>=0;--w){var T=g[w],S=T.layer;if(S.hasRenderer()&&inView(T,l)&&a.call(s,S)){var E=S.getRenderer(),M=S.getSource();if(E&&M){var O=M.getWrapX()?h:t,x=forEachFeatureAtCoordinate.bind(null,T.managed);_[0]=O[0]+f[b][0],_[1]=O[1]+f[b][1],u=E.forEachFeatureAtCoordinate(_,e,n,x,m)}if(u)return u}}},MapRenderer.prototype.forEachLayerAtPixel=function(t,e,n,r,i){return abstract()},MapRenderer.prototype.hasFeatureAtCoordinate=function(t,e,n,r,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,r,TRUE,this,i,o)},MapRenderer.prototype.getMap=function(){return this.map_},MapRenderer.prototype.renderFrame=function(t){this.declutterTree_=function renderDeclutterItems(t,e){e&&e.clear();for(var n=t.declutterItems,r=n.length-1;r>=0;--r)for(var i=n[r],o=i.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],i.opacity,e);return n.length=0,e}(t,this.declutterTree_)},MapRenderer.prototype.scheduleExpireIconCache=function(t){mp.canExpireCache()&&t.postRenderFunctions.push(expireIconCache)},MapRenderer}(bu);function expireIconCache(t,e){mp.expire()}var _p=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),bp=function(t){function CompositeMapRenderer(e){var n=t.call(this,e)||this;n.labelCacheKey_=listen(Ul,Eu.CLEAR,e.redrawText.bind(e)),n.element_=document.createElement("div");var r=n.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.element_.className=Ll+" ol-layers";var i=e.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return _p(CompositeMapRenderer,t),CompositeMapRenderer.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var r=new Il(t,void 0,e);n.dispatchEvent(r)}},CompositeMapRenderer.prototype.disposeInternal=function(){unlistenByKey(this.labelCacheKey_),t.prototype.disposeInternal.call(this)},CompositeMapRenderer.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(vl,e);var n=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),r=e.viewState;this.children_.length=0;for(var i=null,o=0,a=n.length;o<a;++o){var s=n[o];if(e.layerIndex=o,inView(s,r)&&(s.sourceState==wl.READY||s.sourceState==wl.UNDEFINED)){var u=s.layer.render(e,i);u&&u!==i&&(this.children_.push(u),i=u)}}t.prototype.renderFrame.call(this,e),function replaceChildren(t,e){for(var n=t.childNodes,r=0;;++r){var i=n[r],o=e[r];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--r):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(_l,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},CompositeMapRenderer.prototype.forEachLayerAtPixel=function(t,e,n,r,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],l=u.layer;if(l.hasRenderer()&&inView(u,o)&&i(l)){var c=l.getRenderer().getDataAtPixel(t,e,n);if(c){var h=r(l,c);if(h)return h}}}},CompositeMapRenderer}(vp);var wp=function(){function Kinetic(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return Kinetic.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Kinetic.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Kinetic.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;var i=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/r,this.initialVelocity_>this.minVelocity_},Kinetic.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Kinetic.prototype.getAngle=function(){return this.angle_},Kinetic}(),Tp="active",Sp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Ep=function(t){function Interaction(e){var n=t.call(this)||this;return e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return Sp(Interaction,t),Interaction.prototype.getActive=function(){return this.get(Tp)},Interaction.prototype.getMap=function(){return this.map_},Interaction.prototype.handleEvent=function(t){return!0},Interaction.prototype.setActive=function(t){this.set(Tp,t)},Interaction.prototype.setMap=function(t){this.map_=t},Interaction}(Cu);function zoomByDelta(t,e,n,r){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==r?r:250,easing:easeOut})}}var Mp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Op=function(t){function DoubleClickZoom(e){var n=t.call(this,{handleEvent:handleEvent})||this,r=e||{};return n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:250,n}return Mp(DoubleClickZoom,t),DoubleClickZoom}(Ep);function handleEvent(t){var e=!1;if(t.type==Id.DBLCLICK){var n=t.originalEvent,r=t.map,i=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;zoomByDelta(r.getView(),o,i,this.duration_),t.preventDefault(),e=!0}return!e}var altShiftKeysOnly=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(t){return t.target.getTargetElement()===document.activeElement},xp=TRUE,mouseActionButton=function(t){var e=t.originalEvent;return 0==e.button&&!(lc&&cc&&e.ctrlKey)},noModifierKeys=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},shiftKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(t){var e=t.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},mouseOnly=function(t){var e=t.pointerEvent;return assert(void 0!==e,56),"mouse"==e.pointerType},primaryAction=function(t){var e=t.pointerEvent;return assert(void 0!==e,56),e.isPrimary&&0===e.button},kp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Cp=function(t){function PointerInteraction(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return kp(PointerInteraction,t),PointerInteraction.prototype.handleDownEvent=function(t){return!1},PointerInteraction.prototype.handleDragEvent=function(t){},PointerInteraction.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Id.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Id.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Id.POINTERDOWN){var r=this.handleDownEvent(t);r&&t.preventDefault(),this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==Id.POINTERMOVE&&this.handleMoveEvent(t);return!e},PointerInteraction.prototype.handleMoveEvent=function(t){},PointerInteraction.prototype.handleUpEvent=function(t){return!1},PointerInteraction.prototype.stopDown=function(t){return t},PointerInteraction.prototype.updateTrackedPointers_=function(t){if(function isPointerDraggingEvent(t){var e=t.type;return e===Id.POINTERDOWN||e===Id.POINTERDRAG||e===Id.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==Id.POINTERUP?delete this.trackedPointers_[n]:t.type==Id.POINTERDOWN?this.trackedPointers_[n]=e:n in this.trackedPointers_&&(this.trackedPointers_[n]=e),this.targetPointers=Vr(this.trackedPointers_)}},PointerInteraction}(Ep);function centroid(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}var Pp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Ip=function(t){function DragPan(e){var n=t.call(this,{stopDown:FALSE})||this,r=e||{};return n.kinetic_=r.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1,n.condition_=r.condition?r.condition:defaultCondition,n.noKinetic_=!1,n}return Pp(DragPan,t),DragPan.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,n=centroid(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var r=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();!function scale$1(t,e){return t[0]*=e,t[1]*=e,t}(r,i.getResolution()),rotate(r,i.getRotation()),i.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length},DragPan.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(i),a[1]-r*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},DragPan.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},DragPan}(Cp);function defaultCondition(t){return noModifierKeys(t)&&primaryAction(t)}var Rp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Lp=function(t){function DragRotate(e){var n=this,r=e||{};return(n=t.call(this,{stopDown:FALSE})||this).condition_=r.condition?r.condition:altShiftKeysOnly,n.lastAngle_=void 0,n.duration_=void 0!==r.duration?r.duration:250,n}return Rp(DragRotate,t),DragRotate.prototype.handleDragEvent=function(t){if(mouseOnly(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==disable){var r=e.getSize(),i=t.pixel,o=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}}},DragRotate.prototype.handleUpEvent=function(t){return!mouseOnly(t)||(t.map.getView().endInteraction(this.duration_),!1)},DragRotate.prototype.handleDownEvent=function(t){return!!mouseOnly(t)&&(!(!mouseActionButton(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},DragRotate}(Cp),Ap=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),jp=function(t){function RenderBox(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Ap(RenderBox,t),RenderBox.prototype.disposeInternal=function(){this.setMap(null)},RenderBox.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},RenderBox.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},RenderBox.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},RenderBox.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new ep([n])},RenderBox.prototype.getGeometry=function(){return this.geometry_},RenderBox}(bu),Dp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Np="boxstart",Fp="boxdrag",Up="boxend",Vp=function(t){function DragBoxEvent(e,n,r){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=r,i}return Dp(DragBoxEvent,t),DragBoxEvent}(wu),zp=function(t){function DragBox(e){var n=t.call(this)||this,r=e||{};return n.box_=new jp(r.className||"ol-dragbox"),n.minArea_=void 0!==r.minArea?r.minArea:64,n.onBoxEnd_=r.onBoxEnd?r.onBoxEnd:VOID,n.startPixel_=null,n.condition_=r.condition?r.condition:xp,n.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return Dp(DragBox,t),DragBox.prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],i=n[1]-e[1];return r*r+i*i>=this.minArea_},DragBox.prototype.getGeometry=function(){return this.box_.getGeometry()},DragBox.prototype.handleDragEvent=function(t){mouseOnly(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Vp(Fp,t.coordinate,t)))},DragBox.prototype.handleUpEvent=function(t){return!mouseOnly(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Vp(Up,t.coordinate,t))),!1)},DragBox.prototype.handleDownEvent=function(t){return!!mouseOnly(t)&&(!(!mouseActionButton(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Vp(Np,t.coordinate,t)),!0))},DragBox}(Cp),Gp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),qp=function(t){function DragZoom(e){var n=this,r=e||{},i=r.condition?r.condition:shiftKeyOnly;return(n=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea,onBoxEnd:onBoxEnd})||this).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return Gp(DragZoom,t),DragZoom}(zp);function onBoxEnd(){var t=this.getMap(),e=t.getView(),n=t.getSize(),r=this.getGeometry().getExtent();if(this.out_){var i=e.calculateExtentInternal(n),o=createOrUpdateFromCoordinates([t.getPixelFromCoordinateInternal(getBottomLeft(r)),t.getPixelFromCoordinateInternal(getTopRight(r))]);!function scaleFromCenter(t,e){var n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}(i,1/e.getResolutionForExtentInternal(o,n)),r=i}var a=e.getConstrainedResolution(e.getResolutionForExtentInternal(r,n)),s=e.getConstrainedCenter(getCenter(r),a);e.animateInternal({resolution:a,center:s,duration:this.duration_,easing:easeOut})}var Wp={LEFT:37,UP:38,RIGHT:39,DOWN:40},Kp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Bp=function(t){function KeyboardPan(e){var n=t.call(this,{handleEvent:handleEvent$1})||this,r=e||{};return n.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},n.condition_=void 0!==r.condition?r.condition:n.defaultCondition_,n.duration_=void 0!==r.duration?r.duration:100,n.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,n}return Kp(KeyboardPan,t),KeyboardPan}(Ep);function handleEvent$1(t){var e=!1;if(t.type==Eu.KEYDOWN){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==Wp.DOWN||n==Wp.LEFT||n==Wp.RIGHT||n==Wp.UP)){var r=t.map.getView(),i=r.getResolution()*this.pixelDelta_,o=0,a=0;n==Wp.DOWN?a=-i:n==Wp.LEFT?o=-i:n==Wp.RIGHT?o=i:a=i;var s=[o,a];rotate(s,r.getRotation()),function pan(t,e,n){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:linear,center:t.getConstrainedCenter(i)})}}(r,s,this.duration_),t.preventDefault(),e=!0}}return!e}var Yp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Zp=function(t){function KeyboardZoom(e){var n=t.call(this,{handleEvent:handleEvent$2})||this,r=e||{};return n.condition_=r.condition?r.condition:targetNotEditable,n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:100,n}return Yp(KeyboardZoom,t),KeyboardZoom}(Ep);function handleEvent$2(t){var e=!1;if(t.type==Eu.KEYDOWN||t.type==Eu.KEYPRESS){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var r=t.map,i=n=="+".charCodeAt(0)?this.delta_:-this.delta_;zoomByDelta(r.getView(),i,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var Hp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Xp="trackpad",$p="wheel",Qp=function(t){function MouseWheelZoom(e){var n=this,r=e||{};return(n=t.call(this,r)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,n.duration_=void 0!==r.duration?r.duration:250,n.timeout_=void 0!==r.timeout?r.timeout:80,n.useAnchor_=void 0===r.useAnchor||r.useAnchor,n.condition_=r.condition?r.condition:xp,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.trackpadDeltaPerZoom_=300,n}return Hp(MouseWheelZoom,t),MouseWheelZoom.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,Math.sign(this.lastDelta_),this.lastAnchor_)},MouseWheelZoom.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==Eu.WHEEL)return!0;t.preventDefault();var e,n=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Eu.WHEEL&&(e=r.deltaY,uc&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=hc),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();if(void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Xp:$p),this.mode_===Xp){var o=n.getView();return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):o.beginInteraction(),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.trackpadEventGap_),o.adjustZoom(-e/this.trackpadDeltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1}this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1},MouseWheelZoom.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations(),zoomByDelta(e,-clamp(this.totalDelta_,-this.maxDelta_,this.maxDelta_),this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},MouseWheelZoom.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},MouseWheelZoom}(Ep),Jp=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ty=function(t){function PinchRotate(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=FALSE),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==r.threshold?r.threshold:.3,n.duration_=void 0!==r.duration?r.duration:250,n}return Jp(PinchRotate,t),PinchRotate.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==disable){var u=a.getViewport().getBoundingClientRect(),l=centroid(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},PinchRotate.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},PinchRotate.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},PinchRotate}(Cp),ey=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),ny=function(t){function PinchZoom(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=FALSE),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==r.duration?r.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return ey(PinchZoom,t),PinchZoom.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],i=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=centroid(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)},PinchZoom.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},PinchZoom.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},PinchZoom}(Cp);var ry=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),iy=function(t){function Map(e){return(e=Ur({},e)).controls||(e.controls=function defaults(t){var e=t||{},n=new Od;return(void 0===e.zoom||e.zoom)&&n.push(new yp(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new dp(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new hp(e.attributionOptions)),n}()),e.interactions||(e.interactions=function defaults$1(t){var e=t||{},n=new Od,r=new wp(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Lp),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Op({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Ip({condition:e.onFocusOnly?focus:void 0,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new ty),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new ny({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Bp),n.push(new Zp({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new Qp({condition:e.onFocusOnly?focus:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new qp({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return ry(Map,t),Map.prototype.createRenderer=function(){return new bp(this)},Map}(lp),oy=createCommonjsModule((function(t,e){t.exports=function(t,e){t="default"in t?t.default:t;var classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}(),possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},r="layer-switcher-",i=function(t){function LayerSwitcher(t){classCallCheck(this,LayerSwitcher);var e=t||{},n=e.tipLabel?e.tipLabel:"Legend",r=document.createElement("div"),i=possibleConstructorReturn(this,(LayerSwitcher.__proto__||Object.getPrototypeOf(LayerSwitcher)).call(this,{element:r,target:e.target}));i.groupSelectStyle=LayerSwitcher.getGroupSelectStyle(e.groupSelectStyle),i.mapListeners=[],i.hiddenClassName="ol-unselectable ol-control layer-switcher",LayerSwitcher.isTouchDevice_()&&(i.hiddenClassName+=" touch"),i.shownClassName="shown",r.className=i.hiddenClassName;var o=document.createElement("button");o.setAttribute("title",n),r.appendChild(o),i.panel=document.createElement("div"),i.panel.className="panel",r.appendChild(i.panel),LayerSwitcher.enableTouchScroll_(i.panel);var a=i;return o.onmouseover=function(t){a.showPanel()},o.onclick=function(t){t=t||window.event,a.showPanel(),t.preventDefault()},a.panel.onmouseout=function(t){t=t||window.event,a.panel.contains(t.toElement||t.relatedTarget)||a.hidePanel()},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LayerSwitcher,t),n(LayerSwitcher,[{key:"setMap",value:function setMap(t){for(var n=0;n<this.mapListeners.length;n++)e.unByKey(this.mapListeners[n]);if(this.mapListeners.length=0,function get(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:get(i,e,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(LayerSwitcher.prototype.__proto__||Object.getPrototypeOf(LayerSwitcher.prototype),"setMap",this).call(this,t),t){var r=this;this.mapListeners.push(t.on("pointerdown",(function(){r.hidePanel()}))),this.renderPanel()}}},{key:"showPanel",value:function showPanel(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function hidePanel(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function renderPanel(){LayerSwitcher.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle})}}],[{key:"renderPanel",value:function renderPanel(t,e,n){for((n=n||{}).groupSelectStyle=LayerSwitcher.getGroupSelectStyle(n.groupSelectStyle),LayerSwitcher.ensureTopVisibleBaseLayerShown_(t);e.firstChild;)e.removeChild(e.firstChild);LayerSwitcher.forEachRecursive(t,(function(t,e,n){t.set("indeterminate",!1)})),"children"===n.groupSelectStyle||"none"===n.groupSelectStyle?LayerSwitcher.setGroupVisibility(t):"group"===n.groupSelectStyle&&LayerSwitcher.setChildVisibility(t);var r=document.createElement("ul");e.appendChild(r),LayerSwitcher.renderLayers_(t,t,r,n,(function render(r){LayerSwitcher.renderPanel(t,e,n)}))}},{key:"isBaseGroup",value:function isBaseGroup(t){var e=t.getLayers?t.getLayers().getArray():[];return e.length&&"base"===e[0].get("type")}},{key:"setGroupVisibility",value:function setGroupVisibility(t){LayerSwitcher.getGroupsAndLayers(t,(function(t){return t.getLayers&&!t.get("combine")&&!LayerSwitcher.isBaseGroup(t)})).reverse().forEach((function(t){var e=t.getLayersArray().map((function(t){return t.getVisible()}));e.every((function(t){return!0===t}))?(t.setVisible(!0),t.set("indeterminate",!1)):e.every((function(t){return!1===t}))?(t.setVisible(!1),t.set("indeterminate",!1)):(t.setVisible(!0),t.set("indeterminate",!0))}))}},{key:"setChildVisibility",value:function setChildVisibility(t){LayerSwitcher.getGroupsAndLayers(t,(function(t){return t.getLayers&&!t.get("combine")&&!LayerSwitcher.isBaseGroup(t)})).forEach((function(t){var e=t.getVisible(),n=t.get("indeterminate");t.getLayers().getArray().forEach((function(t){t.set("indeterminate",!1),e&&!n||!t.getVisible()||t.set("indeterminate",!0)}))}))}},{key:"ensureTopVisibleBaseLayerShown_",value:function ensureTopVisibleBaseLayerShown_(t){var e;LayerSwitcher.forEachRecursive(t,(function(t,n,r){"base"===t.get("type")&&t.getVisible()&&(e=t)})),e&&LayerSwitcher.setVisible_(t,e,!0)}},{key:"getGroupsAndLayers",value:function getGroupsAndLayers(t,e){var n=[];return e=e||function(t,e,n){return!0},LayerSwitcher.forEachRecursive(t,(function(t,r,i){t.get("title")&&e(t,r,i)&&n.push(t)})),n}},{key:"setVisible_",value:function setVisible_(t,e,n,r){e.setVisible(n),n&&"base"===e.get("type")&&LayerSwitcher.forEachRecursive(t,(function(t,n,r){t!=e&&"base"===t.get("type")&&t.setVisible(!1)})),e.getLayers&&!e.get("combine")&&"children"===r&&e.getLayers().forEach((function(n){LayerSwitcher.setVisible_(t,n,e.getVisible(),r)}))}},{key:"renderLayer_",value:function renderLayer_(t,e,n,i,o){var a=document.createElement("li"),s=e.get("title"),u=LayerSwitcher.uuid(),l=document.createElement("label");if(e.getLayers&&!e.get("combine")){var c=LayerSwitcher.isBaseGroup(e);if(a.classList.add("group"),c&&a.classList.add(r+"base-group"),e.get("fold")){a.classList.add(r+"fold"),a.classList.add(r+e.get("fold"));var h=document.createElement("button");h.onclick=function(t){LayerSwitcher.toggleFold_(e,a)},a.appendChild(h)}if(!c&&"none"!=i.groupSelectStyle){var f=document.createElement("input");f.type="checkbox",f.id=u,f.checked=e.getVisible(),f.indeterminate=e.get("indeterminate"),f.onchange=function(n){LayerSwitcher.setVisible_(t,e,n.target.checked,i.groupSelectStyle),o(e)},a.appendChild(f),l.htmlFor=u}l.innerHTML=s,a.appendChild(l);var d=document.createElement("ul");a.appendChild(d),LayerSwitcher.renderLayers_(t,e,d,i,o)}else{a.className="layer";var p=document.createElement("input");"base"===e.get("type")?(p.type="radio",p.name="base"):p.type="checkbox",p.id=u,p.checked=e.get("visible"),p.indeterminate=e.get("indeterminate"),p.onchange=function(n){LayerSwitcher.setVisible_(t,e,n.target.checked,i.groupSelectStyle),o(e)},a.appendChild(p),l.htmlFor=u,l.innerHTML=s;var y=t.getView().getResolution();(y>e.getMaxResolution()||y<e.getMinResolution())&&(l.className+=" disabled"),a.appendChild(l)}return a}},{key:"renderLayers_",value:function renderLayers_(t,e,n,r,i){for(var o,a=e.getLayers().getArray().slice().reverse(),s=0;s<a.length;s++)(o=a[s]).get("title")&&n.appendChild(LayerSwitcher.renderLayer_(t,o,s,r,i))}},{key:"forEachRecursive",value:function forEachRecursive(t,e){t.getLayers().forEach((function(t,n,r){e(t,n,r),t.getLayers&&LayerSwitcher.forEachRecursive(t,e)}))}},{key:"uuid",value:function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}},{key:"enableTouchScroll_",value:function enableTouchScroll_(t){if(LayerSwitcher.isTouchDevice_()){var e=0;t.addEventListener("touchstart",(function(t){e=this.scrollTop+t.touches[0].pageY}),!1),t.addEventListener("touchmove",(function(t){this.scrollTop=e-t.touches[0].pageY}),!1)}}},{key:"isTouchDevice_",value:function isTouchDevice_(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}},{key:"toggleFold_",value:function toggleFold_(t,e){e.classList.remove(r+t.get("fold")),t.set("fold","open"===t.get("fold")?"close":"open"),e.classList.add(r+t.get("fold"))}},{key:"getGroupSelectStyle",value:function getGroupSelectStyle(t){return["none","children","group"].indexOf(t)>=0?t:"children"}}]),LayerSwitcher}(t);return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=i),i}(hl,Ou)})),ay=function(t){function MetOClient(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,MetOClient),t=_possibleConstructorReturn(this,_getPrototypeOf(MetOClient).call(this)),vi.defs("EPSG:3067","+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),register(vi),t.config_=Ur(al,e),t.set("options",e,!0),t.set("map",null),t.timeSlider_=null,t.status_={},t.delay_=null!=e.refreshInterval&&e.refreshInterval<=Number.MAX_SAFE_INTEGER&&e.refreshInterval>=0?e.refreshInterval:Qu,t.periodDelay_=2*Qu,t.times_=[],t.playingListener_=null,t.nextListener_=null,t.previousListener_=null,t.renderComplete_=!1,t.updateNeeded_=!1,t.waitingRender_=0,t.refreshInterval_=e.refreshInterval?Math.min(Ns.fromISO(e.refreshInterval).valueOf(),$u):ol,t.capabilities_={},t.on("change:options",(function(){t.config_=Ur(al,t.get("options")),t.refresh()})),t}return _inherits(MetOClient,t),_createClass(MetOClient,[{key:"render",value:function render(){var t=this;return this.updateCapabilities_().then((function(){t.updateTimes_();var e=t.times_[0],n=Date.now();t.times_.some((function(t){var r=t>n;return r||(e=t),r})),null==t.config_.time&&(t.config_.time=e),t.config_.time<t.times_[0]&&(t.config_.time=t.times_[0]);var r=t.times_.length-1;t.config_.time>t.times_[r]&&(t.config_.time=t.times_[r]),Object.keys(t.config_.sources).forEach((function(n){null!=t.config_.sources[n].times&&t.config_.sources[n].times.length>0&&(t.config_.sources[n].tiles=function updateSourceTime(t,e){return t.map((function(t){var n=new Mi(t),r="time";for(var i in n.query)n.query.hasOwnProperty(i)&&"time"===i.toLocaleLowerCase()&&(r=i);return null!=e?n.query[r]="number"==typeof e?new Date(e).toISOString():e:delete n.query[p],n.toString()}))}(t.config_.sources[n].tiles,t.config_.sources[n].times.includes(e)?e:t.config_.sources[n].times[0]))})),t.updateMap_()})).catch((function(t){console.log(t)}))}},{key:"refresh_",value:function refresh_(){var t=this.get("map");null!=t&&t.getLayers().getArray().forEach((function(t,e){var n=t.getSource();null!=n.get("metoclient:time")&&n.set("metoclient:time",null)}));this.render()}},{key:"updateCapabilities_",value:function updateCapabilities_(){var t,e,n=this;return regeneratorRuntime.async((function updateCapabilities_$(r){for(;;)switch(r.prev=r.next){case 0:return t=Date.now(),r.next=3,regeneratorRuntime.awrap(Promise.all(this.config_.layers.reduce((function(e,r){if(null==r.source)return e;var i=[r.source];return null==r.time||null==r.time.source||i.includes(r.time.source)||i.push(r.time.source),i.forEach((function(i){var o=n.config_.sources[i];if(null!=o){var a="";if(null!=o.capabilities&&o.capabilities.length>0)a=o.capabilities;else{if(null==o.tiles||0===o.tiles.length)return;a=o.tiles[0]}a.endsWith("/")&&(a=a.substring(0,a.length-1));var s=a.lastIndexOf("/"),u="";u=a.toLowerCase().startsWith("http")&&s>=0?a.substring(s+1).toLowerCase():r.url.service.toLowerCase(),null==n.capabilities_[a]&&(n.capabilities_[a]={updated:null,type:u,data:null}),n.capabilities_[a].updated!==t&&(e.push(a+"?service=".concat(u,"&").concat("request=GetCapabilities")),n.capabilities_[a].updated=t)}})),e}),[]).map((function(t){return wd({url:t,crossDomain:!0,contentType:"text/plain",beforeSend:function beforeSend(e,n){e.requestURL=t}})}))));case 3:return e=r.sent,r.next=6,regeneratorRuntime.awrap(Promise.all(e.map((function(t){if(null!=t.responseText&&t.requestURL.endsWith("request=GetCapabilities")){var e=t.requestURL.split("?")[0],r=e.split("/"),i="";r.length>0&&(i=r[r.length-1]),i.length>0&&null!=n.capabilities_[i]&&(e=i),"function"==typeof pf[n.capabilities_[e].type]&&(n.capabilities_[e].data=pf[n.capabilities_[e].type](t.responseText))}}))));case 6:case"end":return r.stop()}}),null,this)}},{key:"isTiledLayer_",value:function isTiledLayer_(t){if(null==t||null==t.source)return!1;if(null!=t.url&&"string"==typeof t.url.service&&"wmts"===t.url.service.toLowerCase())return!0;var e=this.config_.sources[t.source];if(null==e||null==e.tiles)return!1;var n=Array.isArray(e.tileSize)?e.tileSize.map((function(t){return Number(t)>0})):new Array(2).fill(Number(e.tileSize)>0);if(Array.isArray(e.tiles)){var r=new Mi(e.tiles[0].toLowerCase());n=["width","height"].map((function(t,e){return null!=r.query&&void 0!==r.query[t]&&Number(r.query[t])>0||n[e]}))}return null!=t.url&&["width","height"].forEach((function(e,r){void 0!==t.url[e]&&(n[r]=Number(t.url[e])>0)})),n.every(Boolean)}},{key:"createLayer_",value:function createLayer_(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config_.time,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.isTiledLayer_(t)?"tiled":"image",o=this.config_.sources[t.source],a=null!=t.time&&null!=t.time.data,s=r.length>0;if(s&&!a)return null;var u=_objectSpread2({},this.config_);a&&(u.time=n,t.time.data.includes(u.time)||(u.time=t.time.data.reduce((function(t,n){return n<e.config_.time&&n>t&&(t=n),t}),t.time.data[0])));var l=null!=o.capabilities&&o.capabilities.length>0?o.capabilities:o.tiles[0],c=ch[i](t,u,this.capabilities_[l]);if(null!=c){c.on("change:visible",(function(t){var n=c.getVisible();["previous","next"].forEach((function(t){e.setRelativesVisible_(c,t,n);var r=c.get("metoclient:previous");null!=r&&r.setVisible(n);var i=c.get("metoclient:next");null!=i&&i.setVisible(n)}))})),a&&c.set("times",t.time.data),c.set("displayInLayerSwitcher",!s),c.set("metoclient:opacity",null!=t.opacity?t.opacity:1);var h=c.get("id");if(c.set("metoclient:id",h),s)c.set("id","metoclient:"+h+r),c.set("title",""),this.hideLayer_(c);else{var f=c.get("previous"),d=null!=f&&f.length>0?this.config_.layers.find((function(t){return t.id===f})):null,p=null!=d&&null!=d.time?d.time.data:[];p.includes(this.config_.time)&&this.hideLayer_(c)}}return c}},{key:"createLayerSwitcherTitle_",value:function createLayerSwitcherTitle_(t){var e=t.metadata.title,n=this.config_.layers,r=t.next,i=null!=r&&r.length>0?n.find((function(t){return t.id===r})):null,o=null!=i?this.createLayerSwitcherTitle_(i):"";return null!=o&&o.length>0&&e!==o&&(e+=" / "+o),t.metadata.title="",e}},{key:"setRelativesVisible_",value:function setRelativesVisible_(t,e,n){var r=t.get(e),i=this.get("map").getLayers().getArray(),o=null!=r&&r.length>0?i.find((function(t){return t.get("id")===r})):null;if(null!=o){o.setVisible(n),this.setRelativesVisible_(o,e,n);var a=o.get("metoclient:previous");null!=a&&a.setVisible(n);var s=o.get("metoclient:next");null!=s&&s.setVisible(n)}}},{key:"createLayers_",value:function createLayers_(){var t=this,e=this.config_.layers.reduce((function(t,e){return t+(null!=e.metadata&&null!=e.metadata.type&&"base"===e.metadata.type.toLowerCase())}),0),n=new Od(this.config_.layers.reduce((function(n,r){if(null==r.time||null!=r.previous&&0!==r.previous.length||null==r.metadata||null==r.metadata.title||(r.metadata.title=t.createLayerSwitcherTitle_(r)),null!=r.url&&(r.url=Object.keys(r.url).reduce((function(t,e){return t[e.toLowerCase()]=r.url[e],t}),{})),null==r.source||null!=r.url&&"string"!=typeof r.url.service||0===r.url.service.length)return n;1===e&&null!=r.metadata&&null!=r.metadata.type&&"base"===r.metadata.type.toLowerCase()&&(r.metadata.title="");var i=t.createLayer_(r);return null!=i&&n.push(i),n}),[]));return n.getArray().forEach((function(e,r,i){var o=e.get("metoclient:opacity");if(null==e.get("times"))n.item(r).setOpacity(o);else if(e.getSource().get("metoclient:time")===t.config_.time){var a=e.get("previous");if(null!=a&&a.length>0)i.find((function(t){return t.get("id")===a})).get("times").includes(t.config_.time)||n.item(r).setOpacity(o)}})),n}},{key:"setVisible_",value:function setVisible_(t,e){e?this.showLayer_(t):this.hideLayer_(t)}},{key:"showLayer_",value:function showLayer_(t){var e=t.get("metoclient:opacity");null==e&&(e=1),t.setOpacity(e)}},{key:"hideLayer_",value:function hideLayer_(t){t.setOpacity(0)}},{key:"createView_",value:function createView_(){var t=_objectSpread2({},this.config_);return delete t.sources,delete t.layers,new ip(t)}},{key:"currentTimeRendered_",value:function currentTimeRendered_(t){var e=this,n=this.get("map");if(null!=n){var r=n.getLayers().getArray();if(r.forEach((function(t){var n=t.get("times"),i=null==n||!Array.isArray(n)||0===n.length;if(!i&&t.getSource().get("metoclient:time")===e.config_.time){i=!0;var o=t.get("previous"),a=null!=o&&o.length>0?r.find((function(t){return t.get("id")===o})):null;if(null!=a){var s=a.get("times");s[s.length-1]>=e.config_.time&&(i=!1)}}e.setVisible_(t,i)})),this.status_[this.config_.time]="success",this.timeSlider_.updateTimeLoaderVis(this.times_.map((function(t){return{endTime:t,status:e.status_[t]}}))),this.updateNeeded_)this.updateNeeded_=!1,this.renderComplete_=!0,this.timeUpdated_();else{var i=this.getPrevTime_(),o=this.getNextTime_();r.filter((function(t){var e=t.get("times");return!(null==e||!Array.isArray(e)||0===e.length)&&!t.get("id").startsWith("metoclient:")})).forEach((function(t){var r,a,s=t.get("id"),u=e.config_.layers.find((function(t){return t.id===s})),l=!1,c=!1,h=t.get("times"),f=t.get("previous"),d=t.get("next");n.get("playing")||i<h[0]&&null!=f&&f.length>0?l=!0:(r=h.includes(i)?i:h.reduce((function(t,e){return e<i&&i-e<t?e:t}),Number.POSITIVE_INFINITY))>i&&(r=Math.max.apply(Math,_toConsumableArray(h))),o>h[h.length-1]&&null!=d&&d.length>0?c=!0:(a=h.includes(o)?o:h.reduce((function(t,e){return e>o&&o-e>t?e:t}),Number.NEGATIVE_INFINITY))<o&&(a=Math.min.apply(Math,_toConsumableArray(h)));var p=n.getLayers(),y=t.get("metoclient:previous");if(null==y&&null!=u&&null!=r){(y=e.createLayer_(u,r,"-previous")).setVisible(t.getVisible());var m=p.getArray().findIndex((function(e){return e.get("metoclient:id")===t.get("metoclient:id")}));p.insertAt(m,y),t.set("metoclient:previous",y)}if(!l&&null!=y){var g=y.getSource();g.get("metoclient:time")!==r&&(e.hideLayer_(y),hh[g.constructor.name](g,r))}var v=t.get("metoclient:next");if(null==v&&null!=u&&null!=a){(v=e.createLayer_(u,a,"-next")).setVisible(t.getVisible());var _=p.getArray().findIndex((function(e){return e.get("metoclient:id")===t.get("metoclient:id")}));p.insertAt(_,v),t.set("metoclient:next",v)}if(!c&&null!=v){var b=v.getSource();b.get("metoclient:time")!==a&&(e.hideLayer_(v),hh[b.constructor.name](b,a))}})),n.renderSync(),n.once("rendercomplete",(function(t){e.renderComplete_=!0,e.updateNeeded_?(e.updateNeeded_=!1,e.timeUpdated_()):e.waitingRender_>0&&timeout$1(e.animate_.bind(e),Math.max(e.delay_-(Date.now()-e.waitingRender_),0))}))}}}},{key:"getLayerSwitcher_",value:function getLayerSwitcher_(){var t=this.get("map");if(null==t)return null;var e=t.getControls();return null==e?null:e.getArray().find((function(t){return null!=t.constructor&&"LayerSwitcher"===t.constructor.name}))}},{key:"timeUpdated_",value:function timeUpdated_(){var t=this;if(!this.renderComplete_){var e=this.get("map").get("time");return"success"!==this.status_[e]&&(this.status_[e]="working",this.timeSlider_.updateTimeLoaderVis(this.times_.map((function(e){return{endTime:e,status:t.status_[e]}})))),void(this.updateNeeded_=!0)}this.get("map").once("rendercomplete",this.currentTimeRendered_.bind(this)),this.status_[this.config_.time]="success",this.config_.time=this.get("map").get("time"),this.status_[this.config_.time]="working",Object.keys(this.status_).forEach((function(e){Number(e)!==t.config_.time&&"working"===t.status_[e]&&(t.status_[e]="")})),this.timeSlider_.updateTimeLoaderVis(this.times_.map((function(e){return{endTime:e,status:t.status_[e]}})));var n=this.get("map").getLayers().getArray();n.filter((function(e){var r=e.get("times");if(null==r||!Array.isArray(r)||0===r.length)return!1;if(t.config_.time<r[0]||t.config_.time>r[r.length-1])return t.hideLayer_(e),!1;var i=e.get("previous"),o=null!=i&&i.length>0?n.find((function(t){return t.get("id")===i})):null;return(null!=o?o.get("times"):[]).includes(t.config_.time)?(t.hideLayer_(e),!1):!e.get("id").startsWith("metoclient:")})).forEach((function(e){var n=e.getSource();if(n.get("metoclient:time")===t.config_.time){var r=e.get("metoclient:previous");null!=r?t.hideLayer_(r):(t.status_[t.config_.time]="success",t.timeSlider_.updateTimeLoaderVis(t.times_.map((function(e){return{endTime:e,status:t.status_[e]}}))));var i=e.get("metoclient:next");null!=i&&t.hideLayer_(i),t.showLayer_(e)}else{var o=e.get("metoclient:previous"),a=e.get("metoclient:next");if(null!=o){var s=o.getSource();if(null!=s&&s.get("metoclient:time")===t.config_.time){t.hideLayer_(e),t.showLayer_(o);var u=e.get("metoclient:id");return e.set("id","metoclient:"+u+"-next"),o.set("id",u),null!=a&&a.set("id","metoclient:"+u+"-previous"),o.set("metoclient:previous",a),o.set("metoclient:next",e),o.set("title",e.get("title")),e.set("metoclient:next",o),void e.set("title","")}}if(null!=a){var l=a.getSource();if(null!=l){if(l.get("metoclient:time")===t.config_.time){t.hideLayer_(e),t.showLayer_(a);var c=e.get("metoclient:id");return e.set("id","metoclient:"+c+"-previous"),a.set("id",c),null!=o&&o.set("id","metoclient:"+c+"-next"),a.set("metoclient:previous",e),a.set("metoclient:next",o),a.set("title",e.get("title")),e.set("metoclient:previous",a),void e.set("title","")}var h=e.get("metoclient:id");return e.set("id","metoclient:"+h+"-previous"),a.set("id",h),null!=o&&o.set("id","metoclient:"+h+"-next"),a.set("metoclient:previous",e),a.set("metoclient:next",o),a.set("title",e.get("title")),e.set("metoclient:previous",a),e.set("title",""),void hh[l.constructor.name](l,t.config_.time)}}hh[n.constructor.name](n,t.config_.time)}})),this.renderComplete_=!1,this.get("map").renderSync()}},{key:"updateTimeListener_",value:function updateTimeListener_(){this.timeListener_=this.get("map").on("change:time",this.timeUpdated_.bind(this))}},{key:"createMap_",value:function createMap_(){var t=this;this.timeSlider_=new fl({locale:"fi-FI",showTimeSlider:!0,timeZone:this.config_.timeZone,timeZoneLabel:this.config_.timeZoneLabel});var e=new iy({target:this.config_.container,layers:this.createLayers_(),view:this.createView_(),controls:[new yp({zoomInTipLabel:this.config_.texts["Zoom In"],zoomOutTipLabel:this.config_.texts["Zoom Out"]}),new oy,this.timeSlider_],interactions:[new Op,new Ip,new ny,new Bp,new Zp]});this.set("map",e),this.renderComplete_=!0,this.timeSlider_.createTimeSlider(this.times_),this.playingListener_=this.get("map").on("change:playing",(function(e){t.get("map").get("playing")&&t.animate_()})),this.updateTimeListener_(),this.nextListener_=this.get("map").on("next",(function(e){t.next()})),this.previousListener_=this.get("map").on("previous",(function(e){t.previous()})),e.set("time",this.config_.time),this.refreshTimer_=function interval$1(t,e,n){var r=new Timer,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?now$1():+n,r.restart((function tick(o){o+=i,r.restart(tick,i+=e,n),t(o)}),e,n),r)}(this.refresh_.bind(this),this.refreshInterval_)}},{key:"updateMap_",value:function updateMap_(){var t=this.get("map");null==t?this.createMap_():(t.setTarget(this.config_.container),t.getLayerGroup().setLayers(this.createLayers_()),t.setView(this.createView_()),t.set("time",this.config_.time),this.updateTimeListener_(),this.timeUpdated_())}},{key:"updateTimes_",value:function updateTimes_(){var t=this;this.times_=[],this.status_={},this.config_.layers.forEach((function(e){if(null!=e.time&&null!=e.time.range){var n=parseTimes(e.time.range,e.time.offset),r=null!=e.time.source?t.config_.sources[e.time.source]:t.config_.sources[e.source],i=t.capabilities_[r.tiles[0]];if(null==i||null==i.data||null==i.data.Capability||null==i.data.Capability.Layer||null==i.data.Capability.Layer.Layer)return;var o,a,s=i.data.Capability.Layer.Layer.find((function(t){return[e.url.layer,e.url.layers].includes(t.Name)})),u=parseTimes(null!=s?s.Dimension.find((function(t){return"time"===t.name.toLowerCase()})).values:[]),l=Date.now(),c=0,h=0;n.forEach((function(t,e){isNaN(t)||isFinite(t)||(t<0?(null==o&&(o=u.filter((function(t){return t<l})).sort().reverse()),n[e]=o[c],c++):(null==a&&(a=u.filter((function(t){return t>=l})).sort()),n[e]=a[h],h++))})),n.sort(),e.time.data=n.filter((function(t){return u.includes(t)})),t.times_=_toConsumableArray(new Set([].concat(_toConsumableArray(t.times_),_toConsumableArray(e.time.data)))).sort()}})),this.times_.forEach((function(e){t.status_[e]=""}))}},{key:"play",value:function play(t){this.delay_=Math.sign(t.delay)>0?t.delay:Qu,this.periodDelay_=Math.sign(t.periodDelay)>0?t.periodDelay:2*Qu,this.get("map").set("playing",!0)}},{key:"animate_",value:function animate_(){this.get("map").get("playing")&&(this.renderComplete_?(this.waitingRender_=0,this.next(),timeout$1(this.animate_.bind(this),this.delay_)):this.waitingRender_=Date.now())}},{key:"getNextTime_",value:function getNextTime_(){for(var t=this.config_.time,e=this.times_.length,n=0,r=0;r<e;r++)if(this.times_[r]>t){n=r;break}return this.times_[n]}},{key:"next",value:function next(){this.isReady_()&&this.get("map").set("time",this.getNextTime_())}},{key:"getPrevTime_",value:function getPrevTime_(){for(var t=this.config_.time,e=this.times_.length,n=e-1,r=0;r<e&&this.times_[r]<t;r++)n=r;return this.times_[n]}},{key:"previous",value:function previous(){this.isReady_()&&this.get("map").set("time",this.getPrevTime_())}},{key:"isReady_",value:function isReady_(){return null!=this.get("map")&&this.times_.length>0}},{key:"pause",value:function pause(){this.get("map").set("playing",!1)}},{key:"stop",value:function stop(){this.pause()}},{key:"destroy",value:function destroy(){unByKey(this.playingListener_),unByKey(this.nextListener_),unByKey(this.previousListener_),unByKey(this.timeListener_),this.timeSlider_.destroy()}}],[{key:"transform",value:function transform$1(t,e,n){return vi.defs("EPSG:3067","+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),register(vi),transform(t,e,n)}}]),MetOClient}(Cu);return t.MetOClient=ay,t.default=ay,t}({});
